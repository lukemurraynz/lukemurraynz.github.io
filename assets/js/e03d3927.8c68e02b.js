"use strict";(self.webpackChunklukemurraynz=self.webpackChunklukemurraynz||[]).push([[84682],{74818:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>u,contentTitle:()=>i,default:()=>l,frontMatter:()=>n,metadata:()=>a,toc:()=>p});var r=o(85893),s=o(11151);const n={date:"2021-03-27 00:00:00 +1300",title:"Azure WebApp 500 Errors reporting from AspNetCoreModule",authors:["Luke"],tags:["Azure"],toc:!1},i=void 0,a={permalink:"/2021/03/27/azure-webapp-500-errors-reporting-from-aspnetcoremodule",source:"@site/blog/2021-03-27-azure-webapp-500-errors-reporting-from-aspnetcoremodule.md",title:"Azure WebApp 500 Errors reporting from AspNetCoreModule",description:"Issue Description",date:"2021-03-27T00:00:00.000Z",formattedDate:"March 27, 2021",tags:[{label:"Azure",permalink:"/tags/azure"}],readingTime:.88,hasTruncateMarker:!1,authors:[{name:"Luke Murray",title:"Author",url:"https://luke.geek.nz",imageURL:"https://luke.geek.nz/img/logo.png",key:"Luke"}],frontMatter:{date:"2021-03-27 00:00:00 +1300",title:"Azure WebApp 500 Errors reporting from AspNetCoreModule",authors:["Luke"],tags:["Azure"],toc:!1},unlisted:!1,prevItem:{title:"How to restrict users to specific boards in Azure DevOps",permalink:"/2021/03/28/how-to-restrict-users-to-specific-boards-in-azure-devops"},nextItem:{title:"Allow Azure DevOps Microsoft Hosted Agent to communicate with Azure KeyVault",permalink:"/2021/03/26/allow-azure-devops-microsoft-hosted-agent-to-communicate-with-azure-keyvault"}},u={authorsImageUrls:[void 0]},p=[{value:"Issue Description",id:"issue-description",level:2},{value:"Root Cause",id:"root-cause",level:2},{value:"Resolution",id:"resolution",level:2}];function c(e){const t={a:"a",h2:"h2",p:"p",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"issue-description",children:"Issue Description"}),"\n",(0,r.jsx)(t.p,{children:"Intermittent issues with Azure WebApp constantly stop functioning, a Stop/Start operation brings it back online."}),"\n",(0,r.jsx)(t.h2,{id:"root-cause",children:"Root Cause"}),"\n",(0,r.jsx)(t.p,{children:"Further investigation using Azure Application Insights, reveals the Azure WebApp was experiencing a few FailedRequestCount, with HTTP 500 Errors. An exception was thrown by a TaskScheduler. Exception of type 'System.OutOfMemoryException' was thrown."}),"\n",(0,r.jsx)(t.h2,{id:"resolution",children:"Resolution"}),"\n",(0,r.jsx)(t.p,{children:"In my case, the service that was running on the Azure WebApp was using .NET Core 2.0, the fix was to upgrade to the latest version."}),"\n",(0,r.jsxs)(t.p,{children:[".NET Core 2.0 is an unsupported version and we highly recommend upgrading to the latest version (3.1). Please take a look at this information of the .NET Core official support policy: ",(0,r.jsx)(t.a,{href:"https://dotnet.microsoft.com/platform/support/policy/dotnet-core",title:"https://dotnet.microsoft.com/platform/support/policy/dotnet-core",children:"https://dotnet.microsoft.com/platform/support/policy/dotnet-core"})]}),"\n",(0,r.jsxs)(t.p,{children:["For .NET Core applications I suggest enabling the stdout logs, as those will capture some important errors: ",(0,r.jsx)(t.a,{href:"https://learn.microsoft.com/en-us/aspnet/core/test/troubleshoot-azure-iis?view=aspnetcore-2.2#aspnet-core-module-stdout-log-azure-app-service-1",title:"https://learn.microsoft.com/en-us/aspnet/core/test/troubleshoot-azure-iis?view=aspnetcore-2.2&WT.mc_id=AZ-MVP-5004796#aspnet-core-module-stdout-log-azure-app-service-1",children:"https://learn.microsoft.com/en-us/aspnet/core/test/troubleshoot-azure-iis?view=aspnetcore-2.2#aspnet-core-module-stdout-log-azure-app-service-1"})]}),"\n",(0,r.jsxs)(t.p,{children:["If those OutOfMemory exceptions come with a 5xx status code, I would suggest as well using the AutoHeal feature as it will allow setting rules based on that status code to capture a Memory Dump, you can check more information here: ",(0,r.jsx)(t.a,{href:"https://learn.microsoft.com/en-us/aspnet/core/test/troubleshoot-azure-iis?view=aspnetcore-2.2#aspnet-core-module-stdout-log-azure-app-service-1",title:"https://learn.microsoft.com/en-us/aspnet/core/test/troubleshoot-azure-iis?view=aspnetcore-2.2&WT.mc_id=AZ-MVP-5004796#aspnet-core-module-stdout-log-azure-app-service-1",children:"https://azure.github.io/AppService/2018/09/10/Announcing-the-New-Auto-Healing-Experience-in-App-Service-Diagnostics.html"})]})]})}function l(e={}){const{wrapper:t}={...(0,s.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},11151:(e,t,o)=>{o.d(t,{Z:()=>a,a:()=>i});var r=o(67294);const s={},n=r.createContext(s);function i(e){const t=r.useContext(n);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(n.Provider,{value:t},e.children)}}}]);