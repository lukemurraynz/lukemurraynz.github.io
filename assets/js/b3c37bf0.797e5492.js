"use strict";(self.webpackChunklukemurraynz=self.webpackChunklukemurraynz||[]).push([[88081],{37248:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>c,frontMatter:()=>s,metadata:()=>r,toc:()=>d});var r=t(88187),i=t(74848),l=t(28453);const s={title:"Hyper-V 2012 R2 on an Intel NUC (NUC5i7RYH)",tags:["Windows"],date:"2016-04-30 00:00:00 +1300"},o=void 0,a={authorsImageUrls:[]},d=[{value:'<span id="Changing_the_Intel_Network_Drivers_Manually">Changing the Intel Network Drivers Manually</span>',id:"changing-the-intel-network-drivers-manually",level:2},{value:'<span id="Downloading_Intel_Network_Drivers_8211_NUC5i7RYH_Compatible">Downloading Intel Network Drivers \u2013 NUC5i7RYH Compatible</span>',id:"downloading-intel-network-drivers--nuc5i7ryh-compatible",level:2},{value:'<span id="Intel_NUC5i7RYH_Hyper-V_2012_R2_ISO">Intel NUC5i7RYH Hyper-V 2012 R2 ISO</span>',id:"intel-nuc5i7ryh-hyper-v-2012-r2-iso",level:2}];function h(e){const n={a:"a",div:"div",em:"em",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",span:"span",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"One of the problems with Hyper-V 2012 R2 on an Intel NUC \u2013 NUC5i7RYH was because of the \u2018Client\u2019 network card chipset. Windows Server 2012 would not install the Ethernet Adapter for the Server operating system."}),"\n",(0,i.jsx)(n.p,{children:"Once I made the manual adjustments to the Network drivers to get this going, I then slipstreamed the drivers and Server 2012 R2 updates (as of Feb 2016) into a Hyper-V 2012 R2 ISO which can then be made bootable for future Hyper-V installations."}),"\n",(0,i.jsxs)(n.div,{id:"toc_container",className:"no_bullets",children:["\n  ",(0,i.jsx)(n.p,{className:"toc_title",children:"\n    Table of Contents\n  "}),"\n  ",(0,i.jsxs)(n.ul,{className:"toc_list",children:["\n    ",(0,i.jsxs)(n.li,{children:["\n      ",(0,i.jsxs)(n.a,{href:"#Changing_the_Intel_Network_Drivers_Manually",children:[(0,i.jsx)(n.span,{className:"toc_number toc_depth_1",children:"1"})," Changing the Intel Network Drivers Manually"]}),"\n    "]}),"\n    ",(0,i.jsxs)(n.li,{children:["\n      ",(0,i.jsxs)(n.a,{href:"#Downloading_Intel_Network_Drivers_8211_NUC5i7RYH_Compatible",children:[(0,i.jsx)(n.span,{className:"toc_number toc_depth_1",children:"2"})," Downloading Intel Network Drivers \u2013 NUC5i7RYH Compatible"]}),"\n    "]}),"\n    ",(0,i.jsxs)(n.li,{children:["\n      ",(0,i.jsxs)(n.a,{href:"#Intel_NUC5i7RYH_Hyper-V_2012_R2_ISO",children:[(0,i.jsx)(n.span,{className:"toc_number toc_depth_1",children:"3"})," Intel NUC5i7RYH Hyper-V 2012 R2 ISO"]}),"\n    "]}),"\n  "]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"changing-the-intel-network-drivers-manually",children:(0,i.jsx)(n.span,{id:"Changing_the_Intel_Network_Drivers_Manually",children:"Changing the Intel Network Drivers Manually"})}),"\n",(0,i.jsx)(n.p,{children:"7-Zip or WinRAR will be needed to\xa0extract the EXE to a folder location. In these examples, I am using 7-Zip."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Download the Intel x64 Network Drivers here: ",(0,i.jsx)(n.a,{href:"https://downloadcenter.intel.com/download/23071/Network-Adapter-Driver-for-Windows-8-1-",target:"_blank"}),(0,i.jsx)(n.a,{href:"https://downloadcenter.intel.com/download/23071/Network-Adapter-Driver-for-Windows-8-1-",children:"https://downloadcenter.intel.com/download/23071/Network-Adapter-Driver-for-Windows-8-1-"})]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"(20.7 Date: 2/11/2016)"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Once downloaded. Right click the \u2018PROWinx64.exe\u2019 and select 7-Zip and Extract to \u201cPROWinx64&#8221; this will extract the driver executable to a folder"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.img,{src:"https://i2.wp.com/luke.geek.nz/wp-content/uploads/2016/03/030516_2351_HyperV2012R1.png?w=1500",alt:"","data-recalc-dims":"1"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Once extracted navigate to: \\PROWinx64\\PRO1000\\Winx64\\NDIS64Find \u2018e1d64x64.INF\u2019 and right click and select Open to open with Notepad"}),"\n",(0,i.jsx)(n.li,{children:"Find the Heading \u2018[Intel.NTamd64.6.3.1]\u2019 and copy the devices in this section"}),"\n"]}),"\n",(0,i.jsx)(n.img,{src:"https://i0.wp.com/luke.geek.nz/wp-content/uploads/2016/03/030516_2351_HyperV2012R2.png?w=1500",alt:"","data-recalc-dims":"1"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Navigate to the Heading \u2018[Intel.NTamd64.6.3]\u2019 and paste underneath the Devices (for example \u2013 underneath: PCI\\VEN\\8086&DEV_15B7&SUBSYS_00011179 \u2013 the last line):"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\xa0"}),"\n",(0,i.jsx)(n.img,{src:"https://i0.wp.com/luke.geek.nz/wp-content/uploads/2016/03/030516_2351_HyperV2012R3.png?w=1500",alt:"","data-recalc-dims":"1"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"So it looks like the below with the devices from the top copied onto the bottom. You may have some duplicate Device IDs on the bottom section, you can remove these if you want to. I left mine in there. Once confirmed, save the file: e1d64x64.INF."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\xa0"}),"\n",(0,i.jsx)(n.img,{src:"https://i2.wp.com/luke.geek.nz/wp-content/uploads/2016/03/030516_2351_HyperV2012R4.png?w=1500",alt:"","data-recalc-dims":"1"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Once completed, copy the: NDIS64 folder to a USB flash drive and plug it into one of the Intel NUCs Flash drive slots."}),"\n",(0,i.jsx)(n.li,{children:"Open the command prompt and type the following commands to allow unsigned/driver testing drivers:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{className:"lang:default decode:true",children:"bcdedit /set LOADOPTIONS DISABLE_INTEGRITY_CHECKS\nbcdedit /set TESTSIGNING ON\nbcdedit /set nointegritychecks ON"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Once ran, restart the NUC."}),"\n",(0,i.jsx)(n.li,{children:"Once restarted and logged in navigate back to the Command Prompt again and navigate to your USB Flash drive \u2013 time to install the drivers."}),"\n",(0,i.jsx)(n.li,{children:"Type in the below and press Enter:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{className:"lang:default decode:true",children:"pnputil\xa0-i -a\xa0e1d64x64.inf"}),"\n",(0,i.jsx)(n.img,{src:"https://i0.wp.com/luke.geek.nz/wp-content/uploads/2016/03/030516_2351_HyperV2012R5.png?w=1500",alt:"","data-recalc-dims":"1"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Wait a minute while it installs the driver. Once you have the Windows Security Dialog \u201cWindows can\u2019t verify the publisher of this driver software\u201d select \u201cInstall this software anyway\u201d"}),"\n",(0,i.jsx)(n.li,{children:"Once installed. Restart your Hyper-V server the Network Adapter should now be installed."}),"\n",(0,i.jsx)(n.li,{children:"You can then disable the unsigned/driver testing drivers if needed in the Command Prompt window:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{className:"lang:default decode:true",children:"bcdedit /set LOADOPTIONS ENABLE_INTEGRITY_CHECKS\nbcdedit /set TESTSIGNING OFF\nbcdedit /set nointegritychecks OFF"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Back at the Server Configuration window ",(0,i.jsx)(n.em,{children:"(type sconfig in the Command Prompt if missing it)"})," you can now select 8 to configure your Network settings, remember to specify the Computer Name an add it to a Domain if needed."]}),"\n"]}),"\n",(0,i.jsx)(n.img,{src:"https://i0.wp.com/luke.geek.nz/wp-content/uploads/2016/03/030516_2351_HyperV2012R6.png?w=1500",alt:"","data-recalc-dims":"1"}),"\n",(0,i.jsxs)(n.p,{children:["References: Thanks to an article written by Jay \u201c",(0,i.jsx)(n.a,{href:"http://jayrbarrios.com/2014/11/19/intel-nuc-d54250wykh-installing-lan-driver-on-windows-hyper-v-server-2012-r2",target:"_blank",children:"Intel NUC D54250WYKH: Installing LAN Driver on Windows Hyper-V Server 2012 R2"}),"\u201d for a lot of assistance in getting this going, was able to easily adapt it for the NUC5i7RYH."]}),"\n",(0,i.jsx)(n.h2,{id:"downloading-intel-network-drivers--nuc5i7ryh-compatible",children:(0,i.jsx)(n.span,{id:"Downloading_Intel_Network_Drivers_8211_NUC5i7RYH_Compatible",children:"Downloading Intel Network Drivers \u2013 NUC5i7RYH Compatible"})}),"\n",(0,i.jsxs)(n.p,{children:["I have bundled the tweaked driver packed I used into a ZIP file \u2013 You can download it here: ",(0,i.jsx)(n.a,{href:"https://mega.nz/#!5ZtQUTqZ!iKWih9idK-jil6dT4Q7C_D16N5MQiCF9vr6qws6CmFc",target:"_blank",children:"Intel_NUC_2012R2_NUC5i7RYH_Drivers.zip"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.em,{children:"(20.7 Date: 2/11/2016"}),"). This will take you to Step 8 of the guide above. This driver pack should also be able to be used in a normal Windows Server 2012 R2 x64 environment."]}),"\n",(0,i.jsx)(n.h2,{id:"intel-nuc5i7ryh-hyper-v-2012-r2-iso",children:(0,i.jsx)(n.span,{id:"Intel_NUC5i7RYH_Hyper-V_2012_R2_ISO",children:"Intel NUC5i7RYH Hyper-V 2012 R2 ISO"})}),"\n",(0,i.jsxs)(n.p,{children:["As mentioned earlier. I have created an ISO ",(0,i.jsx)(n.em,{children:"(which I then used to create my Hyper-V server on my NUC)"})," which I have added the recommended ",(0,i.jsx)(n.em,{children:"(excluding .Net)"})," Windows Updates ",(0,i.jsx)(n.em,{children:"(as of Feb 2016)"})," and added the Intel NUC drivers too. This allowed me to easily rebuild my Hyper-V server on the Intel NUC NUC5i7RYH a few times during testing, minimizing the need to do the Network drivers manually and reduced the amount of Windows Updates I had to install."]}),"\n",(0,i.jsxs)(n.p,{children:["The ISO I used as a source was Hyper-V Core RTM ",(0,i.jsx)(n.em,{children:"(9600.16384.WINBLUE_RTM.130821-1623_X64FRE_SERVERHYPERCORE_EN-US-IRM_SHV_X64FRE_EN-US_DV5)"})," downloaded directly from Microsoft."]}),"\n",(0,i.jsx)(n.img,{src:"https://i0.wp.com/luke.geek.nz/wp-content/uploads/2016/03/030516_2351_HyperV2012R7.png?w=1500",alt:"","data-recalc-dims":"1"}),"\n",(0,i.jsx)(n.p,{children:"I then used a WSUS server to download the 2012 R2 updates and slipstreamed them into the Retail ISO. Then I added the NUC Intel Drivers."}),"\n",(0,i.jsx)(n.p,{children:"Other than the above: 2012 R2 Updates, Intel Ethernet Drivers for the Intel NUC and enabling the .Net 3.5 feature this is untouched."}),"\n",(0,i.jsx)(n.img,{src:"https://i0.wp.com/luke.geek.nz/wp-content/uploads/2016/03/030516_2351_HyperV2012R8.png?w=1500",alt:"","data-recalc-dims":"1"}),"\n",(0,i.jsxs)(n.p,{children:["This can be downloaded here: ",(0,i.jsx)(n.a,{href:"https://mega.nz/#!wclQwJKB!l6pM0XU5sv63mgSu7rYaPIHvQRYfXaMDvzBBJCVX9Gw",target:"_blank",children:"SERVERHYPERVCORE_EN-US-NUC_NUCi57RYH_Feb2016.ISO"})]}),"\n",(0,i.jsx)(n.p,{children:"_README"}),"\n",(0,i.jsx)(n.p,{children:"_"}),"\n",(0,i.jsx)(n.p,{children:"_\u2014\u2014\u2014\u2014"}),"\n",(0,i.jsx)(n.p,{children:"_"}),"\n",(0,i.jsx)(n.p,{children:"_This Hyper-V Core DVD ISO was created by: Luke Murray (Luke.Geek.NZ) on the: 05/03/16"}),"\n",(0,i.jsx)(n.p,{children:"_"}),"\n",(0,i.jsx)(n.p,{children:"_The following adjustments have been made (no other adjustments have been made and should be RTM)"}),"\n",(0,i.jsx)(n.p,{children:"_"}),"\n",(0,i.jsx)(n.p,{children:"_This 2012 R2 server core ISO has the latest Windows Updates slipstreamed (except .net updates) to: Feb 2016."}),"\n",(0,i.jsx)(n.p,{children:"_"}),"\n",(0,i.jsx)(n.p,{children:"_This 2012 server core also has the following Intel drivers for the Intel NUC system:"}),"\n",(0,i.jsx)(n.p,{children:"_"}),"\n",(0,i.jsx)(n.p,{children:"_Note: Please note Intel does not fully support Windows Server 2012 R2 on the NUC5i7RYH due to using a client Network chipset."}),"\n",(0,i.jsx)(n.p,{children:"_"}),"\n",(0,i.jsx)(n.p,{children:"_The Network driver\u2019s configurations had to be tweaked to allow installation."}),"\n",(0,i.jsx)(n.p,{children:"_"}),"\n",(0,i.jsx)(n.p,{children:"_Intel(R) Network Drivers 20.7 (January 21, 2016)"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae 82599EB 10 Gigabit Ethernet Controller"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae 82580EB Gigabit Ethernet Controller"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Server Adapter I340-F4"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Converged Network Adapter X520-SR1"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Converged Network Adapter X520-DA2"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Controller I350-BT2"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Controller I350-AM2"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Controller I350-AM4"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Controller I210-IT"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Converged Network Adapter X540-T2"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Server Adapter I350-F2"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Server Adapter I350-F4"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Controller X540-AT2"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Connection I217-V"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Connection I218-V"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Connection I218-LM"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Controller I210-AT"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Controller I210-IS"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Converged Network Adapter X520-DA4"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Converged Network Adapter X520-QDA1"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Converged Network Adapter X520-LR1"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae 82599ES 10 Gigabit Ethernet Controller"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae 82579LM Gigabit Ethernet PHY"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Server Adapter I340-T4"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Server Adapter I350-T2"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Server Adapter I350-T4"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Connection I217-LM"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Converged Network Adapter X520-T2"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Converged Network Adapter X520-SR2"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae 82579V Gigabit Ethernet PHY"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Converged Network Adapter X540-T1"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Controller I211-AT"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae 82599EN 10 Gigabit Ethernet Controller"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Converged Network Adapter X520-DA1"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Controller I210-AS"}),"\n",(0,i.jsx)(n.p,{children:"_Intel\xae Ethernet Controller I210-CS"}),"\n",(0,i.jsx)(n.p,{children:"_Note: I take no liability for loss or damage following these guides or using my driver pack or ISO. This is merely intended to help people"}),"\n",(0,i.jsx)(n.p,{children:"_"}),"\n",(0,i.jsxs)(n.p,{children:["I recommend using ",(0,i.jsx)(n.a,{href:"https://rufus.akeo.ie/",target:"_blank",children:"Rufus"})," to load the ISO to a USB flash drive using the settings below:"]}),"\n",(0,i.jsx)(n.img,{src:"https://i1.wp.com/luke.geek.nz/wp-content/uploads/2016/03/030516_2351_HyperV2012R9.jpg?w=1500",alt:"","data-recalc-dims":"1"}),"\n",(0,i.jsx)(n.p,{children:"Once completed, put the USB drive into the NUC and restart. On startup press F10 to navigate to the Boot Menu and select the USB drive."})]})}function c(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>o});var r=t(96540);const i={},l=r.createContext(i);function s(e){const n=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(l.Provider,{value:n},e.children)}},88187:e=>{e.exports=JSON.parse('{"permalink":"/2016/03/06/hyper-v-2012-r2-intel-nuc-nuc5i7ryh","source":"@site/blog/2016-03-06-hyper-v-2012-r2-intel-nuc-nuc5i7ryh.md","title":"Hyper-V 2012 R2 on an Intel NUC (NUC5i7RYH)","description":"One of the problems with Hyper-V 2012 R2 on an Intel NUC &#8211; NUC5i7RYH was because of the &#8216;Client&#8217; network card chipset. Windows Server 2012 would not install the Ethernet Adapter for the Server operating system.","date":"2016-04-30T00:00:00.000Z","tags":[{"inline":true,"label":"Windows","permalink":"/tags/windows"}],"readingTime":5.905,"hasTruncateMarker":false,"authors":[],"frontMatter":{"title":"Hyper-V 2012 R2 on an Intel NUC (NUC5i7RYH)","tags":["Windows"],"date":"2016-04-30 00:00:00 +1300"},"unlisted":false,"prevItem":{"title":"Microsoft Ignite NZ 2016! What a blast!","permalink":"/2016/10/29/microsoft-ignite-nz-2016-what-a-blast"},"nextItem":{"title":"Using PowerShell to set up Automatic Login on Windows Servers","permalink":"/2016/04/30/using-powershell-setup-automatic-logon-windows-servers"}}')}}]);