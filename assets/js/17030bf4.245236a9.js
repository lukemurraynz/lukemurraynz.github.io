"use strict";(self.webpackChunklukemurraynz=self.webpackChunklukemurraynz||[]).push([[15956],{44936:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>t,metadata:()=>i,toc:()=>c});var s=o(74848),r=o(28453);const t={title:"Capturing Windows boot performance with the Windows Performance Toolkit",image:"/wp-content/uploads/2016/12/122816_0751_Howtocaptur5.png",tags:["Windows"],date:"2016-12-28 00:00:00 +1300",slug:"win/capturing-windows-boot-performance-windows-performance-toolkit"},a=void 0,i={permalink:"/win/capturing-windows-boot-performance-windows-performance-toolkit",source:"@site/blog/2016-12-28-capturing-windows-boot-performance-windows-performance-toolkit.md",title:"Capturing Windows boot performance with the Windows Performance Toolkit",description:"The Windows Performance Toolkit, developed by Microsoft has 3 separate tools and are key to solving a lot of boot and general performance issues:",date:"2016-12-28T00:00:00.000Z",tags:[{inline:!0,label:"Windows",permalink:"/tags/windows"}],readingTime:2.84,hasTruncateMarker:!1,authors:[],frontMatter:{title:"Capturing Windows boot performance with the Windows Performance Toolkit",image:"/wp-content/uploads/2016/12/122816_0751_Howtocaptur5.png",tags:["Windows"],date:"2016-12-28 00:00:00 +1300",slug:"win/capturing-windows-boot-performance-windows-performance-toolkit"},unlisted:!1,prevItem:{title:"Stuck at a Black Screen and Connecting on a vCloud console",permalink:"/2017/01/01/stuck-black-screen-connecting-vcloud-console"},nextItem:{title:"Database error when making changes to DHCP reservations",permalink:"/2016/12/28/database-error-making-changes-dhcp-reservations"}},l={authorsImageUrls:[]},c=[{value:'<span id="Download_Windows_Performance_Toolkit">Download Windows Performance Toolkit</span>',id:"download-windows-performance-toolkit",level:3},{value:'<span id="Run_Windows_Performance_Recorder">Run Windows Performance Recorder</span>',id:"run-windows-performance-recorder",level:3},{value:'<span id="Run_Windows_Performance_Analyzer">Run Windows Performance Analyzer</span>',id:"run-windows-performance-analyzer",level:3},{value:'<span id="Useful_resources">Useful resources</span>',id:"useful-resources",level:3}];function d(e){const n={a:"a",div:"div",em:"em",h3:"h3",img:"img",li:"li",p:"p",span:"span",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"The Windows Performance Toolkit, developed by Microsoft has 3 separate tools and are key to solving a lot of boot and general performance issues:"}),"\n",(0,s.jsx)(n.p,{children:"\u2022\xa0\xa0\xa0\xa0Windows Performance Recorder"}),"\n",(0,s.jsx)(n.p,{children:"\u2022\xa0\xa0\xa0\xa0Windows Performance Analyzer"}),"\n",(0,s.jsx)(n.p,{children:"\u2022\xa0\xa0\xa0\xa0Xperf"}),"\n",(0,s.jsxs)(n.div,{id:"toc_container",className:"no_bullets",children:["\n  ",(0,s.jsx)(n.p,{className:"toc_title",children:"\n    Table of Contents\n  "}),"\n  ",(0,s.jsxs)(n.ul,{className:"toc_list",children:["\n    ",(0,s.jsxs)(n.li,{children:["\n      ",(0,s.jsxs)(n.a,{href:"#Download_Windows_Performance_Toolkit",children:[(0,s.jsx)(n.span,{className:"toc_number toc_depth_1",children:"1"})," Download Windows Performance Toolkit"]}),"\n    "]}),"\n    ",(0,s.jsxs)(n.li,{children:["\n      ",(0,s.jsxs)(n.a,{href:"#Run_Windows_Performance_Recorder",children:[(0,s.jsx)(n.span,{className:"toc_number toc_depth_1",children:"2"})," Run Windows Performance Recorder"]}),"\n    "]}),"\n    ",(0,s.jsxs)(n.li,{children:["\n      ",(0,s.jsxs)(n.a,{href:"#Run_Windows_Performance_Analyzer",children:[(0,s.jsx)(n.span,{className:"toc_number toc_depth_1",children:"3"})," Run Windows Performance Analyzer"]}),"\n    "]}),"\n    ",(0,s.jsxs)(n.li,{children:["\n      ",(0,s.jsxs)(n.a,{href:"#Useful_resources",children:[(0,s.jsx)(n.span,{className:"toc_number toc_depth_1",children:"4"})," Useful resources"]}),"\n    "]}),"\n  "]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"download-windows-performance-toolkit",children:(0,s.jsx)(n.span,{id:"Download_Windows_Performance_Toolkit",children:"Download Windows Performance Toolkit"})}),"\n",(0,s.jsx)(n.p,{children:"This can be downloaded by going to the Microsoft website and looking for the latest Windows Assessment and Deployment Toolkit for the operating system you want to analyze \u2013 for example: Windows 10"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://developer.microsoft.com/en-us/windows/hardware/windows-assessment-deployment-kit",target:"_blank"}),(0,s.jsx)(n.a,{href:"https://developer.microsoft.com/en-us/windows/hardware/windows-assessment-deployment-kit",children:"https://developer.microsoft.com/en-us/windows/hardware/windows-assessment-deployment-kit"})]}),"\n",(0,s.jsx)(n.p,{children:"Download and run, we only need the Windows Performance Toolkit portion of the ADK:"}),"\n",(0,s.jsx)(n.img,{className:"alignnone",src:"https://i2.wp.com/luke.geek.nz/wp-content/uploads/2016/12/122816_0751_Howtocaptur1.png?resize=697%2C404&ssl=1",alt:"Windows Performance Toolkit",width:"697",height:"404","data-recalc-dims":"1"}),"\n",(0,s.jsx)(n.p,{children:"Once installed navigate to: C:\\Program Files (x86)\\Windows Kits\\10\\Windows Performance Toolkit"}),"\n",(0,s.jsx)(n.p,{children:"Tip: You can copy the Redistributables folder if you need to install the Windows Performance Toolkit only on another computer."}),"\n",(0,s.jsx)(n.h3,{id:"run-windows-performance-recorder",children:(0,s.jsx)(n.span,{id:"Run_Windows_Performance_Recorder",children:"Run Windows Performance Recorder"})}),"\n",(0,s.jsx)(n.p,{children:"We only need too: WPRUI.EXE \u2013 Windows Performance Recorder & WPA.EXE \u2013 Windows Performance Analyzer."}),"\n",(0,s.jsx)(n.img,{src:"https://i0.wp.com/luke.geek.nz/wp-content/uploads/2016/12/122816_0751_Howtocaptur2.png?w=1500&ssl=1",alt:"","data-recalc-dims":"1"}),"\n",(0,s.jsx)(n.p,{children:"Run WPRUI to launch Windows Performance Recorder"}),"\n",(0,s.jsx)(n.p,{children:"Change the Performance Scenario to Boot, and File"}),"\n",(0,s.jsx)(n.p,{children:"Select Resource Analysis and click CPU usage"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Tip: You can add more: File I/O, Networking I/O, GPU usage etc if you know what in particular may be causing your boot slowness, the more you add the more data and complexity is added. I would recommend to only add additional resource analytics when required."})}),"\n",(0,s.jsx)(n.img,{className:"alignnone",src:"https://i0.wp.com/luke.geek.nz/wp-content/uploads/2016/12/122816_0751_Howtocaptur3.png?resize=659%2C518&ssl=1",alt:"Windows Performance Recorder",width:"659",height:"518","data-recalc-dims":"1"}),"\n",(0,s.jsx)(n.p,{children:"Click Start to select where your boot traces will go and click Ok to start your boot traces, this will restart your computer 3 times."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Tip: If you need to login, please make sure you login quickly during each trace as the longer you leave it unattended the more data and delay it will collect."})}),"\n",(0,s.jsx)(n.h3,{id:"run-windows-performance-analyzer",children:(0,s.jsx)(n.span,{id:"Run_Windows_Performance_Analyzer",children:"Run Windows Performance Analyzer"})}),"\n",(0,s.jsx)(n.p,{children:"Once the computer has been restarted 3 times and your traces have been complete navigate back to: C:\\Program Files (x86)\\Windows Kits\\10\\Windows Performance Toolkit and click on WPR.EXE to open the Windows Performance Analyzer or click Open in WPA from the Windows Performance Recorder dialog."}),"\n",(0,s.jsx)(n.p,{children:"The Windows Performance Analyzer will be our canvas in analyzing issues, you can expand areas like System Activity to dig into Processes, Services. Just drag the data onto the Analysis screen to go through it"}),"\n",(0,s.jsx)(n.img,{src:"https://i1.wp.com/luke.geek.nz/wp-content/uploads/2016/12/122816_0751_Howtocaptur4.png?w=1500&ssl=1",alt:"","data-recalc-dims":"1"}),"\n",(0,s.jsx)(n.p,{children:"From here you can drill down into the data to find the cause or improvements for your login time, from here I can see one of the delays of my system is the CortanaUI."}),"\n",(0,s.jsx)(n.p,{children:"I am running this on a 16GB i7 4GHZ machine running on an SSD so it isn\u2019t really a good example, but have used this in the past to work out that my login was slow because Lync had logging turned on."}),"\n",(0,s.jsx)(n.img,{src:"https://i0.wp.com/luke.geek.nz/wp-content/uploads/2016/12/122816_0751_Howtocaptur5.png?w=1500&ssl=1",alt:"","data-recalc-dims":"1"}),"\n",(0,s.jsx)(n.p,{children:"Hopefully this gets you through the first steps in diagnosis and resolving your performance issues."}),"\n",(0,s.jsx)(n.h3,{id:"useful-resources",children:(0,s.jsx)(n.span,{id:"Useful_resources",children:"Useful resources"})}),"\n",(0,s.jsxs)(n.p,{children:["Troubleshooting Windows Internals when unexpected events happen \u2013 ",(0,s.jsx)(n.a,{href:"https://channel9.msdn.com/events/Ignite/New-Zealand-2016/M405",target:"_blank"}),(0,s.jsx)(n.a,{href:"https://channel9.msdn.com/events/Ignite/New-Zealand-2016/M405",children:"https://channel9.msdn.com/events/Ignite/New-Zealand-2016/M405"})]}),"\n",(0,s.jsxs)(n.p,{children:["Investigating website performance with Windows Performance Toolkit \u2013 ",(0,s.jsx)(n.a,{href:"https://github.com/MicrosoftEdge/MicrosoftEdge-Documentation/tree/master/performance-analysis/windows-performance-toolkit",target:"_blank"}),(0,s.jsx)(n.a,{href:"https://github.com/MicrosoftEdge/MicrosoftEdge-Documentation/tree/master/performance-analysis/windows-performance-toolkit",children:"https://github.com/MicrosoftEdge/MicrosoftEdge-Documentation/tree/master/performance-analysis/windows-performance-toolkit"})]}),"\n",(0,s.jsxs)(n.p,{children:["Slow Boot Slow Logon (SBSL), A Tool Called XPerf and Links You Need To Read \u2013 ",(0,s.jsx)(n.a,{href:"https://blogs.technet.microsoft.com/askpfeplat/2012/06/09/slow-boot-slow-logon-sbsl-a-tool-called-xperf-and-links-you-need-to-read/",target:"_blank"}),(0,s.jsx)(n.a,{href:"https://blogs.technet.microsoft.com/askpfeplat/2012/06/09/slow-boot-slow-logon-sbsl-a-tool-called-xperf-and-links-you-need-to-read/",children:"https://blogs.technet.microsoft.com/askpfeplat/2012/06/09/slow-boot-slow-logon-sbsl-a-tool-called-xperf-and-links-you-need-to-read/"})]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,o)=>{o.d(n,{R:()=>a,x:()=>i});var s=o(96540);const r={},t=s.createContext(r);function a(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);