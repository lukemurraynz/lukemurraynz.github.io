"use strict";(self.webpackChunklukemurraynz=self.webpackChunklukemurraynz||[]).push([[14649],{8706:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>c});var i=n(33895),r=n(74848),s=n(28453);const a={date:"2022-06-05 00:00:00 +1200",title:"Turn on a Azure Virtual Machine using Azure Automation",authors:["Luke"],tags:["Azure"],toc:!0,header:{teaser:"images/iazure-marketplace-banner.png"},slug:"azure/turn-on-a-azure-virtual-machine-using-azure-automation"},o=void 0,l={authorsImageUrls:[void 0]},c=[{value:"Overview",id:"overview",level:3},{value:"Deploy Start VM Solution",id:"deploy-start-vm-solution",level:3},{value:"Setup Azure Automation Account",id:"setup-azure-automation-account",level:4},{value:"Create Azure Automation Account",id:"create-azure-automation-account",level:5},{value:"Configure System Identity",id:"configure-system-identity",level:5},{value:"Setup Abstract API Key",id:"setup-abstract-api-key",level:5},{value:"Import Runbook",id:"import-runbook",level:5},{value:"Setup Variables",id:"setup-variables",level:5},{value:"Setup Schedule",id:"setup-schedule",level:5},{value:"Configure Tags",id:"configure-tags",level:5}];function d(e){const t={a:"a",code:"code",em:"em",h3:"h3",h4:"h4",h5:"h5",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:["Turning off a Virtual Machine in Microsoft Azure on a schedule can quickly be done using the built-in Shutdown controls in the Virtual Machine blade ",(0,r.jsx)(t.em,{children:"(part of"})," ",(0,r.jsx)(t.a,{href:"https://azure.microsoft.com/en-us/services/lab-services/?WT.mc_id=AZ-MVP-5004796",title:" Azure Lab Services",children:(0,r.jsx)(t.em,{children:"Azure Lab Services"})}),(0,r.jsx)(t.em,{children:", but not a requirement)"}),", but what about starting it?"]}),"\n",(0,r.jsxs)(t.p,{children:["You have a few options, Logic Apps, PowerShell, Functions and Runbooks; most of the time, these will run on a standard 7 AM to 5 PM Monday to Friday schedule ",(0,r.jsx)(t.em,{children:"(meaning the Virtual Machine is off during off-peak hours and weekends, reducing compute cost)"}),"."]}),"\n",(0,r.jsx)(t.p,{children:"This works fine for most scenarios, but what happens if a Bank or Public Holiday falls during the week? With the normal schedule, your Virtual Machine starts."}),"\n",(0,r.jsx)(t.p,{children:"Because all your users are on Holiday, it wastes money while you and your users drink snicker cocktails at the beach?"}),"\n",(0,r.jsxs)(t.p,{children:["This is where using a third party timezone API like '",(0,r.jsx)(t.a,{href:"https://www.abstractapi.com/",title:"Automate routine dev work with Abstract's suite of APIs",children:"AbstractApi"}),"' comes in handy; incorporating a lookup to check if it's a Public Holiday before starting that Virtual Machine can help reduce unnecessary costs."]}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.a,{href:"https://azure.microsoft.com/en-us/overview/what-is-a-virtual-machine/?WT.mc_id=AZ-MVP-5004796#overview",title:" What is a virtual machine (VM)?",children:"Virtual Machines"})," in Microsoft Azure have different states and, depending on what state the Virtual Machine is in, will determine whether you get billed or not ",(0,r.jsx)(t.em,{children:"(for the Compute, storage and network adapters are still billed)"}),"."]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Power state"}),(0,r.jsx)(t.th,{children:"Description"}),(0,r.jsx)(t.th,{children:"Billing"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Starting"}),(0,r.jsx)(t.td,{children:"Virtual Machine is powering up."}),(0,r.jsx)(t.td,{children:"Billed"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Running"}),(0,r.jsx)(t.td,{children:"Virtual Machine is fully up. This is the standard working state."}),(0,r.jsx)(t.td,{children:"Billed"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Stopping"}),(0,r.jsx)(t.td,{children:"This is a transitional state between running and stopped."}),(0,r.jsx)(t.td,{children:"Billed"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Stopped"}),(0,r.jsx)(t.td,{children:"The Virtual Machine is allocated on a host but not running. Also called PoweredOff state or Stopped (Allocated). This can be result of invoking the PowerOff API operation or invoking shutdown from within the guest OS. The Stopped state may also be observed briefly during VM creation or while starting a VM from Deallocated state."}),(0,r.jsx)(t.td,{children:"Billed"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Deallocating"}),(0,r.jsx)(t.td,{children:"This is the transitional state between running and deallocated."}),(0,r.jsx)(t.td,{children:"Not billed"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Deallocated"}),(0,r.jsx)(t.td,{children:"The Virtual Machine has released the lease on the underlying hardware and is completely powered off. This state is also referred to as Stopped (Deallocated)."}),(0,r.jsx)(t.td,{children:"Not billed"})]})]})]}),"\n",(0,r.jsx)(t.p,{children:"I have written a base runbook that does precisely that, every time the runbook runs, it checks if it is a public Holiday. If it is - then the Virtual Machine isn't started; if it isn't, then the virtual machine is started."}),"\n",(0,r.jsx)(t.h3,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(t.p,{children:"Today, we are going to set up an Azure Automation runbook, triggered by a scheduled will go through the following steps:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["On a schedule ",(0,r.jsx)(t.em,{children:"(7 AM, it will trigger an Azure Automation runbook)"})]}),"\n",(0,r.jsx)(t.li,{children:"The Azure Automation runbook will do a lookup to an external API, in this case, AbstractApi."}),"\n",(0,r.jsx)(t.li,{children:"The runbook will check the date and detect if it falls on a Public Holiday; if it is a Public Holiday, it will exit the Azure Automation runbook; if it is a standard workday, it will start the Virtual Machine."}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"To do this, we need a few resources."}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"https://learn.microsoft.com/en-us/azure/automation/overview?WT.mc_id=AZ-MVP-5004796",title:"What is Azure Automation?",children:"Azure Automation"})," Account"]}),"\n",(0,r.jsxs)(t.li,{children:["Azure Automation ",(0,r.jsx)(t.a,{href:"https://learn.microsoft.com/en-us/azure/automation/automation-runbook-types?WT.mc_id=AZ-MVP-5004796",title:"Azure Automation runbook types",children:"runbook"})," ",(0,r.jsx)(t.em,{children:"(I will supply a PowerShell runbook below)"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.a,{href:"https://www.abstractapi.com/",title:"Automate routine dev work with Abstract's suite of APIs",children:"AbstractAPI "})," API Key"]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"And, of course, 'Contributor' rights to the Microsoft Azure subscription to create the resources and the schedule, along with setting up the System Managed identity to grant the Azure Automation account access to start the Virtual Machine."}),"\n",(0,r.jsx)(t.p,{children:"We will set up this from scratch using the Azure Portal and use an already created PowerShell Azure Automation runbook."}),"\n",(0,r.jsx)(t.h3,{id:"deploy-start-vm-solution",children:"Deploy Start VM Solution"}),"\n",(0,r.jsx)(t.h4,{id:"setup-azure-automation-account",children:"Setup Azure Automation Account"}),"\n",(0,r.jsx)(t.h5,{id:"create-azure-automation-account",children:"Create Azure Automation Account"}),"\n",(0,r.jsxs)(t.p,{children:["First, we need an ",(0,r.jsx)(t.a,{href:"https://learn.microsoft.com/en-us/azure/automation/automation-create-standalone-account?tabs=azureportal&WT.mc_id=AZ-MVP-5004796",title:"Create a standalone Azure Automation account",children:"Azure Automation"})," resource."]}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["Log into the ",(0,r.jsx)(t.a,{href:"https://portal.azure.com/#home",title:"Microsoft Azure Portal",children:(0,r.jsx)(t.strong,{children:"Microsoft Azure Portal"})}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["Click ",(0,r.jsx)(t.strong,{children:"+ Create a resource."})]}),"\n",(0,r.jsxs)(t.li,{children:["Type in ",(0,r.jsx)(t.strong,{children:"automation"})]}),"\n",(0,r.jsxs)(t.li,{children:["Select ",(0,r.jsx)(t.strong,{children:"Create"})," under Automation, and select ",(0,r.jsx)(t.strong,{children:"Automation."})]}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.img,{alt:"Create Azure Automation Account",src:n(83996).A+"",title:"Create Azure Automation Account",width:"426",height:"573"})}),"\n",(0,r.jsxs)(t.li,{children:["Select your ",(0,r.jsx)(t.strong,{children:"subscription"})]}),"\n",(0,r.jsxs)(t.li,{children:["Select your ",(0,r.jsx)(t.strong,{children:"Resource Group"})," or Create one if you don't already have one ",(0,r.jsx)(t.em,{children:"(I recommend placing your automation resources in an Azure Management or Automation resource group, this will also contain your Runbooks)"})]}),"\n",(0,r.jsxs)(t.li,{children:["Select your ",(0,r.jsx)(t.strong,{children:"region"})]}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.img,{alt:"Create Azure Automation Account",src:n(94004).A+"",title:"Create Azure Automation Account",width:"749",height:"479"})}),"\n",(0,r.jsxs)(t.li,{children:["Select ",(0,r.jsx)(t.strong,{children:"Next"})]}),"\n",(0,r.jsxs)(t.li,{children:["Make sure: ",(0,r.jsx)(t.strong,{children:"System assigned"})," is selected for Managed identities ",(0,r.jsx)(t.em,{children:"(this will be required for giving your automation account permissions to deallocate your Virtual Machine, but it can be enabled later if you already have an Azure Automation account)"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["Click ",(0,r.jsx)(t.strong,{children:"Next"})]}),"\n",(0,r.jsxs)(t.li,{children:["Leave Network connectivity as default (",(0,r.jsx)(t.strong,{children:"Public access"}),")"]}),"\n",(0,r.jsxs)(t.li,{children:["Click ",(0,r.jsx)(t.strong,{children:"Next"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Enter"})," in appropriate ",(0,r.jsx)(t.strong,{children:"tags"})]}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.img,{alt:"Create Azure Automation Account",src:n(58438).A+"",title:"Create Azure Automation Account",width:"753",height:"524"})}),"\n",(0,r.jsxs)(t.li,{children:["Click ",(0,r.jsx)(t.strong,{children:"Review + Create"})]}),"\n",(0,r.jsxs)(t.li,{children:["After validation has passed, select ",(0,r.jsx)(t.strong,{children:"Create"})]}),"\n"]}),"\n",(0,r.jsx)(t.h5,{id:"configure-system-identity",children:"Configure System Identity"}),"\n",(0,r.jsx)(t.p,{children:"Now that we have our Azure Automation account, its time to set up the System Managed Identity and grant it the following roles:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Virtual Machine Contributor ",(0,r.jsx)(t.em,{children:"(to deallocate the Virtual Machine)"})]}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"You can set up a custom role to be least privileged and use that instead. But in this article, we will stick to the built-in roles."}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["Log into the ",(0,r.jsx)(t.a,{href:"https://portal.azure.com/#home",title:"Microsoft Azure Portal",children:(0,r.jsx)(t.strong,{children:"Microsoft Azure Portal"})}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["Navigate to your Azure ",(0,r.jsx)(t.strong,{children:"Automation account"})]}),"\n",(0,r.jsxs)(t.li,{children:["Click on: ",(0,r.jsx)(t.strong,{children:"Identity"})]}),"\n",(0,r.jsxs)(t.li,{children:["Make sure that the ",(0,r.jsx)(t.strong,{children:"System assigned"})," toggle is: ",(0,r.jsx)(t.strong,{children:"On"})," and click ",(0,r.jsx)(t.strong,{children:"Azure role assignments."})]}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.img,{alt:"Azure Automation Account managed identity",src:n(6735).A+"",title:"Azure Automation Account managed identity",width:"773",height:"706"})}),"\n",(0,r.jsxs)(t.li,{children:["Click ",(0,r.jsx)(t.strong,{children:"+ Add role assignments"})]}),"\n",(0,r.jsxs)(t.li,{children:["Select the ",(0,r.jsx)(t.strong,{children:"Subscription"})," ",(0,r.jsx)(t.em,{children:"(make sure this subscription matches the same subscription your Virtual Machines are in)"})]}),"\n",(0,r.jsxs)(t.li,{children:["Select Role: ",(0,r.jsx)(t.strong,{children:"Virtual Machine Contributor"})]}),"\n",(0,r.jsxs)(t.li,{children:["Click ",(0,r.jsx)(t.strong,{children:"Save"})]}),"\n",(0,r.jsxs)(t.li,{children:["Click ",(0,r.jsx)(t.strong,{children:"Refresh"})," ",(0,r.jsx)(t.em,{children:"(it may take a few seconds to update the Portal, so if it is blank - give it 10 seconds and try again)"}),"."]}),"\n",(0,r.jsx)(t.li,{children:"You have now set up the System Managed identity and granted it the roles necessary to execute the automation."}),"\n"]}),"\n",(0,r.jsx)(t.h5,{id:"setup-abstract-api-key",children:"Setup Abstract API Key"}),"\n",(0,r.jsx)(t.p,{children:"Now we need to create an API key, which will be used in the runbook to start the Virtual Machine, the API key will allow connections to the Abstract API to retrieve public Holliday information."}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["Create an ",(0,r.jsx)(t.a,{href:"https://www.abstractapi.com/",title:"Abstract API",children:(0,r.jsx)(t.strong,{children:"Abstract API"})})," account"]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Log in"})," to the newly created account"]}),"\n",(0,r.jsxs)(t.li,{children:["On the left-hand navigation bar, click on ",(0,r.jsx)(t.strong,{children:"Holidays"})]}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.img,{src:n(42881).A+"",width:"244",height:"441"})}),"\n",(0,r.jsxs)(t.li,{children:["Click on '",(0,r.jsx)(t.strong,{children:"Try it out"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Copy"})," the ",(0,r.jsx)(t.strong,{children:"API key"})]}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.img,{alt:"Abstract API - API Key",src:n(45210).A+"",title:"Abstract API - API Key",width:"1070",height:"777"})}),"\n",(0,r.jsx)(t.li,{children:"Copy the API key, as we will need it for the next steps."}),"\n"]}),"\n",(0,r.jsx)(t.h5,{id:"import-runbook",children:"Import Runbook"}),"\n",(0,r.jsx)(t.p,{children:"Now that the modules have been imported into your Azure Automation account, it is time to import the Azure Automation runbook."}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["Log into the ",(0,r.jsx)(t.a,{href:"https://portal.azure.com/#home",title:"Microsoft Azure Portal",children:(0,r.jsx)(t.strong,{children:"Microsoft Azure Portal"})}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["Navigate to your Azure ",(0,r.jsx)(t.strong,{children:"Automation account"})]}),"\n",(0,r.jsxs)(t.li,{children:["Click on ",(0,r.jsx)(t.strong,{children:"Runbooks"})]}),"\n",(0,r.jsxs)(t.li,{children:["Click ",(0,r.jsx)(t.strong,{children:"+ Create a runbook"})]}),"\n",(0,r.jsxs)(t.li,{children:["Specify a ",(0,r.jsx)(t.strong,{children:"name"})," ",(0,r.jsx)(t.em,{children:"(i.e. Start-AzureVirtualMachine)"})]}),"\n",(0,r.jsxs)(t.li,{children:["Select Runbook type of ",(0,r.jsx)(t.strong,{children:"PowerShell"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["A select Runtime version of: ",(0,r.jsx)(t.strong,{children:"5.1"})," ",(0,r.jsx)(t.em,{children:"(7.1 works as well)."})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["Type in a ",(0,r.jsx)(t.strong,{children:"Description"})," that explains the runbook ",(0,r.jsx)(t.em,{children:"(this isn't mandatory, but like Tags is recommended, this is an opportunity to indicate to others what it is for and who set it up)"})]}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.img,{src:n(2499).A+"",width:"733",height:"457"})}),"\n",(0,r.jsxs)(t.li,{children:["Click ",(0,r.jsx)(t.strong,{children:"Create"})]}),"\n",(0,r.jsx)(t.li,{children:"Now you will be greeted with a blank edit pane; paste in the Runbook from below:"}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-powershell",metastring:'title="Start-AzureVirtualMachine.ps1"',children:"#requires -Version 3.0 -Modules Az.Accounts, Az.Resources\n<#\n    .SYNOPSIS\n    PowerShell Azure Automation Runbook for Starting/Stopping Virtual Machines. \n    .AUTHOR\n    Luke Murray (https://github.com/lukemurraynz/)\n    .VERSION\n    1.0 - 28/04/22 - script versioned to '1.0'.\n    .DESCRIPTION\n    1. The script first checks if today is a holiday by making a call to the Abstract API.\n    The Abstract API returns a JSON object containing the holiday name and (optional) description.\n    The script checks if the name property is null. If it is not null, the script displays a message indicating that today is a holiday.\n    If the name property is null, the script displays a message indicating that today is not a holiday.\n    2. The script then checks if the virtual machine is running or not. If it is running, the script will stop the virtual machine.\n    If it is not running, the script will start the virtual machine, depending on the Shutdown tag value\n#>\n\nParam(\n  [Parameter(Mandatory = $true)]\n  [String]\n  $TagName,\n  [Parameter(Mandatory = $true)]\n     \n  [String]\n  $TagValue,\n  [Parameter(Mandatory = $true)]\n  [Boolean]\n  $Shutdown\n)\n\n$CountryCode = 'NZ'\n\n$tDate =(Get-Date).ToUniversalTime()\n$tz = [System.TimeZoneInfo]::FindSystemTimeZoneById(\"New Zealand Standard Time\")\n$Date  = [System.TimeZoneInfo]::ConvertTimeFromUtc($tDate, $tz)\n\n\n$API = Get-AutomationVariable -Name AbstractApiKey\n$Holiday = Invoke-WebRequest -Uri ('https://holidays.abstractapi.com/v1/?api_key={0}&country={1}&year={2}&month={3}&day={4}' -f $API, $CountryCode, $Date.Year, $Date.Month, $Date.Day)\n\n$Holidays = $Holiday.Content\n$Holidays = $Holidays | ConvertFrom-Json\n\nIF ($null -ne $Holidays.name) \n{\n  Write-Output -InputObject (\"Today is a holiday. The Holiday today is: {0}. The Azure Virtual Machine won't be started.\" -f $Holidays.name)\n}\nELSE \n{\n  Write-Output -Message 'No holiday today. The Virtual Machine will be started.'\n\n  # Ensures you do not inherit an AzContext in your runbook\n  Disable-AzContextAutosave -Scope Process\n  # Connect to Azure with system-assigned managed identity (Azure Automation account, which has been given VM Start permissions)\n  $AzureContext = (Connect-AzAccount -Identity).context\n  Write-Output -InputObject $AzureContext\n  # set and store context\n  $AzureContext = Set-AzContext -SubscriptionName $AzureContext.Subscription -DefaultProfile $AzureContext\n  Write-Output -InputObject $AzureContext\n\n  $vms = Get-AzResource -TagName $TagName -TagValue $TagValue | Where-Object -FilterScript {\n    $_.ResourceType -like 'Microsoft.Compute/virtualMachines' \n  }\n\n  Foreach ($vm in $vms) \n  {\n    if ($Shutdown -eq $true) \n    {\n      Write-Output -InputObject \"Stopping $($vm.Name)\"        \n      Stop-AzVM -Name $vm.Name -ResourceGroupName $vm.ResourceGroupName -Force\n    }\n    else \n    {\n      Write-Output -InputObject \"Starting $($vm.Name)\"        \n      Start-AzVM -Name $vm.Name -ResourceGroupName $vm.ResourceGroupName\n    }\n  }\n}\n"})}),"\n",(0,r.jsxs)(t.ol,{start:"12",children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Change"})," the ",(0,r.jsx)(t.strong,{children:"country code"})," to align with your own country. You can use the IP ",(0,r.jsx)(t.a,{href:"https://app.abstractapi.com/api/ip-geolocation/tester",title:"IP geolocation API",children:"geolocation API"})," in Abstract API to do a live test, which will give you your country code. Feel free to amend the Write-Output messages to make sense for your environment."]}),"\n",(0,r.jsxs)(t.li,{children:["Click ",(0,r.jsx)(t.strong,{children:"Save"})]}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.img,{alt:"Azure Runbook - PowerShell",src:n(11353).A+"",title:"Azure Runbook - PowerShell",width:"784",height:"690"})}),"\n",(0,r.jsxs)(t.li,{children:["Click ",(0,r.jsx)(t.strong,{children:"Publish"})," ",(0,r.jsx)(t.em,{children:"(so the runbook is actually in production and can be used)"})]}),"\n",(0,r.jsx)(t.li,{children:"You can select View or Edit at any stage, but you have now imported the Azure Automation runbook!"}),"\n"]}),"\n",(0,r.jsx)(t.h5,{id:"setup-variables",children:"Setup Variables"}),"\n",(0,r.jsx)(t.p,{children:"Now that the Azure runbook has been imported, we need to set up the variables, which include the API key."}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["Log into the ",(0,r.jsx)(t.a,{href:"https://portal.azure.com/#home",title:"Microsoft Azure Portal",children:(0,r.jsx)(t.strong,{children:"Microsoft Azure Portal"})}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["Navigate to your Azure ",(0,r.jsx)(t.strong,{children:"Automation account"})]}),"\n",(0,r.jsxs)(t.li,{children:["Click ",(0,r.jsx)(t.strong,{children:"Variables"})]}),"\n",(0,r.jsxs)(t.li,{children:["Click ",(0,r.jsx)(t.strong,{children:"+ Add a variable"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Create"})," a Variable named: ",(0,r.jsx)(t.strong,{children:"AbstractApiKey"})," ",(0,r.jsx)(t.em,{children:"(this needs to match the variable name as part of the 'Get-AutomationVariable' cmdlet)"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["Enter in a ",(0,r.jsx)(t.strong,{children:"description"})]}),"\n",(0,r.jsxs)(t.li,{children:["Select ",(0,r.jsx)(t.strong,{children:"String"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Enter"})," in the ",(0,r.jsx)(t.strong,{children:"API"})," key you retrieved earlier from Abstract API."]}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.img,{alt:"Azure Automation - Variables",src:n(70445).A+"",width:"566",height:"605"})}),"\n",(0,r.jsxs)(t.li,{children:["Click ",(0,r.jsx)(t.strong,{children:"Save"})]}),"\n"]}),"\n",(0,r.jsx)(t.h5,{id:"setup-schedule",children:"Setup Schedule"}),"\n",(0,r.jsx)(t.p,{children:"Now that the variables have been set up, we need to set up the schedule. This is the schedule that will be used to start the Virtual Machine. In the example below we are going to use a Standard Monday -> Friday work week, but adjust the time and date for when you need to start the virtual machine up."}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["Log into the ",(0,r.jsx)(t.a,{href:"https://portal.azure.com/#home",title:"Microsoft Azure Portal",children:(0,r.jsx)(t.strong,{children:"Microsoft Azure Portal"})}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["Navigate to your Azure ",(0,r.jsx)(t.strong,{children:"Automation account"})]}),"\n",(0,r.jsxs)(t.li,{children:["Click ",(0,r.jsx)(t.strong,{children:"Schedule"})]}),"\n",(0,r.jsxs)(t.li,{children:["Click ",(0,r.jsx)(t.strong,{children:"+ Add a schedule"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Type"})," in a ",(0,r.jsx)(t.strong,{children:"name"})," for the ",(0,r.jsx)(t.strong,{children:"schedule"})," ",(0,r.jsx)(t.em,{children:"(ie Azure Virtual Machine - Start)"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["Type in a ",(0,r.jsx)(t.strong,{children:"Description"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Select"})," the ",(0,r.jsx)(t.strong,{children:"Start Date"})," to match when you want to start the Schedule ",(0,r.jsx)(t.em,{children:"(ie first Monday of the week)"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Select"})," your ",(0,r.jsx)(t.strong,{children:"Timezone"}),", so that the script runs on the right time/date which makes your timezone."]}),"\n",(0,r.jsxs)(t.li,{children:["For Recurrance, specify: ",(0,r.jsx)(t.strong,{children:"Recurring"})]}),"\n",(0,r.jsxs)(t.li,{children:["Set it to Recur every: ",(0,r.jsx)(t.strong,{children:"1 Day"})]}),"\n",(0,r.jsxs)(t.li,{children:["Check ",(0,r.jsx)(t.strong,{children:"Monday"}),", ",(0,r.jsx)(t.strong,{children:"Tuesday"}),", ",(0,r.jsx)(t.strong,{children:"Wednesday"}),", ",(0,r.jsx)(t.strong,{children:"Thursday"}),", and ",(0,r.jsx)(t.strong,{children:"Friday"})]}),"\n",(0,r.jsx)(t.li,{children:"Leave Saturday and Sunday unchecked."}),"\n",(0,r.jsxs)(t.li,{children:["Click ",(0,r.jsx)(t.strong,{children:"Create"})]}),"\n",(0,r.jsx)(t.li,{children:"Now that the Schedule has been created, we need to bind it to a Runbook"}),"\n",(0,r.jsxs)(t.li,{children:["On the Automation account blade, click on ",(0,r.jsx)(t.strong,{children:"Runbooks"})]}),"\n",(0,r.jsx)(t.li,{children:"Click on your 'Start Azure Virtual Machine' runbook"}),"\n",(0,r.jsxs)(t.li,{children:["Select ",(0,r.jsx)(t.strong,{children:"Schedules"})]}),"\n",(0,r.jsxs)(t.li,{children:["Click ",(0,r.jsx)(t.strong,{children:"Add a Schedule"})]}),"\n",(0,r.jsxs)(t.li,{children:["Press: ",(0,r.jsx)(t.strong,{children:"Link a schedule to your runbook"})]}),"\n",(0,r.jsxs)(t.li,{children:["Select ",(0,r.jsx)(t.strong,{children:"your"})," newly created ",(0,r.jsx)(t.strong,{children:"Schedule"})]}),"\n",(0,r.jsxs)(t.li,{children:["For the Tag Name, select ",(0,r.jsx)(t.strong,{children:"Shutdown"})]}),"\n",(0,r.jsxs)(t.li,{children:["For the Tag Value name, Select ",(0,r.jsx)(t.strong,{children:"Yes"})]}),"\n",(0,r.jsxs)(t.li,{children:["For Shutdown, select ",(0,r.jsx)(t.strong,{children:"false"})]}),"\n",(0,r.jsxs)(t.li,{children:["Click ",(0,r.jsx)(t.strong,{children:"Ok"})]}),"\n",(0,r.jsx)(t.li,{children:"Your schedule has now been configured and the runbook will run the next time it matches your scheduled date and time."}),"\n"]}),"\n",(0,r.jsx)(t.h5,{id:"configure-tags",children:"Configure Tags"}),"\n",(0,r.jsx)(t.p,{children:"The runbook is written, so it doesn't need to be adjusted for future machines and making changes on the fly, this relies on each Virtual Machine that you want started to be started using the Runbook to be tagged."}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["Log into the ",(0,r.jsx)(t.a,{href:"https://portal.azure.com/#home",title:"Microsoft Azure Portal",children:(0,r.jsx)(t.strong,{children:"Microsoft Azure Portal"})}),"."]}),"\n",(0,r.jsxs)(t.li,{children:["Navigate to your Azure ",(0,r.jsx)(t.strong,{children:"Virtual Machine"})]}),"\n",(0,r.jsxs)(t.li,{children:["Click ",(0,r.jsx)(t.strong,{children:"Tags"})]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Add the following tag"}),":"]}),"\n"]}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Tag Key"}),(0,r.jsx)(t.th,{children:"Tag Value"})]})}),(0,r.jsx)(t.tbody,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Shutdown"}),(0,r.jsx)(t.td,{children:"Yes"})]})})]}),"\n",(0,r.jsx)(t.p,{children:"Congratulations, the next time your schedule triggers, every runbook with the Shutdown tag will be started, according to your schedule, and workday. If it's a Public Holiday or a Weekend, the Virtual Machine will remain off - saving cost."})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},45210:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/abstractapi_key-c213ebd8ac4b031f65e3b4a98dc2bddd.png"},42881:(e,t,n)=>{n.d(t,{A:()=>i});const i="data:image/png;base64,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"},70445:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/azure-azautomate_variables-c2f7dc12053dd8a54d84af4715988f41.png"},2499:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/azure-createazurerunbook-39ce2398dc02876db33ee67526176902.png"},6735:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/azureportal-automation_managedidentity-46173e0eb415b07c841cfd616266eb7c.jpg"},83996:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/azureportal-create-automation-f17fe5866b2554fab2016911fdae4250.jpg"},94004:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/azureportal-create-automation_basics-1389cb6873b6fc1b5c884f01279f38c4.jpg"},58438:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/azureportal-create-automation_tags-cf8d12ea6a602ac7d4d3019f34458da0.jpg"},11353:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/azurerunbook_publishedsource-f7e6de348d83dd7068cf302b98d22c49.png"},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>o});var i=n(96540);const r={},s=i.createContext(r);function a(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(s.Provider,{value:t},e.children)}},33895:e=>{e.exports=JSON.parse('{"permalink":"/azure/turn-on-a-azure-virtual-machine-using-azure-automation","source":"@site/blog/2022-06-05-turn-on-a-azure-virtual-machine-using-azure-automation.md","title":"Turn on a Azure Virtual Machine using Azure Automation","description":"Turning off a Virtual Machine in Microsoft Azure on a schedule can quickly be done using the built-in Shutdown controls in the Virtual Machine blade (part of Azure Lab Services, but not a requirement)_, but what about starting it?","date":"2022-06-05T00:00:00.000Z","tags":[{"inline":true,"label":"Azure","permalink":"/tags/azure"}],"readingTime":11.22,"hasTruncateMarker":false,"authors":[{"name":"Luke Murray","title":"Author","url":"https://luke.geek.nz","imageURL":"https://luke.geek.nz/img/logo.png","key":"Luke","page":null}],"frontMatter":{"date":"2022-06-05 00:00:00 +1200","title":"Turn on a Azure Virtual Machine using Azure Automation","authors":["Luke"],"tags":["Azure"],"toc":true,"header":{"teaser":"images/iazure-marketplace-banner.png"},"slug":"azure/turn-on-a-azure-virtual-machine-using-azure-automation"},"unlisted":false,"prevItem":{"title":"You don\u2019t have authorization to perform action \'Microsoft.Resources/deployments/validate/action\'","permalink":"/azure/you-don-t-have-authorization-to-perform-action-microsoft.resources-deployments-validate-action"},"nextItem":{"title":"Microsoft Azure Naming Conventions","permalink":"/azure/microsoft-azure-naming-conventions"}}')}}]);