"use strict";(self.webpackChunklukemurraynz=self.webpackChunklukemurraynz||[]).push([[10228],{57275:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>p,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>l});var t=n(74848),i=n(28453);const r={title:"Azure App Gateway Sinkhole for API Management with Terraform",metaDescription:"This article provides a step-by-step guide on setting up an Azure Application Gateway Sinkhole using Terraform.",date:new Date("2024-07-10T05:29:56.620Z"),tags:["Azure"],categories:["Azure"],authors:["Luke"],slug:"azure/application-gateway-apim-sinkhole-terraform",keywords:["azure","application gateway","sinkhole","terraform","apim","apimanagement","iac"],description:"This article provides a step-by-step guide on setting up an Azure Application Gateway Sinkhole using Terraform."},o=void 0,s={permalink:"/azure/application-gateway-apim-sinkhole-terraform",source:"@site/blog/2024-07-10-apim-appgw-sinkhole/index.mdx",title:"Azure App Gateway Sinkhole for API Management with Terraform",description:"This article provides a step-by-step guide on setting up an Azure Application Gateway Sinkhole using Terraform.",date:"2024-07-10T05:29:56.620Z",tags:[{label:"Azure",permalink:"/tags/azure"}],readingTime:3.59,hasTruncateMarker:!0,authors:[{name:"Luke Murray",title:"Author",url:"https://luke.geek.nz",imageURL:"https://luke.geek.nz/img/logo.png",key:"Luke"}],frontMatter:{title:"Azure App Gateway Sinkhole for API Management with Terraform",metaDescription:"This article provides a step-by-step guide on setting up an Azure Application Gateway Sinkhole using Terraform.",date:"2024-07-10T05:29:56.620Z",tags:["Azure"],categories:["Azure"],authors:["Luke"],slug:"azure/application-gateway-apim-sinkhole-terraform",keywords:["azure","application gateway","sinkhole","terraform","apim","apimanagement","iac"],description:"This article provides a step-by-step guide on setting up an Azure Application Gateway Sinkhole using Terraform."},unlisted:!1,prevItem:{title:"Azure Container Apps Environment deployment - Missing Subnet",permalink:"/azure/containerapps-env-missing-subnet"},nextItem:{title:"Running your own Azure Proactive Resiliency Assessment",permalink:"/azure/proactive-resiliency-assessment"}},p={authorsImageUrls:[void 0]},l=[];function c(e){const a={a:"a",code:"code",em:"em",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a.p,{children:["When you use an ",(0,t.jsx)(a.a,{href:"https://learn.microsoft.com/azure/api-management/api-management-key-concepts?WT.mc_id=AZ-MVP-5004796",children:"Azure API Management"})," solution in Internal mode, you may also want to use an ",(0,t.jsx)(a.a,{href:"https://learn.microsoft.com/azure/application-gateway/overview?WT.mc_id=AZ-MVP-5004796",children:"Azure Application Gateway"})," to provide additional security and performance features for external consumers as well and contain a mix of both Internal ",(0,t.jsx)(a.em,{children:"(to your own vnet and private dns)"})," and ",(0,t.jsx)(a.em,{children:"(external, accessed via public DNS)"})," APIs."]}),"\n",(0,t.jsxs)(a.p,{children:[(0,t.jsx)(a.img,{alt:"APIM Management Internal",src:n(9619).A+"",width:"978",height:"559"}),"\n",(0,t.jsxs)(a.em,{children:["(Image courtesy of: ",(0,t.jsx)(a.a,{href:"https://medium.com/@thahif.86/azure-apim-and-application-gateway-integration-9039378ba197",children:"Azure APIM and Application Gateway Integration"}),")"]})]}),"\n",(0,t.jsx)(a.p,{children:"In this scenario, you can use the following paths on your APIs:"}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsxs)(a.li,{children:[(0,t.jsx)(a.strong,{children:"Internal"}),": ",(0,t.jsx)(a.code,{children:"https://apim.yourdomain.com/internal/echo"})]}),"\n",(0,t.jsxs)(a.li,{children:[(0,t.jsx)(a.strong,{children:"External"}),": ",(0,t.jsx)(a.code,{children:"https://apim.yourdomain.com/external/echo"})]}),"\n"]}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.img,{alt:"Azure API Management - EchoAPI",src:n(51387).A+"",width:"950",height:"600"})})]})}function u(e={}){const{wrapper:a}={...(0,i.R)(),...e.components};return a?(0,t.jsx)(a,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},51387:(e,a,n)=>{n.d(a,{A:()=>t});const t=n.p+"assets/images/apim_echoapi_external-e9a34e77e1ef9b48d3912406e4c12552.png"},9619:(e,a,n)=>{n.d(a,{A:()=>t});const t=n.p+"assets/images/apim_internal_appgw-2604fcaed23f9dd476aba5879a864bf1.png"},28453:(e,a,n)=>{n.d(a,{R:()=>o,x:()=>s});var t=n(96540);const i={},r=t.createContext(i);function o(e){const a=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function s(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(r.Provider,{value:a},e.children)}}}]);