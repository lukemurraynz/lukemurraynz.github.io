"use strict";(self.webpackChunklukemurraynz=self.webpackChunklukemurraynz||[]).push([[24403],{72933:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>r,toc:()=>c});var r=n(12128),o=n(74848),s=n(28453);const a={date:"2022-07-10 00:00:00 +1200",title:"Add Custom DNS servers and set Azure Point to Site VPN to Connect automatically",authors:["Luke"],tags:["Azure"],toc:!1,header:{teaser:"images/iazure-marketplace-banner.png"},slug:"azure/add-custom-dns-servers-and-set-azure-point-to-site-vpn-to-connect-automatically"},i=void 0,u={authorsImageUrls:[void 0]},c=[];function l(e){const t={a:"a",alwayson:"alwayson",code:"code",em:"em",li:"li",name:"name",ol:"ol",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.p,{children:"The Azure Point to Site VPN will take the DNS servers from the Virtual Network, that the Gateway is peering into by default, but due to VNET Peering or custom configuration if you may want to point this to custom DNS servers."}),"\n",(0,o.jsx)(t.p,{children:"To do this, you need to edit the 'azurevpnconfig.xml' file and reimport the VPN connection."}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsxs)(t.li,{children:["Open: azurevpnconfig.xml in your favourite editor ",(0,o.jsx)(t.em,{children:"(ie Visual Studio Code or Notepad)"})]}),"\n",(0,o.jsxs)(t.li,{children:["Underneath the ",(0,o.jsxs)(t.name,{children:[" ",(0,o.jsx)(t.em,{children:"(which you can also change, as this is the name that users will see in Windows)"})," add: < clientconfig>."]})]}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"For example:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:"  <name>Luke's Azure Point to Site VPN</name>\n  <clientconfig>\n \x3c!-- need to specify always on = true for the VPN to connect automatically --\x3e \n <AlwaysOn>true</AlwaysOn>\n  \x3c!-- Add custom DNS Servers --\x3e \n           <dnsservers>\n             <dnsserver>10.100.1.1</dnsserver>\n             <dnsserver>10.100.1.2</dnsserver>\n         </dnsservers>\n\x3c!-- Add custom DNS suffixes --\x3e \n          <dnssuffixes>\n          <dnssuffix>.luke.geek.nz</dnssuffix>\n    </dnssuffixes>\n</clientconfig>\n"})}),"\n",(0,o.jsx)(t.p,{children:"Save your azurevpnconfig.xml and import it into the Azure VPN client."}),"\n",(0,o.jsxs)(t.p,{children:["Once the VPN has been re-established your Custom DNS settings and suffxies should take effect.\nIf you included the ",(0,o.jsx)(t.alwayson,{children:" this will reconnect automatically, after your first connection and after computer reboots."})]}),"\n",(0,o.jsxs)(t.p,{children:["If you need assistance setting up a Point to Site VPN, check out my article here: ",(0,o.jsx)(t.a,{href:"https://luke.geek.nz/azure/create-azure-point-to-site-vpn-using-azure-active-directory-authentication/",children:"Create Azure Point to Site VPN using Microsoft Entra ID authentication "})]})]})}function d(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>i});var r=n(96540);const o={},s=r.createContext(o);function a(e){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),r.createElement(s.Provider,{value:t},e.children)}},12128:e=>{e.exports=JSON.parse('{"permalink":"/azure/add-custom-dns-servers-and-set-azure-point-to-site-vpn-to-connect-automatically","source":"@site/blog/2022-07-10-add-custom-dns-servers-and-set-azure-point-to-site-vpn-to-connect-automatically.md","title":"Add Custom DNS servers and set Azure Point to Site VPN to Connect automatically","description":"The Azure Point to Site VPN will take the DNS servers from the Virtual Network, that the Gateway is peering into by default, but due to VNET Peering or custom configuration if you may want to point this to custom DNS servers.","date":"2022-07-10T00:00:00.000Z","tags":[{"inline":true,"label":"Azure","permalink":"/tags/azure"}],"readingTime":1.045,"hasTruncateMarker":false,"authors":[{"name":"Luke Murray","title":"Author","url":"https://luke.geek.nz","imageURL":"https://luke.geek.nz/img/logo.png","key":"Luke","page":null}],"frontMatter":{"date":"2022-07-10 00:00:00 +1200","title":"Add Custom DNS servers and set Azure Point to Site VPN to Connect automatically","authors":["Luke"],"tags":["Azure"],"toc":false,"header":{"teaser":"images/iazure-marketplace-banner.png"},"slug":"azure/add-custom-dns-servers-and-set-azure-point-to-site-vpn-to-connect-automatically"},"unlisted":false,"prevItem":{"title":"Deploy Azure Naming Tool into an Azure WebApp as a container","permalink":"/azure/deploy-azure-naming-tool-into-an-azure-webapp-as-a-container"},"nextItem":{"title":"Migrating resources between regions using Azure Resource Mover","permalink":"/azure/migrating-resources-between-regions-using-azure-resource-mover"}}')}}]);