"use strict";(self.webpackChunklukemurraynz=self.webpackChunklukemurraynz||[]).push([[51345],{72095:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>d,contentTitle:()=>s,default:()=>l,frontMatter:()=>o,metadata:()=>a,toc:()=>c});var a=i(1617),t=i(74848),r=i(28453);const o={title:"Azure Container Apps Configure Planned Maintenance Windows",metaDescription:"Learn how to configure planned maintenance windows for Azure Container Apps using Bicep, minimizing downtime and ensuring application reliability with step-by-step guidance.",tags:["Azure"],categories:["Azure"],authors:["Luke"],slug:"azure/container-apps-planned-maintenance",keywords:["Azure","Azure Container Apps","Planned Maintenance","Bicep","Maintenance Window","Azure DevOps","Cloud Reliability"],description:"Learn how to configure planned maintenance windows for Azure Container Apps using Bicep, minimizing downtime and ensuring application reliability with step-by-step guidance.",date:new Date("2025-06-03T00:52:39.592Z")},s=void 0,d={authorsImageUrls:[void 0]},c=[];function p(n){const e={a:"a",admonition:"admonition",code:"code",img:"img",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.p,{children:["Announced at Microsoft Build 2025, ",(0,t.jsx)(e.a,{href:"https://learn.microsoft.com/azure/container-apps/planned-maintenance?WT.mc_id=AZ-MVP-5004796",children:"Planned maintenance is now generally available in Azure Container Apps"}),". This feature allows you to control when non-critical updates are applied to your Container Apps environment to minimize downtime and impact to applications. Non-critical updates include minor security patches, bug fixes, and new releases."]}),"\n","\n",(0,t.jsxs)(e.admonition,{type:"info",children:[(0,t.jsx)(e.p,{children:"Critical and urgent updates, however, are applied as needed to ensure security and reliability compliance, even outside of planned maintenance windows."}),(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"Update Type"}),(0,t.jsx)(e.th,{children:"Description"}),(0,t.jsx)(e.th,{children:"Timing"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Critical"}),(0,t.jsx)(e.td,{children:"Urgent fixes that include updates essential to the security and stability of your app."}),(0,t.jsx)(e.td,{children:"Anytime \u2013 applied as needed to ensure security and reliability compliance."})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"Noncritical"}),(0,t.jsx)(e.td,{children:"Routine security patches, bug fixes, and the introduction of new features."}),(0,t.jsx)(e.td,{children:"If a planned maintenance window is defined, updates only start during that time span.If a maintenance window isn't configured, updates can be applied at any time."})]})]})]})]}),"\n",(0,t.jsx)(e.p,{children:"Let's take a look at how to configure this feature in your Azure Container Apps environment."}),"\n",(0,t.jsxs)(e.p,{children:["You can use the ",(0,t.jsx)(e.a,{href:"https://learn.microsoft.com/azure/container-apps/planned-maintenance?WT.mc_id=AZ-MVP-5004796#add-a-window",children:"Azure CLI"})," to set up a maintenance window for your Container Apps environment. However, today we will focus on using Bicep."]}),"\n",(0,t.jsx)(e.admonition,{type:"warning",children:(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"You can only have one maintenance window per environment."}),"\n",(0,t.jsx)(e.li,{children:"The minimum duration for a maintenance window is 8 hours."}),"\n",(0,t.jsx)(e.li,{children:"Planned maintenance is an optional, best-effort feature that is ideal for environments with interdependent applications seeking added resiliency. When critical updates are available, Container Apps can apply them outside of the maintenance window to ensure the security and reliability of the platform and your applications."}),"\n",(0,t.jsx)(e.li,{children:"Maintenance windows are available in all container apps and jobs, except when they run on consumption workload profiles."}),"\n"]})}),"\n",(0,t.jsx)(e.p,{children:"In my demo, I have an existing Container Apps environment (a Consumption environment with one Container App), so I will be adding a maintenance window to that. If you are creating a new environment, you can add the maintenance window as part of the environment creation."}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bicep",children:"@maxLength(64)\nparam maintenanceConfigName string = 'default'\n\n@minValue(8)\n@maxValue(24)\nparam durationHours int = 8\n\n@minValue(0)\n@maxValue(23)\nparam startHourUtc int = 2\n\n@allowed([\n  'Monday'\n  'Tuesday'\n  'Wednesday'\n  'Thursday'\n  'Friday'\n  'Saturday'\n  'Sunday'\n])\nparam weekDay string = 'Sunday'\n\n\nresource containerAppEnv 'Microsoft.App/managedEnvironments@2025-02-02-preview' existing = {\n  name: 'cae-gvdzidrs5xh4i'\n}\n\nresource symbolicname 'Microsoft.App/managedEnvironments/maintenanceConfigurations@2025-02-02-preview' = {\n  name: maintenanceConfigName\n  parent: containerAppEnv\n  properties: {\n    scheduledEntries: [\n     {\n        durationHours: durationHours\n        startHourUtc: startHourUtc\n        weekDay: weekDay\n      }\n    ]\n  }\n}\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{alt:"Container Apps maintenanceConfigurations",src:i(99859).A+"",width:"1918",height:"1117"})}),"\n",(0,t.jsx)(e.p,{children:"Once deployed, we can view the maintenance window in the Azure Portal, under the Container Apps environment, in Settings, and under Planned Maintenance."}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{alt:"Container Apps maintenanceConfigurations in Azure Portal",src:i(39656).A+"",width:"1456",height:"603"})}),"\n",(0,t.jsxs)(e.p,{children:["Then, in the ",(0,t.jsx)(e.a,{href:"https://learn.microsoft.com/en-gb/azure/container-apps/planned-maintenance?WT.mc_id=AZ-MVP-5004796#view-maintenance-history",children:"Diagnose and solve problems blade"}),", you can view the configured maintenance window and upgrade events that occurred in the last month."]})]})}function l(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(p,{...n})}):p(n)}},99859:(n,e,i)=>{i.d(e,{A:()=>a});const a=i.p+"assets/images/Capps_MaintWinBicepDeploy-45c3728bbeafa52d520a8e32a23f303b.gif"},39656:(n,e,i)=>{i.d(e,{A:()=>a});const a=i.p+"assets/images/ContainerAppsEnvPlannedMaintenance-7a7cd43990ee16948024e60bafb9ecd3.jpg"},28453:(n,e,i)=>{i.d(e,{R:()=>o,x:()=>s});var a=i(96540);const t={},r=a.createContext(t);function o(n){const e=a.useContext(r);return a.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:o(n.components),a.createElement(r.Provider,{value:e},n.children)}},1617:n=>{n.exports=JSON.parse('{"permalink":"/azure/container-apps-planned-maintenance","source":"@site/blog/2025-06-03-capps-maintenancewindow/index.mdx","title":"Azure Container Apps Configure Planned Maintenance Windows","description":"Learn how to configure planned maintenance windows for Azure Container Apps using Bicep, minimizing downtime and ensuring application reliability with step-by-step guidance.","date":"2025-06-03T00:52:39.592Z","tags":[{"inline":true,"label":"Azure","permalink":"/tags/azure"}],"readingTime":2.4,"hasTruncateMarker":true,"authors":[{"name":"Luke Murray","title":"Author","url":"https://luke.geek.nz","imageURL":"https://luke.geek.nz/img/logo.png","key":"Luke","page":null}],"frontMatter":{"title":"Azure Container Apps Configure Planned Maintenance Windows","metaDescription":"Learn how to configure planned maintenance windows for Azure Container Apps using Bicep, minimizing downtime and ensuring application reliability with step-by-step guidance.","tags":["Azure"],"categories":["Azure"],"authors":["Luke"],"slug":"azure/container-apps-planned-maintenance","keywords":["Azure","Azure Container Apps","Planned Maintenance","Bicep","Maintenance Window","Azure DevOps","Cloud Reliability"],"description":"Learn how to configure planned maintenance windows for Azure Container Apps using Bicep, minimizing downtime and ensuring application reliability with step-by-step guidance.","date":"2025-06-03T00:52:39.592Z"},"unlisted":false,"nextItem":{"title":"Test KAITO Model Completion on AKS with kubectl & curl","permalink":"/azure/aks-kaito-completion"}}')}}]);