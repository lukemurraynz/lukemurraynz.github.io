"use strict";(self.webpackChunklukemurraynz=self.webpackChunklukemurraynz||[]).push([[9079],{58329:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>u,contentTitle:()=>a,default:()=>p,frontMatter:()=>n,metadata:()=>s,toc:()=>c});var i=r(85893),o=r(11151);const n={title:"Authorization Permission Mismatch error with Azure Storage",metaDescription:"Learn how to fix the authorization permission mismatch error when copying files to an Azure Storage account in Azure DevOps pipeline.",description:'Resolve the "AuthorizationPermissionMismatch" error when copying files to Azure Storage in Azure DevOps pipeline.',date:new Date("2024-05-06T08:23:54.576Z"),tags:["Azure"],categories:["Azure"],authors:["Luke"],slug:"azure/authorization-permission-mismatch-error-azure-storage",keywords:["Azure","Authorization Permission Mismatch","Azure Storage","Azure DevOps pipeline","DevOps"]},a=void 0,s={permalink:"/azure/authorization-permission-mismatch-error-azure-storage",source:"@site/blog/2024-05-06-authorizationpermissionmismatchstorage/index.mdx",title:"Authorization Permission Mismatch error with Azure Storage",description:'Resolve the "AuthorizationPermissionMismatch" error when copying files to Azure Storage in Azure DevOps pipeline.',date:"2024-05-06T08:23:54.576Z",tags:[{label:"Azure",permalink:"/tags/azure"}],readingTime:.71,hasTruncateMarker:!0,authors:[{name:"Luke Murray",title:"Author",url:"https://luke.geek.nz",imageURL:"https://luke.geek.nz/img/logo.png",key:"Luke"}],frontMatter:{title:"Authorization Permission Mismatch error with Azure Storage",metaDescription:"Learn how to fix the authorization permission mismatch error when copying files to an Azure Storage account in Azure DevOps pipeline.",description:'Resolve the "AuthorizationPermissionMismatch" error when copying files to Azure Storage in Azure DevOps pipeline.',date:"2024-05-06T08:23:54.576Z",tags:["Azure"],categories:["Azure"],authors:["Luke"],slug:"azure/authorization-permission-mismatch-error-azure-storage",keywords:["Azure","Authorization Permission Mismatch","Azure Storage","Azure DevOps pipeline","DevOps"]},unlisted:!1,nextItem:{title:"Federated Credentials to AKS Managed Identity",permalink:"/azure/federated-credentials-aks"}},u={authorsImageUrls:[void 0]},c=[];function h(e){const t={a:"a",admonition:"admonition",code:"code",p:"p",strong:"strong",...(0,o.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"When attempting to copy files in an Azure DevOps pipeline, to an Azure Storage account, I received the following error:"}),"\n",(0,i.jsx)(t.admonition,{type:"warning",children:(0,i.jsxs)(t.p,{children:["##[error]Upload to container: 'StorageContainer' in storage account: 'ContosoStorageAccount' with blob prefix: '736' failed with error: 'AzCopy.exe exited with non-zero exit code while uploading files to blob storage.' For more info please refer to ",(0,i.jsx)(t.a,{href:"https://aka.ms/azurefilecopyreadme",children:"https://aka.ms/azurefilecopyreadme"}),"."]})}),"\n",(0,i.jsx)(t.p,{children:"After reviewing the Azure DevOps raw pipeline logs I noticed the following:"}),"\n",(0,i.jsx)(t.admonition,{type:"warning",children:(0,i.jsx)(t.p,{children:"2024-05-06T06:25:34.1051117Z --------------------------------------------------------------------------------\n2024-05-06T06:25:34.1052461Z RESPONSE 403: 403 This request is not authorized to perform this operation using this permission.\n2024-05-06T06:25:34.1053291Z ERROR CODE: AuthorizationPermissionMismatch\n2024-05-06T06:25:34.1055333Z --------------------------------------------------------------------------------"})}),"\n",(0,i.jsx)(t.admonition,{type:"tip",children:(0,i.jsx)(t.p,{children:(0,i.jsxs)(t.strong,{children:["The fix, was to make sure that the Service Prinicpal that Azure DevOps is using to read/write to the Azure Storage account, has the correct permissions. In my case, I needed to assign the ",(0,i.jsx)(t.code,{children:"[Storage Blob Data Contributor](https://learn.microsoft.com/azure/role-based-access-control/built-in-roles?WT.mc_id=AZ-MVP-5004796#storage)"})," role to the Service Principal."]})})})]})}function p(e={}){const{wrapper:t}={...(0,o.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},11151:(e,t,r)=>{r.d(t,{Z:()=>s,a:()=>a});var i=r(67294);const o={},n=i.createContext(o);function a(e){const t=i.useContext(n);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),i.createElement(n.Provider,{value:t},e.children)}}}]);