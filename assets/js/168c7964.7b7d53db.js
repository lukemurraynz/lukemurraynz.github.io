"use strict";(self.webpackChunklukemurraynz=self.webpackChunklukemurraynz||[]).push([[75451],{59101:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>l,frontMatter:()=>o,metadata:()=>u,toc:()=>c});var t=i(85893),r=i(11151);const o={title:"Resolving 404 Error with OpenAI Azure Function Binding",metaDescription:"This article provides a guide on troubleshooting a 404 error when querying OpenAI using Azure Function binding in Azure.",date:new Date("2024-04-21T05:06:54.374Z"),tags:["Azure"],categories:["Azure"],authors:["Luke"],header:"AzureFunction_OpenAIBinding_NotFound.png",slug:"azure/404-attempting-query-openai-azure-function-binding",keywords:["azure","function","cloudnative","openai","ExtensionBundle"],description:"Troubleshooting a 404 error when querying OpenAI using Azure Function binding in Azure."},s=void 0,u={permalink:"/azure/404-attempting-query-openai-azure-function-binding",source:"@site/blog/2024-04-21-AzureOpenAI-AzureFunctionBinding/index.mdx",title:"Resolving 404 Error with OpenAI Azure Function Binding",description:"Troubleshooting a 404 error when querying OpenAI using Azure Function binding in Azure.",date:"2024-04-21T05:06:54.374Z",tags:[{label:"Azure",permalink:"/tags/azure"}],readingTime:1.52,hasTruncateMarker:!0,authors:[{name:"Luke Murray",title:"Author",url:"https://luke.geek.nz",imageURL:"https://luke.geek.nz/img/logo.png",key:"Luke"}],frontMatter:{title:"Resolving 404 Error with OpenAI Azure Function Binding",metaDescription:"This article provides a guide on troubleshooting a 404 error when querying OpenAI using Azure Function binding in Azure.",date:"2024-04-21T05:06:54.374Z",tags:["Azure"],categories:["Azure"],authors:["Luke"],header:"AzureFunction_OpenAIBinding_NotFound.png",slug:"azure/404-attempting-query-openai-azure-function-binding",keywords:["azure","function","cloudnative","openai","ExtensionBundle"],description:"Troubleshooting a 404 error when querying OpenAI using Azure Function binding in Azure."},unlisted:!1,prevItem:{title:"Troubleshooting scenarios for Azure Open AI",permalink:"/troubleshooting-scenarios-azure-open-ai"},nextItem:{title:"Implementing a Sandbox Environment in Microsoft Azure",permalink:"/azure/implementing-sandbox-vending"}},a={authorsImageUrls:[void 0]},c=[];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["When attempting to work with ",(0,t.jsx)(n.a,{href:"https://learn.microsoft.com/azure/ai-services/openai/overview?WT.mc_id=AZ-MVP-5004796",children:"Azure Open AI"}),", you may want to work with an ",(0,t.jsx)(n.a,{href:"https://learn.microsoft.com/azure/azure-functions/functions-overview?pivots=programming-language-csharp&WT.mc_id=AZ-MVP-5004796",children:"Azure Functions"})," to adjust or massage the response, to do so you can use the ",(0,t.jsx)(n.a,{href:"https://github.com/Azure/azure-functions-openai-extension",children:"Azure Functions bindings for OpenAI's GPT engine\n"})," to query the OpenAI API. However, you may encounter a 404 Not Found error when attempting to query OpenAI using the Azure Function binding."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Azure Function - 404 Not Found",src:i(37730).Z+"",width:"1512",height:"487"})}),"\n",(0,t.jsx)(n.p,{children:"If you encounter this error, it could be likely that you are using the Azure Function ExtensionBundle, which does not contain the necessary dependencies to query the OpenAI API."}),"\n",(0,t.jsx)(n.p,{children:"The binding requires at least the following:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Microsoft.Azure.WebJobs.Extensions.OpenAI: 0.12.0-alpha"}),"\n",(0,t.jsx)(n.li,{children:"Microsoft.Azure.WebJobs.Extensions.OpenAI.Kusto: 0.12.0-alpha"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Nuget Webjob extensions",src:i(72524).Z+"",width:"828",height:"212"})}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsx)(n.p,{children:"The binding type(s) 'textCompletion' were not found in the configured extension bundle. Please ensure the correct version of the extension bundle is configured."})}),"\n",(0,t.jsxs)(n.p,{children:["Both packages are not integrated into the ",(0,t.jsx)(n.a,{href:"https://github.com/Azure/azure-functions-extension-bundles/releases/tag/4.13.2",children:"4.13.2"})," version of the ExtensionBundle, which, at the time of writing, is not available in the production ExtensionBundle shipped with new Azure Functions ",(0,t.jsx)(n.em,{children:"(which is 4.13.2)"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"However"}),", it is integrated into the Extension Bundle Preview. For example, Extension Bundle Preview for ",(0,t.jsx)(n.a,{href:"https://github.com/Azure/azure-functions-extension-bundles/releases/tag/4.18.0-Preview",children:"4.18.0"})," features:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Microsoft.Azure.WebJobs.Extensions.OpenAI: 0.13.0-alpha"}),"\n",(0,t.jsx)(n.li,{children:"Microsoft.Azure.WebJobs.Extensions.OpenAI.Kusto: 0.13.0-alpha"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Extensions Bundles Preview release4.18.0",src:i(45889).Z+"",width:"785",height:"532"})}),"\n",(0,t.jsx)(n.p,{children:"\ud83d\udd27 To use the latest Preview Bundle and enable the OpenAI binding extension, you need to update your function apps: host.json file:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "version": "2.0",\n  "managedDependency": {\n    "Enabled": true\n  },\n   "extensionBundle": {\n        "id": "Microsoft.Azure.Functions.ExtensionBundle.Preview",\n        "version": "[4.*, 5.0.0)"\n    }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Update the id of ",(0,t.jsx)(n.code,{children:"Microsoft.Azure.Functions.ExtensionBundle.Preview"})," and the version to ",(0,t.jsx)(n.code,{children:"[4.*, 5.0.0)"})," in accordance with the latest ",(0,t.jsx)(n.a,{href:"https://github.com/Azure/azure-functions-extension-bundles/releases",children:"bundle releases"})," to ensure you are using the latest Preview Bundle. The wildcard ",(0,t.jsx)(n.code,{children:"*"})," will ensure you use the latest Extension Bundle Preview version within that major release."]}),"\n",(0,t.jsx)(n.p,{children:"You should now be able to query the OpenAI API using the Azure Function binding."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Run After Binding",src:i(82274).Z+"",width:"1426",height:"818"})})]})}function l(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},45889:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/AzureFunction_OpenAIBinding_ExtensionsBundlePreview4.18.0-bb2fc9c284b05f8d92a260a5fbac3148.png"},37730:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/AzureFunction_OpenAIBinding_NotFound-587a391d4d41999ddd4b2ad615cf6d6b.png"},72524:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/AzureFunction_OpenAIBinding_NugetPackageRequirements-f386ce32d8d8ee0aee1301bc66e4fcbd.png"},82274:(e,n,i)=>{i.d(n,{Z:()=>t});const t=i.p+"assets/images/AzureFunction_OpenAIBinding_SuccessRunAfterBindingUpdate-3c622c0941c147c84c64527389c7d10d.png"},11151:(e,n,i)=>{i.d(n,{Z:()=>u,a:()=>s});var t=i(67294);const r={},o=t.createContext(r);function s(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function u(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),t.createElement(o.Provider,{value:n},e.children)}}}]);