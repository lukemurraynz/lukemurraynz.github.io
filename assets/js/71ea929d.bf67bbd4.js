"use strict";(self.webpackChunklukemurraynz=self.webpackChunklukemurraynz||[]).push([[90411],{42419:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>s,metadata:()=>d,toc:()=>l});var r=n(74848),i=n(28453);const s={title:"Azure Policy - Deny the creation of Azure OpenAI Studio",metaDescription:"Custom policy definition to deny the creation of Azure OpenAI Studio.",date:new Date("2024-10-14T08:20:46.782Z"),tags:["Azure"],categories:["Azure"],authors:["Luke"],slug:"azure/policy-deny-creation-azure-openai-studio",keywords:["azure","policy","cloud","governance","compliance","security","openai"],description:"Custom policy definition to deny the creation of Azure OpenAI Studio."},o=void 0,d={permalink:"/azure/policy-deny-creation-azure-openai-studio",source:"@site/blog/2024-10-14-azure-policy-denyopenaistudio/index.mdx",title:"Azure Policy - Deny the creation of Azure OpenAI Studio",description:"Custom policy definition to deny the creation of Azure OpenAI Studio.",date:"2024-10-14T08:20:46.782Z",tags:[{inline:!0,label:"Azure",permalink:"/tags/azure"}],readingTime:2.48,hasTruncateMarker:!0,authors:[{name:"Luke Murray",title:"Author",url:"https://luke.geek.nz",imageURL:"https://luke.geek.nz/img/logo.png",key:"Luke",page:null}],frontMatter:{title:"Azure Policy - Deny the creation of Azure OpenAI Studio",metaDescription:"Custom policy definition to deny the creation of Azure OpenAI Studio.",date:"2024-10-14T08:20:46.782Z",tags:["Azure"],categories:["Azure"],authors:["Luke"],slug:"azure/policy-deny-creation-azure-openai-studio",keywords:["azure","policy","cloud","governance","compliance","security","openai"],description:"Custom policy definition to deny the creation of Azure OpenAI Studio."},unlisted:!1,prevItem:{title:"Common Challenges and Solutions for Azure OpenAI Adoption",permalink:"/azure/openai-adoption-challenges-solutions"},nextItem:{title:"Cloudcloak",permalink:"/azure/cloudcloak"}},c={authorsImageUrls:[void 0]},l=[];function a(e){const t={a:"a",code:"code",img:"img",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:["Custom ",(0,r.jsx)(t.a,{href:"https://learn.microsoft.com/azure/governance/policy/tutorials/create-custom-policy-definition?WT.mc_id=AZ-MVP-5004796",children:"policy definition"})," to deny the creation of ",(0,r.jsx)(t.a,{href:"https://learn.microsoft.com/azure/ai-studio/concepts/ai-resources?WT.mc_id=AZ-MVP-5004796",children:"Azure OpenAI Studio Hubs"}),", which will stop the creation of an Azure OpenAI Studio."]}),"\n","\n",(0,r.jsx)(t.p,{children:"This custom Azure Policy that denies the creation of Azure OpenAI Studio hubs. Here's a breakdown of its components:"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Key"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"policyType"})}),(0,r.jsx)(t.td,{children:"Specifies that this is a custom policy."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"mode"})}),(0,r.jsx)(t.td,{children:"Indicates that the policy is indexed, meaning it can be evaluated against existing resources."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"displayName"})}),(0,r.jsx)(t.td,{children:"A human-readable name for the policy."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"description"})}),(0,r.jsx)(t.td,{children:"A brief description of what the policy does."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"metadata"})}),(0,r.jsx)(t.td,{children:"Contains additional information about the policy:"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"version"})}),(0,r.jsx)(t.td,{children:"The version of the policy."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"category"})}),(0,r.jsx)(t.td,{children:"The category under which this policy falls."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"source"})}),(0,r.jsx)(t.td,{children:"A URL for more information."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"alzCloudEnvironments"})}),(0,r.jsx)(t.td,{children:"Specifies the cloud environments where this policy is applicable."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"createdBy"})}),(0,r.jsx)(t.td,{children:"The creator of the policy."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"lastUpdated"})}),(0,r.jsx)(t.td,{children:"The date when the policy was last updated."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"parameters"})}),(0,r.jsx)(t.td,{children:"Defines parameters that can be used within the policy:"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"effect"})}),(0,r.jsx)(t.td,{children:"A parameter that determines the action to take (Audit, Disabled, or Deny)."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"type"})}),(0,r.jsx)(t.td,{children:"The type of the parameter (String)."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"metadata"})}),(0,r.jsx)(t.td,{children:"Additional information about the parameter:"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"displayName"})}),(0,r.jsx)(t.td,{children:"A human-readable name for the parameter."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"description"})}),(0,r.jsx)(t.td,{children:"A brief description of the parameter."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"allowedValues"})}),(0,r.jsx)(t.td,{children:"The allowed values for this parameter."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"defaultValue"})}),(0,r.jsx)(t.td,{children:"The default value for this parameter (Deny)."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"policyRule"})}),(0,r.jsx)(t.td,{children:"Defines the rule that the policy enforces:"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"if"})}),(0,r.jsx)(t.td,{children:"Specifies the conditions to check:"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"allOf"})}),(0,r.jsx)(t.td,{children:"An array of conditions that must all be true."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"field"})}),(0,r.jsx)(t.td,{children:"The field to check (type and kind)."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"equals"})}),(0,r.jsx)(t.td,{children:"The expected value for the field."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"then"})}),(0,r.jsx)(t.td,{children:"Specifies the action to take if the conditions are met:"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:(0,r.jsx)(t.strong,{children:"effect"})}),(0,r.jsx)(t.td,{children:"The action to take, which is determined by the value of the effect parameter."})]})]})]}),"\n",(0,r.jsx)(t.p,{children:'This policy checks if a resource is of type Microsoft.MachineLearningServices/workspaces and kind Hub. If both conditions are met, the policy enforces the action specified by the effect parameter, which defaults to "Deny".'}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Azure Policy - Deny the creation of Azure OpenAI Studio",src:n(13451).A+"",width:"1362",height:"897"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\r\n    "policyType": "Custom",\r\n    "mode": "Indexed",\r\n    "displayName": "Deny Azure OpenAI Studio creation",\r\n    "description": "Deny Azure OpenAI Studio hub creation.",\r\n    "metadata": {\r\n        "version": "1.0.0",\r\n        "category": "Machine Learning",\r\n        "source": "https://luke.geek.nz",\r\n        "alzCloudEnvironments": [\r\n            "AzureCloud"\r\n        ],\r\n        "createdBy": "Luke",\r\n        "lastUpdated": "2024-10-01"\r\n    },\r\n    "parameters": {\r\n        "effect": {\r\n            "type": "String",\r\n            "metadata": {\r\n                "displayName": "Effect",\r\n                "description": "Enable or disable the execution of the policy"\r\n            },\r\n            "allowedValues": [\r\n                "Audit",\r\n                "Disabled",\r\n                "Deny"\r\n            ],\r\n            "defaultValue": "Deny"\r\n        }\r\n       \r\n    },\r\n    "policyRule": {\r\n        "if": {\r\n            "allOf": [\r\n                {\r\n                    "field": "type",\r\n                    "equals": "Microsoft.MachineLearningServices/workspaces"\r\n                },\r\n                {\r\n                    "field": "kind",\r\n                    "equals": "Hub"\r\n                }\r\n            ]\r\n        },\r\n        "then": {\r\n            "effect": "[parameters(\'effect\')]"\r\n        }\r\n    }\r\n}\n'})}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"Azure Policy - Deny the creation of Azure OpenAI Studio",src:n(89328).A+"",width:"1359",height:"527"})})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},89328:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/DenyAzureStudioHubCreation_PolicyAzurePortal-4f0b0c43493b490c43b6a00e07c738ae.jpg"},13451:(e,t,n)=>{n.d(t,{A:()=>r});const r=n.p+"assets/images/DenyAzureStudioHub_PolicyAzurePortal-2464c7fa2edb6ebc65e6c34f0195b3b7.jpg"},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>d});var r=n(96540);const i={},s=r.createContext(i);function o(e){const t=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(s.Provider,{value:t},e.children)}}}]);