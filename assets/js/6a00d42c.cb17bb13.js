"use strict";(self.webpackChunklukemurraynz=self.webpackChunklukemurraynz||[]).push([[65549],{81969:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var o=n(87653),r=n(74848),a=n(28453);const i={title:"Test KAITO Model Completion on AKS with kubectl & curl",metaDescription:"Learn how to test the KAITO model's completion endpoint on Azure Kubernetes Service (AKS) using kubectl and curl.",tags:["Azure"],categories:["Azure"],authors:["Luke"],slug:"azure/aks-kaito-completion",keywords:["Azure","AKS","KAITO","kubectl","curl","Model Completion","Azure Kubernetes Service","Endpoint Testing"],description:"Learn to test the KAITO model's completion endpoint on AKS using kubectl and curl for real-time text generation.",date:new Date("2025-05-26T22:51:04.732Z")},s=void 0,l={authorsImageUrls:[void 0]},c=[];function u(e){const t={a:"a",code:"code",img:"img",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:["The other day, I wrote an article about ",(0,r.jsx)(t.a,{href:"https://luke.geek.nz/azure/aks-kaito-vscode-deployment/",children:"Deploy & Test KAITO on AKS with Visual Studio Code"}),". One of the areas I showcased was testing the completion of the KAITO model within Visual Studio Code; however, I didn't touch on how to use the completion endpoint directly."]}),"\n","\n",(0,r.jsx)(t.p,{children:"In this example, we are going to connect to the cluster, grab the workspace, and then run a curl container to test the completion endpoint of the KAITO model:"}),"\n",(0,r.jsx)(t.p,{children:(0,r.jsx)(t.img,{alt:"KAITO Completion Response",src:n(11644).A+"",width:"1047",height:"529"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"az aks get-credentials --resource-group kaitovscodetest --name kaitocodetest --overwrite-existing\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Once connected to the AKS cluster, we can retrieve the service IP of the ",(0,r.jsx)(t.code,{children:"workspace-phi-3-mini-4k-instruct"})," service, where the KAITO model is running. This workplace may change depending on the deployment, so you may need to adjust the service name accordingly."]}),"\n",(0,r.jsx)(t.p,{children:"You can find the service name by running:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:" kubectl get svc\n"})}),"\n",(0,r.jsx)(t.p,{children:"Then you can run the following command to test the completion endpoint of the KAITO model using a curl container. This command will send a POST request with a prompt to the KAITO model and return the generated text."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:'export SERVICE_IP=$(kubectl get svc workspace-phi-3-mini-4k-instruct -o jsonpath=\'{.spec.clusterIP}\')\n\nkubectl run -it --rm --restart=Never curl --image=curlimages/curl -- curl -X POST \\\n    -H "accept: application/json" \\\n    -H "Content-Type: application/json" \\\n    -d \'{\n        "prompt": "You are a technical writer. Draft a markdown-formatted introduction for a blog post titled \\"\ud83c\udf66 The Science and Art of Ice Cream\\". Use an engaging, approachable tone and provide a brief overview of why understanding the science behind ice cream leads to better flavors and textures.",\n        "return_full_text": false,\n        "clean_up_tokenization_spaces": false,\n        "prefix": null,\n        "handle_long_generation": null,\n        "generate_kwargs": {\n            "max_length": 5000,\n            "min_length": 0,\n            "do_sample": true,\n            "early_stopping": false,\n            "num_beams": 1,\n            "num_beam_groups": 1,\n            "diversity_penalty": 0.0,\n            "temperature": 1.0,\n            "top_k": 10,\n            "top_p": 1,\n            "typical_p": 1,\n            "repetition_penalty": 1,\n            "length_penalty": 1,\n            "no_repeat_ngram_size": 0,\n            "encoder_no_repeat_ngram_size": 0,\n            "bad_words_ids": null,\n            "num_return_sequences": 1,\n            "output_scores": false,\n            "return_dict_in_generate": false,\n            "forced_bos_token_id": null,\n            "forced_eos_token_id": null,\n            "remove_invalid_values": null\n        }\n    }\' \\\n    "http://$SERVICE_IP/v1/completions"\n'})}),"\n",(0,r.jsx)(t.p,{children:"This command will run a curl container and send a POST request to the completion endpoint of the KAITO model, passing in the prompt and other parameters. The response will be printed to the console, allowing you to see the generated text."}),"\n",(0,r.jsxs)(t.p,{children:["You can adjust the ",(0,r.jsx)(t.code,{children:"prompt"})," and other parameters in the JSON payload to test different inputs and configurations."]})]})}function d(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},11644:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/KAITOAKSEndpointTest-7ed2769136eefcc8930710e87afa528e.gif"},28453:(e,t,n)=>{n.d(t,{R:()=>i,x:()=>s});var o=n(96540);const r={},a=o.createContext(r);function i(e){const t=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(a.Provider,{value:t},e.children)}},87653:e=>{e.exports=JSON.parse('{"permalink":"/azure/aks-kaito-completion","source":"@site/blog/2025-05-27-kaitoakscompletition/index.mdx","title":"Test KAITO Model Completion on AKS with kubectl & curl","description":"Learn to test the KAITO model\'s completion endpoint on AKS using kubectl and curl for real-time text generation.","date":"2025-05-26T22:51:04.732Z","tags":[{"inline":true,"label":"Azure","permalink":"/tags/azure"}],"readingTime":2,"hasTruncateMarker":true,"authors":[{"name":"Luke Murray","title":"Author","url":"https://luke.geek.nz","imageURL":"https://luke.geek.nz/img/logo.png","key":"Luke","page":null}],"frontMatter":{"title":"Test KAITO Model Completion on AKS with kubectl & curl","metaDescription":"Learn how to test the KAITO model\'s completion endpoint on Azure Kubernetes Service (AKS) using kubectl and curl.","tags":["Azure"],"categories":["Azure"],"authors":["Luke"],"slug":"azure/aks-kaito-completion","keywords":["Azure","AKS","KAITO","kubectl","curl","Model Completion","Azure Kubernetes Service","Endpoint Testing"],"description":"Learn to test the KAITO model\'s completion endpoint on AKS using kubectl and curl for real-time text generation.","date":"2025-05-26T22:51:04.732Z"},"unlisted":false,"nextItem":{"title":"Azure Extended Zones in Perth","permalink":"/azure/extended-zones-perth"}}')}}]);