"use strict";(self.webpackChunklukemurraynz=self.webpackChunklukemurraynz||[]).push([[90846],{42186:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>l,frontMatter:()=>s,metadata:()=>i,toc:()=>d});var i=n(272),o=n(74848),r=n(28453);const s={title:"Automate Azure Access for GitHub Copilot with AZD",metaDescription:"Learn how to use Azure Developer CLI's azure.coding-agent extension to enable GitHub Copilot Coding Agent to securely access and manage Azure resources using Azure MCP Server with federated credentials.",tags:["Azure"],categories:["Azure"],authors:["Luke"],slug:"azure/azd-github-copilot-coding-agent-azure-mcp-server",keywords:["Azure","Azure Developer CLI","azd","GitHub Copilot","Coding Agent","Azure MCP Server","Managed Identity","Federated Credentials","OIDC","GitHub Actions","Bicep","Infrastructure as Code","Azure Automation"],description:"Learn to automate Azure access for GitHub Copilot using Azure Developer CLI, enhancing your coding efficiency and security.",date:new Date("2025-11-02T06:41:56.875Z")},a=void 0,c={authorsImageUrls:[void 0]},d=[];function u(e){const t={a:"a",blockquote:"blockquote",code:"code",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(t.p,{children:["I've blogged and talked about ",(0,o.jsx)(t.a,{href:"https://learn.microsoft.com/azure/developer/azure-developer-cli/overview?tabs=windows&WT.mc_id=AZ-MVP-5004796",children:"Azure Developer CLI"})," before, but this time, I will touch on a functionality as part of the ",(0,o.jsx)(t.code,{children:"azure.coding-agent"})," extension."]}),"\n",(0,o.jsxs)(t.p,{children:["This extension automates the deployment and configuration to allow the GitHub Copilot Coding Agent access to Azure resources directly through the use of the ",(0,o.jsx)(t.a,{href:"https://learn.microsoft.com/azure/developer/azure-mcp-server/overview?WT.mc_id=AZ-MVP-5004796",children:"Azure MCP Server"})," ."]}),"\n","\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsx)(t.p,{children:"The extension creates the managed identity, configures the federated credential, and sets up the GitHub Actions workflow in your repository."}),"\n"]}),"\n",(0,o.jsxs)(t.p,{children:["You will need to clone the GitHub repository you want the GitHub Coding Agent to access Azure resources from. In my example, I have: ",(0,o.jsx)(t.a,{href:"https://github.com/lukemurraynz/AZD_AzureMCP_GitHub_Coding_Agent",children:"AZD_AzureMCP_GitHub_Coding_Agent"}),".\nYou will also need to have the ",(0,o.jsx)(t.a,{href:"https://learn.microsoft.com/azure/developer/azure-developer-cli/overview?tabs=windows&WT.mc_id=AZ-MVP-5004796",children:"Azure Developer CLI"})," installed and authenticated to your Azure subscription."]}),"\n",(0,o.jsxs)(t.p,{children:["First things first - install the ",(0,o.jsx)(t.code,{children:"azure.coding-agent"})," extension for AZD. Make sure you are running the latest version of Azure Developer CLI, ie to upgrade on your Windows host try: ",(0,o.jsx)(t.code,{children:"winget upgrade Microsoft.Azd"}),"."]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"azd extension install azure.coding-agent\n"})}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"azd extension install azure.coding-agent",src:n(30333).A+"",width:"937",height:"351"})}),"\n",(0,o.jsx)(t.p,{children:"Next, navigate to your cloned GitHub repository and run the following command to configure the GitHub Coding Agent with Azure MCP Server:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"azd coding-agent config\n"})}),"\n",(0,o.jsx)(t.p,{children:"The AZD Coding Agent configuration process will prompt and help you set up the following:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"Azure Authentication: verify your Azure login and select a subscription"}),"\n",(0,o.jsx)(t.li,{children:"Repository Selection: Choose the GitHub repository remote for the coding agent"}),"\n",(0,o.jsx)(t.li,{children:"Managed Identity: create a new user-assigned managed identity or select an existing one"}),"\n",(0,o.jsx)(t.li,{children:"Resource Group: create a new resource group or use an existing one"}),"\n",(0,o.jsx)(t.li,{children:"Role Assignment: configure RBAC roles (defaults to Reader, fully configurable)"}),"\n",(0,o.jsx)(t.li,{children:"Git Operations: create a branch and push the necessary workflow files"}),"\n",(0,o.jsx)(t.li,{children:"MCP Server: copy MCP JSON output to GitHub Copilot coding agent settings"}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"Things to note:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"The configuration sets up least privilege access by default, ie, Reader."}),"\n",(0,o.jsx)(t.li,{children:"Passwordless authentication by using OpenID Connect federated credentials"}),"\n",(0,o.jsx)(t.li,{children:"No secrets stored in GitHub"}),"\n",(0,o.jsx)(t.li,{children:"Automatic token refresh is configured through the Azure identity platform"}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"azd coding-agent config",src:n(27464).A+"",width:"937",height:"351"})}),"\n",(0,o.jsx)(t.p,{children:"If we check the Azure environment, we can see that the Managed Identity has been created and assigned the Reader role to the selected Resource Group."}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"Managed Identity and Role Assignment",src:n(61603).A+"",width:"1568",height:"360"})}),"\n",(0,o.jsx)(t.p,{children:"On GitHub, we can see that a new Environment named 'copilot' has been created, with 3 variables."}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"AZURE_CLIENT_ID"}),"\n",(0,o.jsx)(t.li,{children:"AZURE_SUBSCRIPTION_ID"}),"\n",(0,o.jsx)(t.li,{children:"AZURE_TENANT_ID"}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"And a new branch is ready to create a Pull Request with the GitHub Actions workflow file to enable the GitHub Copilot Coding Agent to use Azure resources."}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"AZD GitHub Actions Workflow",src:n(78764).A+"",width:"1883",height:"977"})}),"\n",(0,o.jsx)(t.p,{children:"Finally, we need to manually copy the MCP Server JSON output from the AZD CLI and paste it into the GitHub Copilot Coding Agent settings for the repository."}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'{\n    "mcpServers": {\n        "Azure": {\n            "type": "local",\n            "command": "npx",\n            "args": [\n                "-y",\n                "@azure/mcp@latest",\n                "server",\n                "start"\n            ],\n            "tools": [\n                "*"\n            ]\n        }\n    }\n}\n'})}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"AZD GitHub Coding Agent Config",src:n(72208).A+"",width:"1658",height:"1017"})}),"\n",(0,o.jsxs)(t.p,{children:["Now we are all set to use the GitHub Copilot Coding Agent with Azure resources in our repository. The User Assigned Managed identity only has Reader access to the specific Resource Group by default, so you may need to adjust the role assignments based on your requirements. You can apply different roles at the time of configuration by using the ",(0,o.jsx)(t.code,{children:"--roles"})," parameter with the ",(0,o.jsx)(t.code,{children:"azd coding-agent config"})," command."]}),"\n",(0,o.jsx)(t.p,{children:"For the purposes of this demo, I have granted the Managed Identity Owner access to the Subscription to allow the Coding Agent to create resources. Please do not do this in production environments."}),"\n",(0,o.jsx)(t.p,{children:"We can see that once we assign the Issue, Copilot will authenticate with Azure using the Azure MCP Server and begin processing the request."}),"\n",(0,o.jsx)(t.p,{children:"In my example, I have prompted Copilot to create Resource Groups based on the names of cities in New Zealand, and a Storage account inside each Resource Group\u2014the Azure MCP Server running all necessary tools. In this case, it created Bicep files based on my request, and a deployment script to do the deploy."}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"GitHub Copilot Coding Agent creating Bicep files",src:n(80997).A+"",width:"1871",height:"911"})}),"\n",(0,o.jsx)(t.p,{children:"I forgot to configure the Firewall settings for the GitHub Runner and Coding Agent to communicate with the Azure Management endpoints, so although it configured and validated the Bicep files, it didn't deploy them. After enabling it, I can add a comment to the Pull Request to do just that."}),"\n",(0,o.jsx)(t.p,{children:"We can see that it triggers the Azure CLI to start the deployment of the bicep files created by the previous step, if we navigate to Azure, we can see a Deployment has begun, and GitHub Coding Agent does validation of the deployment."}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"GitHub Copilot Coding Agent deploying Bicep files",src:n(75307).A+"",width:"1871",height:"911"})}),"\n",(0,o.jsx)(t.p,{children:"And finally, we can see the resources in the Azure subscription:"}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"GitHub Copilot Coding Agent validate Bicep deploy of Resource groups",src:n(42708).A+"",width:"1216",height:"650"})}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"GitHub Copilot Coding Agent validate Bicep deploy of Storage accounts",src:n(29708).A+"",width:"798",height:"538"})}),"\n",(0,o.jsxs)(t.p,{children:["Hopefully this gives you a good overview of how to get started with the Azure Developer CLI ",(0,o.jsx)(t.code,{children:"azure.coding-agent"})," extension to enable the GitHub Copilot Coding Agent to access Azure resources securely and efficiently, in my article I showcased how I could use to generate and deploy resources directly in Azure, however this opens up a lot of possibilities for automating and streamlining your Azure development workflows using AI-powered assistance, and can factor in scenarios such as infrastructure as code generation of existing resources, Azure resource reviews, and even troubleshooting assistance directly within your development environment."]}),"\n",(0,o.jsx)(t.p,{children:"Please be sure to follow best practices for security and access management when configuring the managed identity and role assignments to ensure that your Azure resources remain secure while leveraging the capabilities of the GitHub Copilot Coding Agent. You don't want to give this agent more permissions than it needs for the tasks at hand! Remember to monitor and audit the Coding Agent's activities to maintain compliance and security in your Azure environment."}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsx)(t.p,{children:'And remember, "with great power comes great responsibility!"'}),"\n"]})]})}function l(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},72208:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/AZDCodingAgentGitHubCodingAgentConfig-ed2375c9f7e026dcdefa51cbf6df8803.jpg"},78764:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/AZDCodingAgentGitHubWorkflow-1af8b6ee9151ff8312f638d9f5fde062.jpg"},42708:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/AZDCodingAgentRGDeploymentValidate-1d0a78d3d7ee5be5436e386f7cc99009.jpg"},29708:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/AZDCodingAgentRGStgDeploymentValidate-607bfc7478102566c025533ec5710669.jpg"},61603:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/AZDCodingAgentUIMPermissionReader-2f168dcf1272c7c05c4bad25378e57ff.jpg"},27464:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/AZD_Azure_Coding_Agent_Config-70b56eb2e874677c47bb3332dee8ffb6.gif"},75307:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/AZD_Azure_Coding_Agent_Deploy-9f425b5ce588b5f3a0423a4676607ccf.gif"},80997:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/AZD_Azure_Coding_Agent_Run-e6a53d5d6eb4efb4a178e01fa29473ef.gif"},30333:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/Install_AZD_azure.coding.agent-6e77a93291094a73b3c5cec435da2a16.gif"},28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>a});var i=n(96540);const o={},r=i.createContext(o);function s(e){const t=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(r.Provider,{value:t},e.children)}},272:e=>{e.exports=JSON.parse('{"permalink":"/azure/azd-github-copilot-coding-agent-azure-mcp-server","source":"@site/blog/2025-11-02-azdcopilotcoding/index.mdx","title":"Automate Azure Access for GitHub Copilot with AZD","description":"Learn to automate Azure access for GitHub Copilot using Azure Developer CLI, enhancing your coding efficiency and security.","date":"2025-11-02T06:41:56.875Z","tags":[{"inline":true,"label":"Azure","permalink":"/tags/azure"}],"readingTime":5.06,"hasTruncateMarker":true,"authors":[{"name":"Luke Murray","title":"Author","url":"https://luke.geek.nz","imageURL":"https://luke.geek.nz/img/logo.png","key":"Luke","page":null}],"frontMatter":{"title":"Automate Azure Access for GitHub Copilot with AZD","metaDescription":"Learn how to use Azure Developer CLI\'s azure.coding-agent extension to enable GitHub Copilot Coding Agent to securely access and manage Azure resources using Azure MCP Server with federated credentials.","tags":["Azure"],"categories":["Azure"],"authors":["Luke"],"slug":"azure/azd-github-copilot-coding-agent-azure-mcp-server","keywords":["Azure","Azure Developer CLI","azd","GitHub Copilot","Coding Agent","Azure MCP Server","Managed Identity","Federated Credentials","OIDC","GitHub Actions","Bicep","Infrastructure as Code","Azure Automation"],"description":"Learn to automate Azure access for GitHub Copilot using Azure Developer CLI, enhancing your coding efficiency and security.","date":"2025-11-02T06:41:56.875Z"},"unlisted":false,"prevItem":{"title":"Schedule GitHub Coding Agents with Copilot CLI and GitHub Actions","permalink":"/azure/schedule-github-coding-agents"},"nextItem":{"title":"Native Service Bus Publishing from API Management","permalink":"/azure/servicebusapimpublish"}}')}}]);