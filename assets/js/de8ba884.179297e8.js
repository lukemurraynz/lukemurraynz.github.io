"use strict";(self.webpackChunklukemurraynz=self.webpackChunklukemurraynz||[]).push([[91515],{61677:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>l});var t=s(74848),r=s(28453);const i={date:"2022-08-18 00:00:00 +1200",title:"Microsoft Azure - Operational Cost Optimization Tasks",authors:["Luke"],tags:["Azure"],toc:!0,header:{teaser:"/uploads/cost_pillar_overview.png"}},o=void 0,a={permalink:"/2022/08/18/microsoft-azure-cost-optimization-tasks",source:"@site/blog/2022-08-18-microsoft-azure-cost-optimization-tasks.md",title:"Microsoft Azure - Operational Cost Optimization Tasks",description:"The Microsoft Azure platform is not a set-and-forget ecosystem like doing service on your car!",date:"2022-08-18T00:00:00.000Z",tags:[{label:"Azure",permalink:"/tags/azure"}],readingTime:15.125,hasTruncateMarker:!1,authors:[{name:"Luke Murray",title:"Author",url:"https://luke.geek.nz",imageURL:"https://luke.geek.nz/img/logo.png",key:"Luke"}],frontMatter:{date:"2022-08-18 00:00:00 +1200",title:"Microsoft Azure - Operational Cost Optimization Tasks",authors:["Luke"],tags:["Azure"],toc:!0,header:{teaser:"/uploads/cost_pillar_overview.png"}},unlisted:!1,prevItem:{title:"IMS Payroll not opening as a published application in Azure Virtual Desktop",permalink:"/azure/ims-payroll-not-opening-as-a-published-application-in-azure-virtual-desktop"},nextItem:{title:"Connect to Azure SQL Database in a Jupyter Notebook using Python",permalink:"/2022/08/17/connect-to-azure-sql-database-in-a-jupyter-notebook-using-python"}},c={authorsImageUrls:[void 0]},l=[{value:"Overview",id:"overview",level:4},{value:"Design",id:"design",level:4},{value:"Keep within the cost constraints",id:"keep-within-the-cost-constraints",level:5},{value:"Aim for scalable costs",id:"aim-for-scalable-costs",level:5},{value:"Pay for the consumption",id:"pay-for-the-consumption",level:5},{value:"Right resources, the right size",id:"right-resources-the-right-size",level:5},{value:"Monitor and optimize",id:"monitor-and-optimize",level:5},{value:"Review Underutilized Resources",id:"review-underutilized-resources",level:4},{value:"Review Azure App Service Plans",id:"review-azure-app-service-plans",level:5},{value:"Review shutdown workloads",id:"review-shutdown-workloads",level:5},{value:"Review Azure Advisor",id:"review-azure-advisor",level:5},{value:"Review Azure SQL Databases",id:"review-azure-sql-databases",level:5},{value:"Review Azure Reserved Instances",id:"review-azure-reserved-instances",level:4},{value:"Review unused files and VHDs",id:"review-unused-files-and-vhds",level:4},{value:"Review budgets",id:"review-budgets",level:4},{value:"Review Tags",id:"review-tags",level:4},{value:"Review Hub (Hybrid Use Benefit)",id:"review-hub-hybrid-use-benefit",level:4},{value:"Review Backups",id:"review-backups",level:4},{value:"Review unused Public IPs",id:"review-unused-public-ips",level:4},{value:"Review Azure Storage Accounts",id:"review-azure-storage-accounts",level:4},{value:"- Download the PDF version of these Tasks",id:"--download-the-pdf-version-of-these-tasks",level:4},{value:"- Azure Operational Checklist table",id:"--azure-operational-checklist-table",level:4}];function d(e){const n={a:"a",blockquote:"blockquote",em:"em",h4:"h4",h5:"h5",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.a,{href:"https://azure.microsoft.com/en-us/?WT.mc_id=AZ-MVP-5004796",title:"Microsoft Azure",children:"Microsoft Azure"})," platform is not a set-and-forget ecosystem like doing service on your car!"]}),"\n",(0,t.jsx)(n.p,{children:"There are no one-size-fits when it comes to cost optimization, but some general tasks can be done or considered on a Monthly/Quarterly/Annual basis to keep on top of the resources you are running in Azure and to keep them lean."}),"\n",(0,t.jsx)(n.h4,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"Although Microsoft takes a lot of traditional infrastructure management and security concerns off your hand, you are still responsible for the spending and ensuring the value of the technologies and services you consume match your business goals and agility."}),"\n",(0,t.jsxs)(n.p,{children:["Today we are going to go back to basics and look at the ",(0,t.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/azure/architecture/framework/?WT.mc_id=AZ-MVP-5004796#cost-optimization",title:"Cost optimization",children:"Cost Optimization"})," pillar of the Microsoft ",(0,t.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/azure/architecture/framework/?WT.mc_id=AZ-MVP-5004796",title:"Microsoft Azure Well-Architected Framework",children:"Well-Architected Framework"}),"."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"\u201cThe cost optimization pillar provides principles for balancing business goals with budget justification to create a cost-effective workload while avoiding capital-intensive solutions. Cost optimization is about looking at ways to reduce unnecessary expenses and improve operational efficiencies.\u201d"}),"\n",(0,t.jsx)(n.p,{children:"\u201cUse the pay-as-you-go strategy for your architecture, and invest in scaling out, rather than delivering a large investment-first version. Consider opportunity costs in your architecture and the balance between first-mover advantage versus fast follow.\u201d"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"The right governance and oversight can help prevent Cloud sprawl and wasted consumption costs."}),"\n",(0,t.jsxs)(n.p,{children:["To help get you started, I have put together a list of some optimization opportunities, that should be run regularly, items such as reviewing unassociated public IPs should be done Monthly ",(0,t.jsx)(n.em,{children:"(along with Azure Advisor checks)"}),", and ",(0,t.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/azure/cost-management-billing/reservations/save-compute-costs-reservations?WT.mc_id=AZ-MVP-5004796",title:"What are Azure Reservations?",children:"Azure Reservation reviews"})," at least quarterly."]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.em,{children:"This is not an exhaustive list"})}),", and the use of ",(0,t.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/azure/governance/policy/overview?WT.mc_id=AZ-MVP-5004796",title:"What is Azure Policy?",children:"Azure Policy"})," and ",(0,t.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/azure/advisor/advisor-overview?WT.mc_id=AZ-MVP-5004796",title:"Introduction to Azure Advisor",children:"Azure Advisor"})," help supplement these tasks."]}),"\n",(0,t.jsx)(n.p,{children:"If you have other tasks that you run, feel free to share them with the community in the page comments below."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/graph/overview?WT.mc_id=AZ-MVP-5004796",title:"Overview of Microsoft Graph",children:"Microsoft Graph"})," and ",(0,t.jsx)(n.a,{href:"https://luke.geek.nz/azure-resource-graph-explorer-and-the-powershell-azure-resource-graph",title:"Azure Resource Graph Explorer and the PowerShell Azure Resource Graph ",children:"KQL queries"})," can also be used in conjunction with PowerShell to pull recommendations straight out of Advisor, which can then be fed into reports, and the use of community tools such as the ",(0,t.jsx)(n.a,{href:"https://luke.geek.nz/azure/azure-optimization-engine",title:"Azure Optimization Engine ",children:"Azure Optimization Engine"})," cannot be undervalued."]}),"\n",(0,t.jsx)(n.h4,{id:"design",children:"Design"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Azure - Monitor &amp; optimize",src:s(11642).A+"",title:"Azure - Monitor &amp; optimize",width:"886",height:"538"})}),"\n",(0,t.jsx)(n.h5,{id:"keep-within-the-cost-constraints",children:"Keep within the cost constraints"}),"\n",(0,t.jsx)(n.p,{children:"Every design choice has cost implications. Before choosing an architectural pattern, Azure service, or a price model for the service, consider the budget constraints set by the company. As part of the design, identify acceptable boundaries on scale, redundancy, and performance against cost. After estimating the initial cost, set budgets and alerts at different scopes to measure the cost."}),"\n",(0,t.jsx)(n.p,{children:"One of the cost drivers can be unrestricted resources. These resources typically need to scale and consume more cost to meet demand."}),"\n",(0,t.jsx)(n.h5,{id:"aim-for-scalable-costs",children:"Aim for scalable costs"}),"\n",(0,t.jsx)(n.p,{children:"A key benefit of the cloud is the ability to scale dynamically. The workload cost should scale linearly with demand."}),"\n",(0,t.jsx)(n.p,{children:"You can save costs through automatic scaling. First, consider the usage metrics and performance to determine the number of instances. Then, choose smaller instances for a highly variable workload and scale out to get the required level of performance rather than up. This choice will enable you to make your cost calculations and estimates granular."}),"\n",(0,t.jsx)(n.h5,{id:"pay-for-the-consumption",children:"Pay for the consumption"}),"\n",(0,t.jsx)(n.p,{children:"Adopt a leasing model instead of owning infrastructure. Azure offers many SaaS and PaaS resources that simplify the overall architecture. The cost of hardware, software, development, operations, security, and data centre space is included in the pricing model. Also, choose pay-as-you-go over fixed pricing. That way, you're charged for only what you use as a consumer."}),"\n",(0,t.jsx)(n.h5,{id:"right-resources-the-right-size",children:"Right resources, the right size"}),"\n",(0,t.jsx)(n.p,{children:"Choose the right resources aligned with business goals and can handle the workload's performance."}),"\n",(0,t.jsx)(n.p,{children:"An inappropriate or misconfigured service can impact the cost."}),"\n",(0,t.jsx)(n.p,{children:"For example, building a multi-region service when the service levels don't require high availability or geo-redundancy will increase cost without any reasonable business justification. Specific infrastructure resources are delivered as fix-sized building blocks. Ensure that these blocks are adequately sized to meet capacity demand and deliver expected outcomes."}),"\n",(0,t.jsx)(n.h5,{id:"monitor-and-optimize",children:"Monitor and optimize"}),"\n",(0,t.jsx)(n.p,{children:"Treat cost monitoring and optimization as a process rather than a point-in-time activity. Conduct regular cost reviews and measure and forecast the capacity needs so that you can provision resources dynamically and scale with demand. Review the cost management recommendations and take action."}),"\n",(0,t.jsxs)(n.p,{children:["Today, we will focus on ",(0,t.jsx)(n.strong,{children:"Monitor and optimize"}),"."]}),"\n",(0,t.jsx)(n.h4,{id:"review-underutilized-resources",children:"Review Underutilized Resources"}),"\n",(0,t.jsx)(n.p,{children:"Optimize and improve efficiency by identifying idle and underutilized resources across the Azure ecosystem."}),"\n",(0,t.jsx)(n.h5,{id:"review-azure-app-service-plans",children:"Review Azure App Service Plans"}),"\n",(0,t.jsxs)(n.p,{children:["Review ",(0,t.jsx)(n.a,{href:"https://portal.azure.com/#blade/HubsExtension/BrowseResource/resourceType/Microsoft.Web%2FserverFarms",title:"Azure Portal - App Service plan",children:"Azure App Service Plans"})," to determine if:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"The Azure App Service Plan is \u2018Standard\u2019 or \u2018Premium\u2019 pricing and has an associated application."}),"\n",(0,t.jsxs)(n.li,{children:["If the Azure App Service is getting utilized ",(0,t.jsx)(n.em,{children:"(by looking at the Metrics/CPU)"})," and doesn\u2019t need to be downscaled to a smaller plan."]}),"\n"]}),"\n",(0,t.jsx)(n.h5,{id:"review-shutdown-workloads",children:"Review shutdown workloads"}),"\n",(0,t.jsxs)(n.p,{children:["Because you pay for Azure Resources as \u2018Pay As You Go\u2019, a quick win can be to review ",(0,t.jsx)(n.a,{href:"https://portal.azure.com/#blade/HubsExtension/BrowseResourceBlade/resourceType/Microsoft.Compute%2FVirtualMachines",title:"Azure Portal - Virtual Machines",children:"Virtual Machines"})," to determine if the workload needs to be 24/7!"]}),"\n",(0,t.jsxs)(n.p,{children:["For example, you have automation configured to automatically start up and shut down workloads based on the following schedule: 7 AM Start \u2013 7 PM Stop ",(0,t.jsx)(n.em,{children:"(& off Weekends)"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:['You can add servers to this automated schedule by adding the following Tag to the Virtual Machine or trigger automation when a workload is \u2018Shutdown\u2019 and not deallocated; see my article on "',(0,t.jsx)(n.a,{href:"https://luke.geek.nz/azure/turn-on-a-azure-virtual-machine-using-azure-automation/",title:"Turn on a Azure Virtual Machine using Azure Automation ",children:"Turn on an Azure Virtual Machine using Azure Automation"}),'" for a potential place to start.']}),"\n",(0,t.jsx)(n.h5,{id:"review-azure-advisor",children:"Review Azure Advisor"}),"\n",(0,t.jsxs)(n.p,{children:["The Azure Advisor is an inbuilt tool critical to optimizing the Azure Environment. The ",(0,t.jsx)(n.a,{href:"https://portal.azure.com/#blade/Microsoft_Azure_Expert/AdvisorMenuBlade/Cost",title:"Azure Portal - Azure Advisor",children:"Azure Advisor"})," needs to be reviewed for Cost recommendations."]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"The Azure Advisor will recommend Reserved Instances."}),"\n",(0,t.jsxs)(n.li,{children:["The Azure Advisor will recommend if a Virtual Machine runs on a VM size GREATER than what it needs ",(0,t.jsx)(n.em,{children:"(based on CPU utilization under 5% in the last 14 days)"}),". If the Azure Advisor reports an overprovisioned machine, you need to investigate its use and resize it to a more suitable size."]}),"\n"]}),"\n",(0,t.jsx)(n.h5,{id:"review-azure-sql-databases",children:"Review Azure SQL Databases"}),"\n",(0,t.jsxs)(n.p,{children:["Review ",(0,t.jsx)(n.a,{href:"https://portal.azure.com/#blade/HubsExtension/BrowseResourceBlade/resourceType/Microsoft.Sql%2Fservers%2Fdatabases",title:"Azure Portal - Azure SQL databases",children:"Azure SQL Databases"})," to determine if:"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"The SQL Database Pricing Tier is \u2018Standard\u2019 and uses the DTUs (usually found by looking at the Compute utilization on the databases); if not, downsize the DTU limit."}),"\n",(0,t.jsx)(n.li,{children:"Check Geo-Replication to ensure that the SQL Database is not replicating across Regions if it doesn\u2019t need to be."}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"review-azure-reserved-instances",children:"Review Azure Reserved Instances"}),"\n",(0,t.jsx)(n.p,{children:"Azure reserved instances significantly reduce costs\u2014up to 72 per cent compared to pay-as-you-go prices\u2014with one-year or three-year terms on Windows and Linux virtual machines (VMs). What's more, you can now improve budgeting and forecasting with a single upfront payment (i.e. Pay for a VM Upfront for 1/3 Year or 5 Years), making it easy to calculate your investments. Or lower your upfront cash outflow with monthly payment options at no additional cost."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Azure Reserved Instance",src:s(44895).A+"",title:"Azure Reserved Instance",width:"553",height:"501"})}),"\n",(0,t.jsx)(n.p,{children:"The Azure Advisor is an inbuilt tool critical to optimizing the Azure Environment. The Azure Advisor needs to be reviewed for Reserved Instance recommendations."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"When reviewing Reserved Instances, you need to take into consideration:"}),"\n",(0,t.jsx)(n.li,{children:"What workloads are they used for?"}),"\n",(0,t.jsx)(n.li,{children:"Is there a project that may replace or resize the workloads next year?"}),"\n",(0,t.jsx)(n.li,{children:"Who is paying for the workloads?"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"review-unused-files-and-vhds",children:"Review unused files and VHDs"}),"\n",(0,t.jsx)(n.p,{children:"Save Azure costs by cleaning up unused VHDs in your Azure storage. Azure stores Azure Virtual Machine OS and data disks in Azure storage accounts."}),"\n",(0,t.jsx)(n.p,{children:"When a VM is deleted from the Azure portal, the underlying OS and data disks may not get deleted. Such disks continue to consume Azure storage and account for the cost of storing them. These disks are called Orphaned Disks."}),"\n",(0,t.jsx)(n.p,{children:"As mentioned above, some Virtual Machines with unmanaged disks will keep the VHDs around when deleted."}),"\n",(0,t.jsxs)(n.p,{children:["Using a PowerShell ",(0,t.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/azure/virtual-machines/windows/find-unattached-disks?WT.mc_id=AZ-MVP-5004796",title:"Find and delete unattached Azure managed and unmanaged disks",children:"script"})," ",(0,t.jsx)(n.em,{children:"(provided by Microsoft),"})," you can report on any disks that are not in use by a VM and then delete them."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"Note: Be VERY cautious doing this; solutions such as Citrix and Azure Image Builder use unmanaged disks to create new Session hosts, etc., so context is key."})}),"\n",(0,t.jsxs)(n.p,{children:["With the Azure Storage accounts using Blob data \u2013 such as Diagnostic Accounts, it is a good idea to implement ",(0,t.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/azure/storage/blobs/lifecycle-management-overview?tabs=azure-portal&WT.mc_id=AZ-MVP-5004796",title:"Azure Blob Storage Lifecycle",children:"Azure Blob Storage Lifecycle"})," on the storage accounts, so we are only retaining recent and relevant data."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Azure Blob Storage Lifecycle Management",src:s(78594).A+"",title:"Azure Blob Storage Lifecycle Management",width:"836",height:"308"})}),"\n",(0,t.jsx)(n.p,{children:"The lifecycle management policy lets you:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Transition blobs to a cooler storage tier ",(0,t.jsx)(n.em,{children:"(hot to cool, hot to archive, or cool to archive)"})," to optimize for performance and cost"]}),"\n",(0,t.jsx)(n.li,{children:"Delete blobs at the end of their lifecycles"}),"\n",(0,t.jsx)(n.li,{children:"Define rules to be run once per day at the storage account level."}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"review-budgets",children:"Review budgets"}),"\n",(0,t.jsx)(n.p,{children:"Budgets in Cost Management help you plan for and drive organizational accountability. With budgets, you can account for the Azure services you consume or subscribe to during a specific period."}),"\n",(0,t.jsx)(n.p,{children:"Budgets help you inform others about their spending to proactively manage costs and monitor how spending progresses over time."}),"\n",(0,t.jsx)(n.p,{children:"When the budget thresholds you've created are exceeded, notifications are triggered. None of your resources is affected, and your consumption isn't stopped; however, you can use Budget alerts as a trigger to run Azure Logic Apps or Functions to automate the shutdown and resize resources. You can use budgets to compare and track spending as you analyze costs."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Azure Budget",src:s(3837).A+"",width:"1390",height:"773"})}),"\n",(0,t.jsx)(n.p,{children:"Ensure Azure Budget notifications are configured to email Product Owners or other Stakeholders once a Resource Group or Subscription reaches a specific threshold."}),"\n",(0,t.jsx)(n.p,{children:"This is set up in the Azure Portal, on the Resource Group under Budgets, and set to email the Application Owner."}),"\n",(0,t.jsx)(n.p,{children:"Examples of budgets that could be configured:"}),"\n",(0,t.jsx)(n.p,{children:"Generally, I recommend that three budgets should be configured to give enough notice:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"50%"}),"\n",(0,t.jsx)(n.li,{children:"60%"}),"\n",(0,t.jsx)(n.li,{children:"70%"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"review-tags",children:"Review Tags"}),"\n",(0,t.jsx)(n.p,{children:'You apply tags to your Azure resources, resource groups, and subscriptions to logically organize them into a taxonomy. Each tag consists of a name and a value pair. For example, you can apply the name "Environment" and the value "Production" to all the resources in production.'}),"\n",(0,t.jsx)(n.p,{children:"Tags can be used to determine things like:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Who to bill?"}),"\n",(0,t.jsx)(n.li,{children:"Who supports it?"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Azure Portal - Tags",src:s(44872).A+"",title:"Azure Portal - Tags",width:"1018",height:"671"})}),"\n",(0,t.jsx)(n.p,{children:"The right tags can mean that the right owners get charged internally and have more ownership of their resource costs. Examples below:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Tag Name"}),(0,t.jsx)(n.th,{children:"Value"}),(0,t.jsx)(n.th,{children:"Comment"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Dept"}),(0,t.jsx)(n.td,{children:"Finance"}),(0,t.jsx)(n.td,{children:"Name of the department who owns the resources."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Environment"}),(0,t.jsx)(n.td,{children:"UAT"}),(0,t.jsx)(n.td,{children:"What environment the Resource is used for such as Production, UAT and Development"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Application Owner"}),(0,t.jsx)(n.td,{children:"Luke Murray"}),(0,t.jsx)(n.td,{children:"The name of the Product Owner for the service sitting inside the Resource Group"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Support Team"}),(0,t.jsx)(n.td,{children:"Platform Team"}),(0,t.jsx)(n.td,{children:"What team is responsible for the resources/site for support reasons"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Billing Code"}),(0,t.jsx)(n.td,{children:"Operational"}),(0,t.jsx)(n.td,{children:"Purchase order or project billing code"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["For further examples and a base tagging convention, check out a blog article I wrote on ",(0,t.jsx)(n.a,{href:"https://luke.geek.nz/azure/microsoft-azure-tagging-conventions/",title:"Microsoft Azure Tagging Conventions ",children:"Microsoft Azure Tagging conventions"}),"."]}),"\n",(0,t.jsx)(n.h4,{id:"review-hub-hybrid-use-benefit",children:"Review Hub (Hybrid Use Benefit)"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.a,{href:"https://azure.microsoft.com/en-us/pricing/hybrid-benefit/?WT.mc_id=AZ-MVP-5004796",title:"Azure Hybrid Benefit",children:"Azure Hybrid Benefit"})," is a pricing benefit for customers with Software Assurance licenses, which helps maximize the value of existing on-premises Windows Server and/or SQL Server license investments when migrating to Azure."]}),"\n",(0,t.jsxs)(n.p,{children:["Eligible customers can save up to 40% on Azure Virtual Machines ",(0,t.jsx)(n.em,{children:"(infrastructure as a service, or IaaS)"}),", and save up to 55% on Azure SQL Database ",(0,t.jsx)(n.em,{children:"(platform as a service, or PaaS)"})," and SQL Server on Azure Virtual Machines ",(0,t.jsx)(n.em,{children:"(IaaS)"})," with Azure Hybrid Benefit, which increases to up to 80% when combined with Azure Reserved Instances."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Azure - Hybrid Use Benefit",src:s(13860).A+"",title:"Azure - Hybrid Use Benefit",width:"1001",height:"164"})}),"\n",(0,t.jsx)(n.p,{children:"To verify if a server is using the Azure Hybrid Benefit, Log in to the Azure Portal and navigate to the Virtual Machine Blade. Make sure that the: OS Licensing Benefit column is selected."}),"\n",(0,t.jsxs)(n.p,{children:["If a Virtual Machine Already has HUB, it will have: The azure hybrid benefit listed in the column, and any non-supported workloads ",(0,t.jsx)(n.em,{children:"(such as Linux)"})," will have \u2018Not Supported\u2019."]}),"\n",(0,t.jsx)(n.p,{children:"If any are eligible for HUB, click on the Virtual Machine\u2026"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Click the ",(0,t.jsx)(n.strong,{children:"Configuration blade"})]}),"\n",(0,t.jsxs)(n.li,{children:["Select ",(0,t.jsx)(n.strong,{children:"Licensing, Already have a Windows server license?"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Yes"})," and ",(0,t.jsx)(n.strong,{children:"Save"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"Note: This is a non-intrusive change that will take effect on the billing immediately and doesn\u2019t cause any impact on the Virtual Machine."})}),"\n",(0,t.jsx)(n.h4,{id:"review-backups",children:"Review Backups"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/azure/backup/backup-overview?WT.mc_id=AZ-MVP-5004796",title:"Azure Backup",children:"Azure Backup"})," is simple because it\u2019s built into the platform. It has one-click backup support for SQL databases and virtual machines running in Azure."]}),"\n",(0,t.jsx)(n.p,{children:"Azure Backup is cost-effective and less complex than other cloud backup solutions while keeping your data safe from ransomware and human errors. Sometimes there will be workloads backed up to migrate, test, or clone, and you no longer need to retain the data."}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Note: This can be a tricky one as you will need to talk to product owners to confirm the workloads were just Dev/Test workloads, and not required, there may be legal implications for keeping workloads in the backup. But if someone stood up something to play with, particularly in a Sandbox or Development subscription there may not be a reason to keep it around."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Log in to the Azure Portal and navigate the ",(0,t.jsx)(n.a,{href:"https://portal.azure.com/#blade/HubsExtension/BrowseResourceBlade/resourceType/Microsoft.RecoveryServices%2Fvaults",title:"Azure Portal - Recovery Services",children:"Recovery Services Vault"})," page. Navigate to each one and click on:"]}),"\n",(0,t.jsx)(n.p,{children:"Backup:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Under ",(0,t.jsx)(n.strong,{children:"Usage"}),", click on ",(0,t.jsx)(n.strong,{children:"Backup Items"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Click on ",(0,t.jsx)(n.strong,{children:"Azure Virtual Machines"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Sort"})," the ",(0,t.jsx)(n.strong,{children:"Backup"})," items by ",(0,t.jsx)(n.strong,{children:"Latest Restore Point"})," ",(0,t.jsx)(n.em,{children:"(so the older restore points are at the top)"})]}),"\n",(0,t.jsx)(n.p,{children:"Using the Latest Restore Point as a guide, IF any servers can have their Backups deleted:"}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Click on the ",(0,t.jsx)(n.strong,{children:"Name"})," of the Backup Item"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Click on ",(0,t.jsx)(n.strong,{children:"Stop Backup"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Select ",(0,t.jsx)(n.strong,{children:"Delete Backup Data"})," ",(0,t.jsx)(n.em,{children:"(this is non-reversible)"})]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Type in the name of the ",(0,t.jsx)(n.strong,{children:"Backup Item"})," and select ",(0,t.jsx)(n.strong,{children:"Stop Backup"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"review-unused-public-ips",children:"Review unused Public IPs"}),"\n",(0,t.jsx)(n.p,{children:"Public IP addresses allow Internet resources to communicate inbound to Azure resources. Public IP addresses enable Azure resources to communicate to the Internet and public-facing Azure services."}),"\n",(0,t.jsx)(n.p,{children:"This is also a great opportunity to inspect what Public IP addresses you have and make sure some resources have public IPs that does not need to be assigned! Tip setup an Azure Policy that prevents the creation of Public IPs."}),"\n",(0,t.jsx)(n.p,{children:"The address is dedicated to the resource until it\u2019s unassigned by you. A resource without a public IP assigned can communicate outbound. Azure dynamically assigns an available IP address that isn\u2019t dedicated to the resource."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Azure Portal - Public IP Address",src:s(52346).A+"",title:"Azure Portal - Public IP Address",width:"1063",height:"299"})}),"\n",(0,t.jsx)(n.p,{children:"When resources get created, sometimes they will create a Public IP; these can be removed as part of the build but left in the Resource Groups."}),"\n",(0,t.jsx)(n.p,{children:"We want to remove unattached Public IP to save money."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.em,{children:"Note: In some cases, the Product Owner may need to be consulted before any changes are made, as some of the resources may be inflight projects or required."})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Log in to the ",(0,t.jsx)(n.strong,{children:"Azure Portal"})," and navigate to the ",(0,t.jsx)(n.a,{href:"https://portal.azure.com/#blade/HubsExtension/BrowseResourceBlade/resourceType/Microsoft.Network%2FPublicIpAddresses",title:"Azure Portal - Public IP Address",children:"Public IP Addresses"})," blade"]}),"\n",(0,t.jsxs)(n.li,{children:["Look in the \u2018",(0,t.jsx)(n.strong,{children:"Associated to"}),"\u2019 column, and if not required, click on the ",(0,t.jsx)(n.strong,{children:"Public IP"})]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:"Delete"})]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"review-azure-storage-accounts",children:"Review Azure Storage Accounts"}),"\n",(0,t.jsx)(n.p,{children:"An Azure storage account contains all your Azure Storage data objects: blobs, files, queues, tables, and disks. Your Azure storage account's data is durable, highly available, secure, and massively scalable."}),"\n",(0,t.jsx)(n.p,{children:"General-purpose storage accounts may be configured for either of the following performance tiers:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"A standard performance tier for storing blobs, files, tables, queues, and Azure virtual machine disks."}),"\n",(0,t.jsxs)(n.li,{children:["A premium performance tier for storing unmanaged virtual machine disks. If a Storage account is Premium but only needs to be Standard ",(0,t.jsx)(n.em,{children:"(or LRS instead of ZRS)"}),", this can save some money."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Note: In some cases, the Product Owner may need to be consulted before any changes are made, as some of the resources may be inflight projects or required."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Log in to the ",(0,t.jsx)(n.strong,{children:"Azure Portal"})," and navigate to the ",(0,t.jsx)(n.a,{href:"https://portal.azure.com/#blade/HubsExtension/BrowseResource/resourceType/Microsoft.Storage%2FStorageAccounts",title:"Azure Portal - Storage account",children:(0,t.jsx)(n.strong,{children:"Storage Account"})})," blade"]}),"\n",(0,t.jsxs)(n.li,{children:["Click on ",(0,t.jsx)(n.strong,{children:"Manage View"}),", ",(0,t.jsx)(n.strong,{children:"Edit Columns"}),", and add in: ",(0,t.jsx)(n.strong,{children:"SKU"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Review"})," the ",(0,t.jsx)(n.strong,{children:"Premium"})," Storage ",(0,t.jsx)(n.strong,{children:"Accounts"})," and determine if any accounts need to be downsized to Standard"]}),"\n",(0,t.jsxs)(n.li,{children:["To ",(0,t.jsx)(n.strong,{children:"change"}),", click on the ",(0,t.jsx)(n.strong,{children:"Storage Account"})]}),"\n",(0,t.jsxs)(n.li,{children:["Click on ",(0,t.jsx)(n.strong,{children:"Configuration"})," and change from ",(0,t.jsx)(n.strong,{children:"Premium"})," to ",(0,t.jsx)(n.strong,{children:"Standard"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"You can also look at the Replication. Does that Storage Account need to be Geo-Redundant if the rest of the application that uses it isn\u2019t? Can the storage account be changed to Standard during off-hours or non-peak?"}),"\n",(0,t.jsx)(n.h4,{id:"--download-the-pdf-version-of-these-tasks",children:"- Download the PDF version of these Tasks"}),"\n",(0,t.jsxs)(n.p,{children:['Finally, if you prefer this in a more PDF/Visual format - you can download a PDF version of this directly from my Github "',(0,t.jsx)(n.a,{href:"https://github.com/lukemurraynz/presentations/blob/main/2022/Microsoft%20Azure%20-%20Cost%20Optimization_1.0.pdf",title:"Azure Cost Optimization PDF",children:"here"}),'".']}),"\n",(0,t.jsx)(n.h4,{id:"--azure-operational-checklist-table",children:"- Azure Operational Checklist table"}),"\n",(0,t.jsx)(n.p,{children:"This is a very quick example of what an Azure Operational Checklist could look like; if you record what tasks you do, you can look at further automation around implementation and reporting."}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:(0,t.jsx)(n.strong,{children:"Azure Checklist"})}),(0,t.jsx)(n.th,{children:"****"}),(0,t.jsx)(n.th,{children:"****"}),(0,t.jsx)(n.th,{children:"****"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Action"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Status"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Date"})}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Note/Opportunity"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Review Azure App Service Plans"})}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Review shutdown workloads"})}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Review Azure Advisor"})}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Review Azure SQL Databases"})}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Review Azure Reserved Instances"})}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Review unused files and VHDs"})}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Review budgets"})}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Review Tags"})}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Review Hub (Hybrid Use Benefit)"})}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Review Backups"})}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Review unused Public IPs"})}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Review Azure Storage Accounts"})}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{}),(0,t.jsx)(n.td,{})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},44895:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/azure-ri-ff13bd54c31dbee751f74fbe6d8a92f3.png"},3837:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/azure_budget-9f4f49aa6ee0a6fb9e04e6c9a0b2f8b9.png"},78594:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/azureblogstglifecyclemgmnt-71c283b9ac9b5a7105a08a426a9c5c5f.PNG"},11642:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/cost_pillar_overview-2a68c172e37114f4927ee69bdcb495db.png"},13860:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/operationaltasks_hub-2e8e011e86056038cf14b1c8a38b3c4b.png"},52346:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/operationaltasks_pip-9fa4bd529ba9db30b7ec775a91f661e4.png"},44872:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/images/operrationaltasksazuretags-a4781c0036a184bdc786c70af4c0a2f1.png"},28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var t=s(96540);const r={},i=t.createContext(r);function o(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);