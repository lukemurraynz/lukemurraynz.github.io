<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">173 posts tagged with &quot;Azure&quot; | luke.geek.nz</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://luke.geek.nz/img/social-card.png"><meta data-rh="true" name="twitter:image" content="https://luke.geek.nz/img/social-card.png"><meta data-rh="true" property="og:url" content="https://luke.geek.nz/tags/azure/page/30/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="173 posts tagged with &quot;Azure&quot; | luke.geek.nz"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://luke.geek.nz/tags/azure/page/30/"><link data-rh="true" rel="alternate" href="https://luke.geek.nz/tags/azure/page/30/" hreflang="en"><link data-rh="true" rel="alternate" href="https://luke.geek.nz/tags/azure/page/30/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://ZBH2T1WJQD-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="luke.geek.nz RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="luke.geek.nz Atom Feed">
<link rel="alternate" type="application/json" href="/feed.json" title="luke.geek.nz JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0QDLBY7NNN"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-0QDLBY7NNN",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.a8967c60.css">
<script src="/assets/js/runtime~main.d3568b44.js" defer="defer"></script>
<script src="/assets/js/main.3f806bba.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#D3D3D3" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">If you haven't already, make sure you sign up for my Weekly Azure updates Newsletter, straight to your inbox! <a target="_blank" rel="noopener noreferrer" href="https://newsletter.azurefeeds.com/join">Subscribe now!</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="luke.geek.nz" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="luke.geek.nz" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">luke.geek.nz</b></a><a class="navbar__item navbar__link" href="/Tags/">Tags</a><a class="navbar__item navbar__link" href="/Archive/">Blog</a><a class="navbar__item navbar__link" href="/about/">About</a></div><div class="navbar__items navbar__items--right"><a href="https://www.youtube.com/channel/UCUG3TKDTAZz4UXshGrjBBoQ" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-icon" aria-label="YouTube">
              <svg width="24" height="24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M23.498,6.186c-0.273-1.186-1.143-2.144-2.332-2.417C18.389,3.153,12,3.153,12,3.153s-6.389,0-9.166,0.616
                  c-1.19,0.273-2.06,1.23-2.332,2.417C0,8.07,0,12,0,12s0,3.93,0.502,5.814c0.272,1.187,1.142,2.062,2.332,2.335
                  C5.611,20.847,12,20.847,12,20.847s6.389,0,9.166-0.698c1.189-0.273,2.059-1.148,2.332-2.335C24,15.93,24,12,24,12
                  S24,8.07,23.498,6.186z M9.545,15.568V8.432l6.545,3.568L9.545,15.568z"/>
              </svg>
            </a><a href="https://aus.social/@lukemurray" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-icon" aria-label="Mastodon">
              <svg height="20" width="20" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" xml:space="preserve">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                  <path d="M21.327 8.566c0-4.339-2.843-5.61-2.843-5.61-1.433-.658-3.894-.935-6.451-.956h-.063c-2.557.021-5.016.298-6.45.956 0 0-2.843 1.272-2.843 5.61 0 .993-.019 2.181.012 3.441.103 4.243.778 8.425 4.701 9.463 1.809.479 3.362.579 4.612.510 2.268-.126 3.541-.809 3.541-.809l-.075-1.646s-1.621.511-3.441.449c-1.804-.062-3.707-.194-3.999-2.409a4.523 4.523 0 0 1-.04-.621s1.77.433 4.014.536c1.372.063 2.658-.08 3.965-.236 2.506-.299 4.688-1.843 4.962-3.254.434-2.223.398-5.424.398-5.424zm-3.353 5.59h-2.081V9.057c0-1.075-.452-1.62-1.357-1.62-1 0-1.501.647-1.501 1.927v2.791h-2.069V9.364c0-1.28-.501-1.927-1.502-1.927-.905 0-1.357.546-1.357 1.62v5.099H6.026V8.903c0-1.074.273-1.927.823-2.558.566-.631 1.307-.955 2.228-.955 1.065 0 1.872.409 2.405 1.228l.518.869.519-.869c.533-.819 1.34-1.228 2.405-1.228.92 0 1.662.324 2.228.955.549.631.822 1.484.822 2.558v5.253z"></path>
                </g>
              </svg>
            </a><a href="https://bsky.app/profile/lukemurraynz.bsky.social" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-icon" aria-label="Bluesky">
              <svg class="octicon" xmlns="http://www.w3.org/2000/svg" role="img" viewBox="0 0 16 16" height="20" width="20" fill="currentColor">
                <title>Bluesky</title>
                <path d="M8 7.2c-.72-1.4-2.7-4.04-4.53-5.33C1.7.63 1.04.84.6 1.04.1 1.27 0 2.05 0 2.51c0 .46.25 3.77.42 4.32.54 1.82 2.47 2.45 4.25 2.25-2.6.38-4.92 1.33-1.88 4.71 3.33 3.46 4.57-.74 5.21-2.87.64 2.13 1.37 6.18 5.16 2.87 2.84-2.87.78-4.33-1.83-4.71 1.78.2 3.71-.43 4.25-2.25.17-.55.42-3.86.42-4.32 0-.46-.09-1.24-.6-1.47-.44-.2-1.11-.42-2.87.83A17.87 17.87 0 0 0 8 7.2Z"></path>
              </svg>
            </a><a href="https://twitter.com/lukemurraynz" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-icon" aria-label="X"><svg height="20" width="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 8.586l4.293-4.293a1 1 0 011.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 011.414-1.414L10 8.586z" clip-rule="evenodd"/>
          </svg></a><a href="https://www.linkedin.com/in/ljmurray/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-icon" aria-label="LinkedIn"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"></path></svg></a><a href="https://luke.geek.nz/rss" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-rss-link" aria-label="RSS"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite" aria-pressed="true"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2025</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/azure/sftp-event-hub-function/">Processing SFTP Events with Azure Function and Event Hub</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/azure/mcp-acs-email-integration/">Sending Emails with MCP and Azure Communication Services</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/azure/business-critical-workloads/">Understanding Workload Criticality in the Cloud</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/azure/github-codespaces-azure-devops-repo/">How to Use GitHub Codespaces with Azure DevOps Repositories</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/azure/azure-landing-zone-accelerator/">Deploying Azure Landing Zones with the Terraform Accelerator</a></li></ul></div></nav></aside><main class="col col--7"><header class="margin-bottom--xl"><h1>173 posts tagged with &quot;Azure&quot;</h1><a href="/tags/">View All Tags</a></header><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/2021/07/10/configure-azure-virtual-desktop-monitoring-insights/">Configure Azure Virtual Desktop Monitoring Insights</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-07-10T00:00:00.000Z">July 10, 2021</time> · <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://luke.geek.nz" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://luke.geek.nz/img/logo.png" alt="Luke Murray"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://luke.geek.nz" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Luke Murray</span></a></div><small class="authorTitle_nd0D" title="Author">Author</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div class="markdown"><p>Microsoft has now added a built-in Monitoring workbook for Azure Virtual Desktop performance monitoring; this monitoring includes dashboards related <em>(but not limited to)</em>:</p>
<ul>
<li>Session host diagnostics</li>
<li>Connection performance</li>
<li>Host performance</li>
<li>User login events</li>
<li>Remote Desktop client versions</li>
</ul>
<p>To configure, we first need to create a Log Analytics workspace that both the Host Pool and Workspace will connect to.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-log-analytics-workspace">Create a Log Analytics workspace<a href="#create-a-log-analytics-workspace" class="hash-link" aria-label="Direct link to Create a Log Analytics workspace" title="Direct link to Create a Log Analytics workspace">​</a></h3>
<p>You can use a Log Analytics workspace if it already exists; if not, we will have to create one.</p>
<ol>
<li>Log in to the <strong>Azure Portal</strong></li>
<li>Click on + <strong>Create a Resource</strong></li>
<li>Search for: <strong>Log Analytics workspace</strong></li>
<li>Click <strong>Create</strong></li>
<li><img decoding="async" loading="lazy" alt="Azure Portal - Log Analytics Marketplace" src="/assets/images/azportal_loganalyticsworkspace-1731c847286b3b7f27cfe4cd5b15db61.png" title="Azure Portal - Log Analytics Marketplace" width="991" height="500" class="img_ev3q"></li>
<li>Here we can <strong>select</strong> the <strong>Resource Group</strong>, <strong>Name</strong> and <strong>Location</strong> of the Log Analytics workspace we will create.</li>
<li>I am going to <strong>create</strong> a new <strong>Resource Group</strong> called: aad_mgmt</li>
<li>I click Create New and <strong>enter</strong> in the <strong>name</strong> of the <strong>Resource Group</strong></li>
<li>Under Instance Details, make sure you select a name that adheres to your naming governance.</li>
<li><em>Note: the name of your Log Analytics workspace is now scoped to the Resource Group, so you can have Log Analytics workspaces with the same name, as long as they are indifferent resource groups.</em></li>
<li><img decoding="async" loading="lazy" alt="Azure Portal - Create Log Analytics" src="/assets/images/azportal_createloganalyticsworkspace-de7ccc210cfbffca60f38cbf97d55e97.png" title="Azure Portal - Create Log Analytics" width="725" height="663" class="img_ev3q"></li>
<li>Click on: <strong>Next: Pricing Tier</strong></li>
<li><strong>Select</strong> the applicable <strong>pricing tier</strong>, I only have Pay-as-you-go (Per GB 2018), so I will select that.</li>
<li><em>Note: You can view the Pricing for Log Analytics on the</em> <a href="https://azure.microsoft.com/en-us/pricing/details/monitor/?WT.mc_id=AZ-MVP-5004796," target="_blank" rel="noopener noreferrer" title="Azure Pricing Calculator - Azure Monitor"><em>Pricing Calculator</em></a><em>:  look at the Pay-As-You rates.</em></li>
<li><img decoding="async" loading="lazy" alt="Azure Portal - Create Log Analytics" src="/assets/images/azportal_createloganalyticsworkspacepricing-82e82e4f329bb29622867177b614e4f7.png" title="Azure Portal - Create Log Analytics" width="743" height="349" class="img_ev3q"></li>
<li>Click <strong>Next: Tags</strong></li>
<li><strong>Enter</strong> in any <strong>applicable tags</strong>, such as Creator, Who it may get billed to, Project ID etc. that’s relevant and select <strong>Review + Create</strong></li>
<li><strong>Review</strong> the <strong>configuration</strong> and click <strong>Create</strong> to create your Log Analytics workspace! <em>(It should take less than a minute.</em>)</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-azure-virtual-desktop-insights">Configure Azure Virtual Desktop Insights<a href="#configure-azure-virtual-desktop-insights" class="hash-link" aria-label="Direct link to Configure Azure Virtual Desktop Insights" title="Direct link to Configure Azure Virtual Desktop Insights">​</a></h3>
<ol>
<li>
<p>Log in to the <strong>Azure Portal</strong></p>
</li>
<li>
<p><strong>Search</strong> for: <strong>Azure Virtual Desktop</strong></p>
</li>
<li>
<p>Click on <a href="https://portal.azure.com/#blade/Microsoft_Azure_WVD/WvdManagerMenuBlade/insights" target="_blank" rel="noopener noreferrer" title="Azure Virtual Desktop - Insights"><strong>Insights</strong></a></p>
</li>
<li>
<p>A Workbook blade should now greet you</p>
</li>
<li>
<p>This is where we will <strong>configure</strong> the Azure Virtual Desktop <strong>Insights</strong>. You can see on the lower right-hand side that we will be deploying Azure Monitor for &#x27;Windows Virtual Desktop v1.0.4&#x27; <em>(however, this will be managed by Microsoft, but it is handy to know the version in case of support later on).</em></p>
</li>
<li>
<p><img decoding="async" loading="lazy" alt="Azure Virtual Desktop - Insights" src="/assets/images/azportal_azurevirtualdesktop_insights-dfb15951312d5bd19cec3a739675b4e9.png" title="Azure Virtual Desktop - Insights" width="1700" height="672" class="img_ev3q"></p>
</li>
<li>
<p>Click on <strong>Open Configuration Workbook</strong></p>
</li>
<li>
<p>Here, <strong>select</strong> the Log Analytics <strong>workspace</strong> you created earlier <em>(or want to use)</em></p>
</li>
<li>
<p>Select <strong>Configure host pool</strong></p>
</li>
<li>
<p><img decoding="async" loading="lazy" alt="Azure Virtual Desktop - Insights" src="/assets/images/azportal_azurevirtualdesktopcheckconfiguration-f0789585b303fa6f001d9178b019d839.png" title="Azure Virtual Desktop - Insights" width="925" height="997" class="img_ev3q"></p>
</li>
<li>
<p>Click on <strong>Deploy</strong> <em>(make sure all your Session Hosta are started so that Azure can deploy and configure the Log Analytics agent on the Virtual Machines)</em></p>
</li>
<li>
<p>You can select View Template and Parameters if you want to confirm the host pool and workspace configured.</p>
</li>
<li>
<p><img decoding="async" loading="lazy" alt="Azure Virtual Desktop - Insights" src="/assets/images/azportal_azurevirtualdesktophostpooldeploy-12850b5994f383071022cfd6189a7543.png" title="Azure Virtual Desktop - Insights" width="408" height="309" class="img_ev3q"></p>
</li>
<li>
<p>While the Diagnostic host pool settings are being configured, click on <strong>Configure workspace.</strong></p>
</li>
<li>
<p>Click on: <strong>Deploy</strong></p>
</li>
<li>
<p>Once the Workspace and Host Pool deployments are done, click on <strong>Refresh.</strong></p>
</li>
<li>
<p><img decoding="async" loading="lazy" alt="Azure Virtual Desktop - Insights" src="/assets/images/azportal_azurevirtualdesktopcheckconfigrefresh-8a31df74f32458c5c1adfe8218f3426b.png" title="Azure Virtual Desktop - Insights" width="621" height="142" class="img_ev3q"></p>
</li>
<li>
<p><strong>Confirm</strong> that <strong>Enabled</strong> is: True</p>
</li>
<li>
<p><img decoding="async" loading="lazy" alt="Azure Virtual Desktop" src="/assets/images/azportal_azurevirtualdesktopcheckconfig-f6b7bf16a6e99d7367517c0ee4496bb0.png" width="1260" height="734" class="img_ev3q"></p>
</li>
<li>
<p>The journey is not over yet; now that the Host Pool and Workspace have been configured, we need to <strong>add</strong> the <strong>Session Hosts</strong> and configure the <strong>performance counters</strong> to the same workspace!</p>
</li>
<li>
<p>Click on: <strong>Session host data settings.</strong></p>
</li>
<li>
<p><strong>Select</strong> your Log Analytics <strong>workspace</strong></p>
</li>
<li>
<p>Select <strong>Add hosts to workspace</strong></p>
</li>
<li>
<p><img decoding="async" loading="lazy" alt="Azure Virtual Desktop" src="/assets/images/azportal_sessionhostdatasettings-a761143019816a6cc5e3d73bec9d1b1c.png" width="955" height="578" class="img_ev3q"></p>
</li>
<li>
<p>Confirm the Deployment and click <strong>Deploy</strong></p>
</li>
<li>
<p><strong>Wait until</strong> the <strong>deployment</strong> has <strong>succeeded,</strong> or you may get API errors, then select:</p>
</li>
<li>
<p>Navigate down and click <strong>Configure performance counters</strong></p>
</li>
<li>
<p><img decoding="async" loading="lazy" alt="Azure Virtual Desktop" src="/assets/images/azportal_performancecounterssettings-6cf5bc872a2bc3942fb88a172ea99dcd.png" width="1141" height="597" class="img_ev3q"></p>
</li>
<li>
<p>Click on <strong>Apply</strong> config.</p>
</li>
<li>
<p><strong>Wait until</strong> the <strong>deployment</strong> has <strong>succeeded,</strong> or you may get API errors, then select:</p>
</li>
<li>
<p>Navigate down and click on <strong>Configure events</strong></p>
</li>
<li>
<p><img decoding="async" loading="lazy" alt="Azure Virtual Desktop" src="/assets/images/azportal_eventlogssettings-673f0134884b13d12f45ee37eac9e2a2.png" width="1347" height="631" class="img_ev3q"></p>
</li>
<li>
<p>Click on <strong>Deploy</strong></p>
<p>Now click on: <strong>Refresh</strong>, and you should see &#x27;No missing performance counters&#x27;, &#x27;No missing events found&#x27;.</p>
</li>
<li>
<p><img decoding="async" loading="lazy" alt="Azure Virtual Desktop" src="/assets/images/azportal_performancecountersreview-ae75b48856a1e45f3e90086cfbab7187.png" width="1506" height="875" class="img_ev3q"></p>
</li>
<li>
<p><strong>You have now configured Azure Virtual Desktop Insights!</strong></p>
<p><em>It may take a few minutes to an hour to populate and collect the data for some of the events and counters.</em></p>
</li>
<li>
<p><img decoding="async" loading="lazy" alt="Azure Virtual Desktop" src="/assets/images/azportal_azurevirtualdesktopinsights-16a5d47b37970b66136cbd3e5f590764.png" width="1576" height="792" class="img_ev3q"></p>
<p><em>On the plus side, all the data is also in Log Analytics so that it can be queried, and you can set up Alert rules against it and get more visibility into your Azure Virtual Desktop environment and use.</em></p>
<p><img decoding="async" loading="lazy" alt="Azure Virtual Desktop" src="/assets/images/azportal_azurevirtualdesktoploganalytiicsquery-49377adee1c7434d0b3a37d4735c5d42.png" width="1694" height="990" class="img_ev3q"></p>
</li>
</ol></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/azure/">Azure</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/2021/07/10/how-to-create-a-free-log-analytics-workspace/">How to create a Free Azure Log Analytics Workspace using PowerShell</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-07-10T00:00:00.000Z">July 10, 2021</time> · <!-- -->2 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://luke.geek.nz" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://luke.geek.nz/img/logo.png" alt="Luke Murray"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://luke.geek.nz" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Luke Murray</span></a></div><small class="authorTitle_nd0D" title="Author">Author</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div class="markdown"><p>When you create a Log Analytics workspace using the Azure Portal, you only get the Pricing or &#x27;Pay-as-you-go&#x27; tiers to select.</p>
<p>You used to create a &#x27;Free&#x27; tier using the Azure Portal; however, since 2018; they removed it with a change in plans and it became a legacy offering.</p>
<p>However, using PowerShell, you can still create a Log Analytics Free SKU!</p>
<blockquote>
<p>The Free pricing tier is a <a href="https://learn.microsoft.com/en-us/azure/azure-monitor/logs/cost-logs?WT.mc_id=AZ-MVP-5004796#legacy-pricing-tiers" target="_blank" rel="noopener noreferrer">legacy pricing tier</a> that is available for trying Azure Log Analytics. It has a data cap of 500 MB/day and only 7 days of data retention, so it is intended only for testing and is not to be used for production deployments.</p>
</blockquote>
<p>You can change a Free Tier Log Analytics workspace to a Pay-as-you-go or commitment tier later.</p>
<p>You cannot change a Log Analytics workspace created on a higher tier back to Free, even using PowerShell, due to <a href="https://azure.microsoft.com/en-us/blog/introducing-a-new-way-to-purchase-azure-monitoring-services/?WT.mc_id=AZ-MVP-5004796" target="_blank" rel="noopener noreferrer" title="Introducing a new way to purchase Azure monitoring services">adjustments</a> in 2018 around the Log Analytics billing and plans.</p>
<p><img decoding="async" loading="lazy" alt="Azure Log Analytics - Free" src="/assets/images/log_analytics_free-e00e30f4763f8c161fd71b3089786959.png" width="1403" height="246" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-free-tier-log-analytics-using-powershell">Create a &#x27;Free Tier&#x27; Log Analytics using PowerShell<a href="#create-a-free-tier-log-analytics-using-powershell" class="hash-link" aria-label="Direct link to Create a &#x27;Free Tier&#x27; Log Analytics using PowerShell" title="Direct link to Create a &#x27;Free Tier&#x27; Log Analytics using PowerShell">​</a></h2>
<p>Change the script&#x27;s variables below to suit your environment, connect to Azure and run the script to create your Log Analytics workspace.</p>
<p>Note: I tested this script on an MSDN subscription, which I&#x27;ve had for a few years and a recent one created a few months back <em>(2021)</em>, but there may be limitations on other subscription types that I haven&#x27;t tested <em>- see blurb below the script</em>.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">#Connect to Azure</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Connect-AzAccount</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#Set Variables</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$ResourceGroup = &#x27;aad_mgmt&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$Location = &#x27;australiaeast&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$LogAnalyticsName = &#x27;la-free&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$SKU = &#x27;Free&#x27;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#Creates Log Analytics Workspace</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">New-AzOperationalInsightsWorkspace -Location $Location -Name $LogAnalyticsName -Sku $SKU -ResourceGroupName $ResourceGroup</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>If you get an error: Error Message: Pricing tier doesn&#x27;t match the subscription&#x27;s billing model. Read <a href="http://aka.ms/PricingTierWarning" target="_blank" rel="noopener noreferrer" title="http://aka.ms/PricingTierWarning?WT.mc_id=AZ-MVP-5004796#moving-to-the-new-pricing-model">http://aka.ms/PricingTierWarning</a> for more details, unfortunately it means that your Subscription is under a different Billing model, and may have been created recently are you are unable to use the &#x27;Free&#x27; tier, instead you may have to create it using &#x27;standard&#x27; instead.</p>
</blockquote>
<p><img decoding="async" loading="lazy" alt="Azure Log Analytics - Free" src="/assets/images/log_analytics_free_tier-4d081be6f32051641bc832cade388f62.png" width="980" height="981" class="img_ev3q"></p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/azure/">Azure</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/2021/07/10/how-to-set-a-log-analytics-data-cap/">How to set a Log Analytics Daily Data Cap</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-07-10T00:00:00.000Z">July 10, 2021</time> · <!-- -->One min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://luke.geek.nz" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://luke.geek.nz/img/logo.png" alt="Luke Murray"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://luke.geek.nz" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Luke Murray</span></a></div><small class="authorTitle_nd0D" title="Author">Author</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div class="markdown"><p>This is just an additional configuration that may help with sizing and pricing Log Analytics, you can set a &#x27;Daily cap&#x27; for the amount of Data you ingest <strong><em>per day</em></strong>, to help restrict cost.</p>
<p>The downside of this is if you reach the cap, you will no longer collect any data, until the following day, meaning you may miss key events or issues.</p>
<p>This is something that I would recommend ONLY to do if you run into any financial constraints, giving you more time time to work through, of course, situation depending.</p>
<p>This is a pretty quick &#x27;How To&#x27; so let&#x27;s get straight into it:</p>
<ol>
<li>Log in to the <strong>Azure Portal</strong></li>
<li>Search for your Log Analytics Workspace</li>
<li>Select <strong>Usage and estimated costs</strong></li>
<li>Click on <strong>Daily Cap</strong></li>
<li><strong>Set</strong> your <strong>cap</strong> in <strong>GB</strong> <em>(I put 0.166 as my thinking was 5GB per free each month, so 166MB a day, should cap my Log Analytics workspace, although useful for this demo/lab, it&#x27;s not a number I would recommend for Production)</em></li>
<li>Click <strong>Ok</strong></li>
</ol>
<p><img decoding="async" loading="lazy" alt="Log Analytics - Set Daily Cap" src="/assets/images/azportal_loganalyticscap-16aab9a1084af0f510327b973ba34187.png" title="Log Analytics - Set Daily Cap" width="1689" height="634" class="img_ev3q"></p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/azure/">Azure</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/2021/07/06/create-custom-roles-for-microsoft-azure/">Create Custom Roles for Microsoft Azure</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-07-06T00:00:00.000Z">July 6, 2021</time> · <!-- -->12 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://luke.geek.nz" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://luke.geek.nz/img/logo.png" alt="Luke Murray"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://luke.geek.nz" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Luke Murray</span></a></div><small class="authorTitle_nd0D" title="Author">Author</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div class="markdown"><p>Microsoft Azure uses Role&#x27;s to define who can access what - Role-Based Access Control (<em>RBAC)</em>.</p>
<p>You may be familiar with some of the more common ones, such as:</p>
<ul>
<li>Owner</li>
<li>Contributor</li>
<li>Reader</li>
</ul>
<p>Behind the scenes, each role is a separate grouping of permissions that determine what level of permissions someone or something has in Azure; these permissions are usually in the form of:</p>
<ul>
<li>Read</li>
<li>Write</li>
<li>Delete</li>
<li>Action</li>
</ul>
<p>Each role can be assigned to a specific Resource, Subscription, Management Group or Resource Group through an &#x27;Assignment&#x27; <em>(you assign a role if you give someone Contributor rights to a Resource Group, for example)</em>.</p>
<p>These permissions can be manipulated and custom roles created.</p>
<blockquote>
<p>Why would you use custom roles you ask? As usual - it depends!</p>
</blockquote>
<p>Custom Roles can give people or objects JUST the right amount of permissions to do what they need to do, nothing more and nothing less, an example of this is maybe you are onboarding a support partner, if they are will only be supporting your Logic Apps, WebApps and Backups, you may not want them to be able to log support cases for your Azure resources; instead of attempting to mash several roles together that may give more or fewer rights than you need, you can create a custom role that specifically gives them what they need, you can then increase or decrease the permissions as needed, however, if a built-in role already exists for what you want. There is no need to reinvent the wheel, so use it!</p>
<p>I will run through a few things to help arm you understand and build your own Custom Roles, primarily using PowerShell.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-the-azure-powershell-modules">Install the Azure PowerShell Modules<a href="#install-the-azure-powershell-modules" class="hash-link" aria-label="Direct link to Install the Azure PowerShell Modules" title="Direct link to Install the Azure PowerShell Modules">​</a></h3>
<p>As a pre-requisite for the following, you need to install the Azure (Az) PowerShell Module. You can skip this section if you already have the PowerShell modules installed.</p>
<ol>
<li>
<p>Open <strong>Windows PowerShell</strong></p>
</li>
<li>
<p>Type <strong>in</strong>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Install-Module -Name Az -Scope CurrentUser -Repository PSGallery -Force</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>If you have issues <strong>installing</strong> the <strong>Azure PowerShell module</strong> - see the Microsoft documentation directly: Install the <a href="https://learn.microsoft.com/en-us/powershell/azure/install-az-ps?view=azps-7.5.0&amp;WT.mc_id=AZ-MVP-5004796" target="_blank" rel="noopener noreferrer" title="Install the Azure Az PowerShell module">Azure Az PowerShell module</a>.</p>
</li>
<li>
<p>Once you have the Azure PowerShell module installed, you can <strong>connect to</strong> your <strong>Azure</strong> subscription using the little snippet below:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">#Prompts for Azure credentials </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Connect-AzAccount</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">#Prompts Window allowing you to select which  Azure Subscription to connect to </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$subscriptionName = (Get-AzSubscription) | Out-GridView -Title &#x27;Select Azure Subscription&#x27; -PassThru | Set-AzContext -SubscriptionName $subscriptionName</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="export-built-in-azure-roles">Export Built-in Azure Roles<a href="#export-built-in-azure-roles" class="hash-link" aria-label="Direct link to Export Built-in Azure Roles" title="Direct link to Export Built-in Azure Roles">​</a></h3>
<p>One of the best ways to learn about how an Azure Role is put together is to look at the currently existing roles.</p>
<ol>
<li>
<p>The following PowerShell command will <strong>list</strong> all <strong>current</strong> Azure <strong>roles</strong>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Get-AzRoleDefinition</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>For a more human-readable view that <strong>lists</strong> the B<strong>uilt-in Azure roles and their descriptions,</strong> you can filter it by:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Get-AzRoleDefinition | Select-Object Name, Description</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>As you can see in the screenshot below, there are many various roles, from EventGrid Contributor to AgFood Platform Service and more! At the time of this article, there were 276 built-in roles.</p>
</li>
<li>
<p><img decoding="async" loading="lazy" alt="Azure Builtin Roles" src="/assets/images/az_roledefinitions-fff78907e8017f7dd46c24a57387e876.png" title="Azure Builtin Roles" width="1113" height="907" class="img_ev3q"></p>
</li>
<li>
<p>Now that we have successfully been able to pull a list of the existing roles, we will now <strong>export</strong> them as <strong>JSON</strong> files to take a proper look at them.</p>
</li>
<li>
<p>The PowerShell script below will create a few folders on your computer as a base to work from <em>(feel free to change the folders to suit your folder structure or access rights)</em>.</p>
<ul>
<li>c:\Temp</li>
<li>c:\Temp\AzureRoles</li>
<li>C:\Temp\AzureRoles\BuiltinExports\</li>
<li>C:\Temp\AzureRoles\CustomRoles</li>
</ul>
</li>
<li>
<p>Once the folders have been created, it will Get the Azure Role definitions and export them into JSON into the <strong>BuiltinExports folder</strong> to be reviewed.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">New-Item -ItemType Directory -Path c:\Temp -Force</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">New-Item -ItemType Directory -Path c:\Temp\AzureRoles -Force</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">New-Item -ItemType Directory -Path c:\Temp\AzureRoles\BuiltInExports -Force</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">New-Item -ItemType Directory -Path c:\Temp\AzureRoles\CustomRoles -Force</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$a = Get-AzRoleDefinition</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Foreach ($role in $a)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    $name = $role.Name</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    Get-AzRoleDefinition -Name ($role).Name | ConvertTo-Json | Out-File c:\Temp\AzureRoles\BuiltInExports\$name.json</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Once completed, you should now <strong>see</strong> the <strong>JSON files</strong> below:</p>
</li>
<li>
<p><img decoding="async" loading="lazy" alt="Azure Role - JSON files" src="/assets/images/az_exportroles-64761ffc82b21830748f99bbc45f2d9c.png" title="Azure Role - JSON files" width="803" height="356" class="img_ev3q"></p>
</li>
</ol>
<p><em>Although you can use Notepad, I recommend using</em> <a href="https://code.visualstudio.com/Download" target="_blank" rel="noopener noreferrer"><em>Visual Studio Code</em></a><em>to read these files. This is because Visual Studio Code will help with the syntax as well.</em></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="review-built-in-azure-roles">Review Built-in Azure Roles<a href="#review-built-in-azure-roles" class="hash-link" aria-label="Direct link to Review Built-in Azure Roles" title="Direct link to Review Built-in Azure Roles">​</a></h3>
<p>If you open one of the roles, I will open the Azure Digital Twins Data Owner role; however, it doesn&#x27;t matter.</p>
<p>You should see the following fields:</p>
<ul>
<li>Name</li>
<li>Id</li>
<li>IsCustom</li>
<li>Description</li>
<li>Actions</li>
<li>NotActions</li>
<li>DataActions</li>
<li>NotDataActions</li>
<li>AssignableScopes</li>
</ul>
<p>These fields make up your Role.</p>
<p><img decoding="async" loading="lazy" alt="Azure Role - JSON" src="/assets/images/az_rolereview_azdigitaltwinsdataowner-151b998cd27bc5f2f950093d17203c29.png" title="Azure Role - JSON" width="725" height="437" class="img_ev3q"></p>
<ul>
<li>
<p>The <strong>Name field</strong> is pretty self-explanatory - this is the name of the Azure Role and what you see in the Azure Portal, under Access control (IAM).</p>
</li>
<li>
<p><img decoding="async" loading="lazy" alt="Azure Portal - Role" src="data:image/png;base64,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" title="Azure Portal - Role" width="398" height="168" class="img_ev3q"></p>
</li>
<li>
<p>The same is true for the: <strong>Description</strong> <strong>field</strong>.</p>
<p><em>These are essential fields as they should tell the users what resource or resources the role is for and what type of access is granted.</em></p>
</li>
<li>
<p>The <strong>IsCustom field</strong> is used to determine if the Azure Role is a custom made policy or not; any user-created Role will be set to True, while any In-Built role will be False.</p>
</li>
<li>
<p>The <strong>Actions field</strong> is used to determine what management operations can be performed. However, the Azure Digital Twins role doesn&#x27;t have any (as it is mainly Data Action based) if we look at another Role such as the: Azure Kubernetes Service RBAC Admin role:</p>
<ul>
<li>&quot;&quot;Microsoft.Authorization/*/read&quot;,</li>
<li>&quot;Microsoft.Insights/alertRules/*&quot;,</li>
<li>&quot;Microsoft.Resources/deployments/write&quot;,</li>
</ul>
<p>You can see that it has the rights to Read the permissions, create and delete any Alert rules and update resources.</p>
</li>
<li>
<p>The <strong>NotActions field</strong> is used to exclude anything from the Allowed actions</p>
</li>
<li>
<p>The <strong>DataActions field</strong> allows you to determine what data operations can be performed. Usually, these are sub-resource tasks, where management or higher-level operations are performed in the Actions field, more specific resource actions are performed in the DataActions field.</p>
<p>The NotDataActions field is used to exclude anything from the Allowed actions in the DataActions</p>
</li>
</ul>
<p>To help get a feel of the differences with the Actions, here is a list of Actions and DataActions for the Azure Kubernetes Service RBAC Admin role:</p>
<ul>
<li><img decoding="async" loading="lazy" alt="Azure Custom Role - JSON" src="/assets/images/az_rolereview_azkuberservicerbacactions-07a6afc5bb072ae8da4a212b4cb59b06.png" title="Azure Custom Role - JSON" width="625" height="366" class="img_ev3q"></li>
<li>And finally, the <strong>AssignableScopes</strong> is used to specify where the role will be available for assignment, whether it can be assigned at a subscription or resource group or management group level. You will notice that most if not all built-in Azure Roles have an Assignable scope of &quot;/&quot; - this means that it can be assigned everywhere <em>(Subscriptions, Resource Groups, Management Groups etc.).</em></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="review-azure-provider-namespaces">Review Azure Provider Namespaces<a href="#review-azure-provider-namespaces" class="hash-link" aria-label="Direct link to Review Azure Provider Namespaces" title="Direct link to Review Azure Provider Namespaces">​</a></h3>
<p>You may have noticed that each Action has a provider. In the example of a Virtual Machine, the provider is Microsoft.Compute.</p>
<ol>
<li>
<p>To get a <strong>list</strong> of all <strong>current Providers,</strong> run the following command:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Get-AzProviderOperation | Select-Object ProviderNamespace -Unique</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>At the time of writing, there are 198 current Providers! So that&#x27;s 198 providers or overall buckets of resources that has permissions over.</p>
</li>
<li>
<p>We can <strong>drill</strong> into a <strong>provider</strong> a bit <strong>further</strong> to check out current Operations:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Get-AzProviderOperation -Name Microsoft.Compute/*</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>This <strong>displays</strong> a <strong>list</strong> of <strong>all providers</strong> within the Microsoft.Compute namespace, such as (but definitely not limited to):</p>
<ol>
<li>Virtual machines</li>
<li>Virtual Machine Scale Sets</li>
<li>Locations</li>
<li>Disks</li>
<li>Cloud Services</li>
</ol>
</li>
<li>
<p>If we wanted to drill into the Virtual Machines <strong>providers</strong> a bit more, we could <strong>filter</strong> it like:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Get-AzProviderOperation -Name Microsoft.Compute/virtualMachines/*</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Here we can finally see the available actions, and for example, the following Action will allow you to Read the VM sizes available to a Virtual Machine:</p>
</li>
</ol>
<ul>
<li>Operation: Microsoft.Compute/virtualMachines/vmSizes/read</li>
<li>operation name: Lists Available Virtual Machine Sizes</li>
<li>ProviderNamespace: Microsoft Compute</li>
<li>ResourceName: Virtual Machine Size</li>
<li>Description: Lists available sizes the virtual machine can be updated to</li>
<li>IsDataAction      : False</li>
</ul>
<ol>
<li>
<p>You can use the PowerShell script below to export all the Providers and their Operations to a CSV for review:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">$Providers = Get-AzProviderOperation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$results = @()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ForEach ($Provider in $Providers) {</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    $results += [pscustomobject]@{</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &#x27;Provider NameSpace&#x27; = $Provider.ProviderNamespace</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Description          = $Provider.Description</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        &#x27;Operation Name&#x27;     = $Provider.OperationName</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        Operation            = $Provider.Operation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        ResourceName         = $Provider.ResourceName</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                        </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">}</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">$results | Export-csv c:\temp\AzureRBACPermissions.csv -NoTypeInformation</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<p>Using the namespace, providers and actions, you should now be able to see the power behind Role-based access control and how granular you can get.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-a-custom-role-using-powershell">Add a Custom Role using PowerShell<a href="#add-a-custom-role-using-powershell" class="hash-link" aria-label="Direct link to Add a Custom Role using PowerShell" title="Direct link to Add a Custom Role using PowerShell">​</a></h3>
<p>Now that we understand how to navigate the Namespaces and Built-In Roles available in Microsoft Azure using PowerShell, now we will create one.</p>
<p>I have created a base template to help you start.</p>
<p>This base template has the following fields that the majority of most custom roles will use:</p>
<ul>
<li>Name</li>
<li>IsCustom</li>
<li>Description</li>
<li>Actions</li>
<li>AssignableScopes <em>(make sure you put in the <subscriptionid> of your Azure subscription, you are assigning the role to.)</subscriptionid></em></li>
</ul>
<ol>
<li><strong>Edit</strong> these <strong>fields</strong> <em>(apart from IsCustom, which you should leave as True)</em> as you need.</li>
</ol>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">CustomRoleTemplate.json</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;properties&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;roleName&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Custom Role - Template&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;IsCustom&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;description&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;This is a Template for creating Custom Roles.&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;assignableScopes&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/subscriptions/&lt;SubscriptionID&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;permissions&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token property">&quot;actions&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Microsoft.Support/register/action&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Microsoft.Support/checkNameAvailability/action&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Microsoft.Support/operationresults/read&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Microsoft.Support/operationsstatus/read&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Microsoft.Support/operations/read&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Microsoft.Support/services/read&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Microsoft.Support/services/problemClassifications/read&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Microsoft.Support/supportTickets/read&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Microsoft.Support/supportTickets/write&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Microsoft.Resources/subscriptions/resourceGroups/read&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Microsoft.Resources/subscriptions/resourcegroups/resources/read&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token property">&quot;notActions&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token property">&quot;dataActions&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token property">&quot;notDataActions&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This Custom Role - Template allows you to read the name of all Resource Groups in a subscription and open a Microsoft Support case.</p>
<p>In my example, I am going to add a new role called:</p>
<ul>
<li>LukeGeek-WebApp Deployment-RW</li>
</ul>
<p>This role will allow users to Deploy and modify Azure WebApps, among other things!</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockTitle_Ktv7">LukeGeekWebDeployment-RW.json</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token property">&quot;properties&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;roleName&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Custom Role - Template&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;description&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;This is a Template for creating Custom Roles.&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">         </span><span class="token property">&quot;IsCustom&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;assignableScopes&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/subscriptions/&lt;SubscriptionID&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token property">&quot;permissions&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token property">&quot;actions&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Microsoft.Support/register/action&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Microsoft.Support/checkNameAvailability/action&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Microsoft.Support/operationresults/read&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Microsoft.Support/operationsstatus/read&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Microsoft.Support/operations/read&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Microsoft.Support/services/read&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Microsoft.Support/services/problemClassifications/read&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Microsoft.Support/supportTickets/read&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Microsoft.Support/supportTickets/write&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Microsoft.Resources/subscriptions/resourceGroups/read&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                    </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;Microsoft.Resources/subscriptions/resourcegroups/resources/read&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token property">&quot;notActions&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token property">&quot;dataActions&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                </span><span class="token property">&quot;notDataActions&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol>
<li>
<p>To <strong>add</strong> the <strong>Custom Role</strong> to Azure, I will <strong>run</strong> the following <strong>PowerShell</strong> command:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">New-AzRoleDefinition -InputFile &quot;C:\\temp\\AzureRoles\\CustomRoles\\LukeGeek-WebApp Deployment-RW.json&quot; -Verbose</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<p><strong>Your new Custom Role has now been uploaded to Azure and can be selected for an assignment.</strong></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-a-custom-role-using-the-azure-portal">Add a Custom Role using the Azure Portal<a href="#add-a-custom-role-using-the-azure-portal" class="hash-link" aria-label="Direct link to Add a Custom Role using the Azure Portal" title="Direct link to Add a Custom Role using the Azure Portal">​</a></h3>
<p>Now that we have been through and investigated the Azure roles and their providers and actions, instead of using PowerShell to look through and create manually, you can use the Azure Portal!</p>
<blockquote>
<p><em><em>Gasp!</em> Why didn&#x27;t you tell me earlier about this, Luke?</em></p>
<p><em>Well, fellow Azure administrator, I found it easier to look at PowerShell and JSON to explain how the Custom Roles were made, vs staring at the Azure Portal and to be honest, really just because! Like most things in IT there are multiple ways something can be done!</em></p>
</blockquote>
<ol>
<li>Log in to the <strong>Azure Portal</strong></li>
<li>Navigate to your <strong>Subscription</strong></li>
<li>Click on <strong>Access Control (IAM)</strong> on the left-hand side blade</li>
<li>Click on <strong>Add</strong></li>
<li>Click on <strong>Add Custom Role</strong></li>
<li>Type in the <strong>Role Name</strong>, for example, WebAdmin-RO</li>
<li>Type in a clear <strong>description</strong> so that you can remember what this role is used for in a year!</li>
<li>For Baseline permissions, select: <strong>Start from Scratch</strong></li>
<li>Click <strong>Next</strong></li>
<li>Click <strong>Add Permissions</strong></li>
<li>If you want, you can select: Download all permissions to review the providers and actions <em>(very similar to the Get-AzProviderOperation PowerShell command)</em>.<img decoding="async" loading="lazy" alt="Azure Portal - Create Custom Role" src="/assets/images/ad_role_addpermissions-0278703408d158c4db94a595c5fd2bde.png" title="Azure Portal - Create Custom Role" width="747" height="596" class="img_ev3q"></li>
<li>As you should <strong>see</strong>, all the <strong>Namespace providers</strong> are listed with the Actions/Permissions that you can do.</li>
<li>In my example, I am going to search for <strong>Microsoft Web Apps</strong></li>
<li><strong>Select</strong> all &#x27;<strong>Read</strong>&#x27; operations <em>(remember to look at Data Actions as well, there may be resource level actions you might want to allow or exclude)</em></li>
<li>Click <strong>Add</strong></li>
<li><img decoding="async" loading="lazy" alt="Azure Portal - Create Custom Role" src="/assets/images/ad_role_webpermissions-e018979c285f779b5e7e38270ed47f86.png" title="Azure Portal - Create Custom Role" width="1090" height="942" class="img_ev3q"></li>
<li>Review the permissions and click <strong>Next</strong></li>
<li><strong>Select</strong> your assignable <strong>scope</strong> <em>(where the Role will be allowed so that you can assign it)</em></li>
<li>Click <strong>Next</strong></li>
<li>You can <strong>review</strong> and download the JSON for backup later <em>(this is handy if you are going to Automate the creation of roles in the future and want a base to start from)</em></li>
<li>Click <strong>Next</strong></li>
<li>Click <strong>Create to create your Custom Role!</strong></li>
<li><img decoding="async" loading="lazy" alt="Azure Portal - Create Custom Role" src="/assets/images/ad_role_createcustomroleportal-d2a9ae3b4c8fd50d676e21ffebdae8c7.png" title="Azure Portal - Create Custom Role" width="1003" height="826" class="img_ev3q"></li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="assign-a-custom-role-using-the-azure-portal">Assign a Custom Role using the Azure Portal<a href="#assign-a-custom-role-using-the-azure-portal" class="hash-link" aria-label="Direct link to Assign a Custom Role using the Azure Portal" title="Direct link to Assign a Custom Role using the Azure Portal">​</a></h3>
<p>Now that you have created your Custom Role - it is time to assign it! So it is actually in use.</p>
<ol>
<li>Log in to the <strong>Azure Portal</strong></li>
<li>Navigate to your <strong>Subscription or Resource Group</strong> you want to delegate this role to</li>
<li>Click on <strong>Access Control (IAM)</strong></li>
<li>Click <strong>Add</strong></li>
<li>Click on <strong>Role Assignment</strong></li>
<li>Under the &#x27;Role&#x27; dropdown, <strong>select</strong> your Custom <strong>Role.</strong></li>
<li><img decoding="async" loading="lazy" alt="Azure Portal - Add Role Assignments" src="/assets/images/ad_roleassignmentportal-06b0eb5d3a8c93ca719e5e71dac491e2.png" title="Azure Portal - Add Role Assignments" width="354" height="958" class="img_ev3q"></li>
<li>Now you can <strong>select</strong> the <strong>Azure AD Group/User or Service Principal</strong> you want to <strong>assign</strong> the role to and click <strong>Save.</strong></li>
<li>Congratulations, <strong>you have now assigned your Custom role!</strong></li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="assign-a-custom-role-using-powershell">Assign a Custom Role using PowerShell<a href="#assign-a-custom-role-using-powershell" class="hash-link" aria-label="Direct link to Assign a Custom Role using PowerShell" title="Direct link to Assign a Custom Role using PowerShell">​</a></h3>
<p>You can assign Custom Role&#x27;s using PowerShell. To do this, you need a few things such as the Object ID, Assignable Scope IDs etc., instead of rehashing it, this Microsoft article does an excellent job of running through the process.</p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/role-based-access-control/role-assignments-powershell?WT.mc_id=AZ-MVP-5004796" target="_blank" rel="noopener noreferrer" title="Assign Azure roles using Azure PowerShell">Assign Azure roles using Azure PowerShell</a></li>
</ul></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/azure/">Azure</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/2021/07/05/add-shortcut-to-azure-virtual-desktop-in-the-microsoft-365-waffle/">Add a shortcut to the Azure Virtual Desktop Web Client to the Microsoft 365 waffle</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-07-05T00:00:00.000Z">July 5, 2021</time> · <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://luke.geek.nz" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://luke.geek.nz/img/logo.png" alt="Luke Murray"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://luke.geek.nz" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Luke Murray</span></a></div><small class="authorTitle_nd0D" title="Author">Author</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div class="markdown"><p>If you are like me, you use the application launchers in the Microsoft 365 waffle daily, if not hourly! Then having it as a single pane of glass to access all your applications is a no-brainer!</p>
<p>That includes access to the Azure Virtual Desktop Web client! In addition, Microsoft has given us the ability to add Custom App Launchers for applications that are accessible to a URL to the Launchers in the waffle!</p>
<blockquote>
<p>Create custom tiles that will appear in the All apps section of the Office 365 app launcher for all of your users. Users can pin the custom tiles directly to their app launcher for quick access.</p>
</blockquote>
<p>You can add much more than the Azure Virtual Desktop web client to help improve your user&#x27;s experience, but this quick guide will focus on adding the Azure Virtual Desktop Web Client.</p>
<p><img decoding="async" loading="lazy" alt="M365 Waffle" src="/assets/images/m365_waffle_default-8455c4640b6e48dff7d2cf95d7f73dbc.png" title="M365 Waffle" width="317" height="372" class="img_ev3q"></p>
<ol>
<li>Open the <a href="https://admin.microsoft.com/#/homepage" target="_blank" rel="noopener noreferrer" title="M365 Admin"><strong>Microsoft 365 Admin Panel</strong></a></li>
<li>Expand <strong>Settings</strong></li>
<li>Click on <strong>Org Settings</strong></li>
<li>Select <strong>Organisation Profile</strong></li>
<li>Click on <strong>Custom app launcher tiles</strong></li>
</ol>
<p><img decoding="async" loading="lazy" alt="M365 - Organisation Profile" src="/assets/images/m365_customapplaunchertitle-590a7d67693e3b98a5a3e28321e71a90.png" title="M365 - Organisation Profile" width="1349" height="548" class="img_ev3q"></p>
<ol>
<li>Click <strong>+ Add a custom title.</strong></li>
<li>Please type in the name of your Desktop; in my example, it is <strong>Contoso Desktop.</strong></li>
<li>For the <strong>URL</strong> of the website, type in: <a href="https://rdweb.wvd.microsoft.com/arm/webclient/index.html" target="_blank" rel="noopener noreferrer" title="https://rdweb.wvd.microsoft.com/arm/webclient/index.html"><strong>https://rdweb.wvd.microsoft.com/arm/webclient/index.html</strong></a></li>
<li>Type in a <strong>URL</strong> of the <strong>icon</strong> you want the App Launcher to have <em>(Make sure this is a location that you have access to and can manage (i.e. even sitting on your website or Azure Storage account as long as it&#x27;s publically available)).</em></li>
<li><strong>Add</strong> a <strong>description</strong> <em>(such as Contoso Desktop, used for Line of Business Applications)</em></li>
<li><img decoding="async" loading="lazy" alt="M365 - Custom App Launcher" src="/assets/images/m365_customapplaunchertitle1-adf7587e11b2cfb460f3c803016ede0f.png" title="M365 - Custom App Launcher" width="579" height="508" class="img_ev3q"></li>
<li>Click <strong>Save</strong></li>
<li><img decoding="async" loading="lazy" alt="M365 - Custom App Launcher" src="/assets/images/m365_contosoapp-a66ee8bd18dcb410f09b5bd42f4fc189.png" title="M365 - Custom App Launcher" width="528" height="304" class="img_ev3q"></li>
<li>Log out of your Admin account and <strong>log</strong> into an <strong>account</strong> with an Exchange license attached to it. It may take some time for the Custom App Launcher to display.</li>
<li>Once the <strong>Custom App Launcher</strong> has displayed, your users can <strong>pin</strong> it to the <strong>launcher,</strong> so it is always right on top.</li>
<li><strong>Click</strong> on your Azure Virtual Desktop <strong>launcher,</strong> and you should be <strong>redirected</strong> to the Azure Virtual Desktop <strong>Web client</strong>!</li>
<li><img decoding="async" loading="lazy" alt="M365 Waffle - App Launcher" src="/assets/images/m365_pin-e65f9100d3f7808632b437e38328b7d1.png" title="M365 Waffle - App Launcher" width="453" height="452" class="img_ev3q"></li>
</ol>
<p>Just some notes on additional testing:</p>
<ul>
<li>I attempted copying the Azure Virtual Desktop RDP file (C:\Users\%UserAccount%\AppData\Local\rdclientwpf) to my website to access directly however received an error, even opening up the RDP file directly failed, to test the Remote Desktop client.</li>
<li>I had some success opening that RDP up with the Remote Desktop application directly using &#x27;Open With&#x27; C:\Users\%UserAccount%\AppData\Local\Apps\Remote Desktop\msrdcw.exe, instead of the default Remote Desktop Connection client locally.</li>
<li>This will add it for all M365 users, if you want to restrict it to Users/Groups, I would look at testing and creating an App Registration.</li>
</ul>
<p>At this stage, having a launcher to the Web Client is the best bet vs a shortcut directly to the RDP file as you don&#x27;t have to worry about users having the Remote Desktop agent installed when working remotely.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/azure/">Azure</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/tags/azure/page/29/"><div class="pagination-nav__label">Newer entries</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/tags/azure/page/31/"><div class="pagination-nav__label">Older entries</div></a></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 luke.geek.nz. Powered by coffee, clouds and hamsters on wheels!</div></div></div></footer></div>
</body>
</html>