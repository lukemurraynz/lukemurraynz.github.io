<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-list-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.2.1">
<title data-rh="true">Lukes Tech Blog - Unleashing the power of the cloud and other technologies! | luke.geek.nz</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://luke.geek.nz/img/social-card.png"><meta data-rh="true" name="twitter:image" content="https://luke.geek.nz/img/social-card.png"><meta data-rh="true" property="og:url" content="https://luke.geek.nz/page/28/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:title" content="Lukes Tech Blog - Unleashing the power of the cloud and other technologies! | luke.geek.nz"><meta data-rh="true" name="description" content="Embark on a tech journey with Luke, a Microsoft Azure MVP, as he delves into the cutting-edge realm of Microsoft and Azure Cloud technologies. Explore, learn, and stay ahead in the dynamic world of cloud computing!"><meta data-rh="true" property="og:description" content="Embark on a tech journey with Luke, a Microsoft Azure MVP, as he delves into the cutting-edge realm of Microsoft and Azure Cloud technologies. Explore, learn, and stay ahead in the dynamic world of cloud computing!"><meta data-rh="true" name="docusaurus_tag" content="blog_posts_list"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_posts_list"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://luke.geek.nz/page/28/"><link data-rh="true" rel="alternate" href="https://luke.geek.nz/page/28/" hreflang="en"><link data-rh="true" rel="alternate" href="https://luke.geek.nz/page/28/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://ZBH2T1WJQD-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"Blog","@id":"https://luke.geek.nz/page/28","mainEntityOfPage":"https://luke.geek.nz/page/28","headline":"Lukes Tech Blog - Unleashing the power of the cloud and other technologies!","description":"Embark on a tech journey with Luke, a Microsoft Azure MVP, as he delves into the cutting-edge realm of Microsoft and Azure Cloud technologies. Explore, learn, and stay ahead in the dynamic world of cloud computing!","blogPost":[{"@type":"BlogPosting","@id":"https://luke.geek.nz/2021/03/29/azure-active-directory-recommendations","mainEntityOfPage":"https://luke.geek.nz/2021/03/29/azure-active-directory-recommendations","url":"https://luke.geek.nz/2021/03/29/azure-active-directory-recommendations","headline":"Microsoft Entra ID Recommendations","name":"Microsoft Entra ID Recommendations","description":"Microsoft Entra ID is the foundation, which Microsoft 365 is built-on.","datePublished":"2021-03-29T00:00:00.000Z","author":{"@type":"Person","name":"Luke Murray","description":"Author","url":"https://luke.geek.nz","image":"https://luke.geek.nz/img/logo.png"},"keywords":[]},{"@type":"BlogPosting","@id":"https://luke.geek.nz/azure/misc/how-to-restrict-users-to-specific-boards-in-azure-devops","mainEntityOfPage":"https://luke.geek.nz/azure/misc/how-to-restrict-users-to-specific-boards-in-azure-devops","url":"https://luke.geek.nz/azure/misc/how-to-restrict-users-to-specific-boards-in-azure-devops","headline":"How to restrict users to specific boards in Azure DevOps","name":"How to restrict users to specific boards in Azure DevOps","description":"Do you ever want to add external Microsoft Entra ID or other users to specific boards in a project, but not want to give them access to the entire Azure DevOps Project?","datePublished":"2021-03-28T00:00:00.000Z","author":{"@type":"Person","name":"Luke Murray","description":"Author","url":"https://luke.geek.nz","image":"https://luke.geek.nz/img/logo.png"},"keywords":[]},{"@type":"BlogPosting","@id":"https://luke.geek.nz/azure/azure-webapp-500-errors-reporting-from-aspnetcoremodule","mainEntityOfPage":"https://luke.geek.nz/azure/azure-webapp-500-errors-reporting-from-aspnetcoremodule","url":"https://luke.geek.nz/azure/azure-webapp-500-errors-reporting-from-aspnetcoremodule","headline":"Azure WebApp 500 Errors reporting from AspNetCoreModule","name":"Azure WebApp 500 Errors reporting from AspNetCoreModule","description":"Issue Description","datePublished":"2021-03-27T00:00:00.000Z","author":{"@type":"Person","name":"Luke Murray","description":"Author","url":"https://luke.geek.nz","image":"https://luke.geek.nz/img/logo.png"},"keywords":[]},{"@type":"BlogPosting","@id":"https://luke.geek.nz/2021/03/26/allow-azure-devops-microsoft-hosted-agent-to-communicate-with-azure-keyvault","mainEntityOfPage":"https://luke.geek.nz/2021/03/26/allow-azure-devops-microsoft-hosted-agent-to-communicate-with-azure-keyvault","url":"https://luke.geek.nz/2021/03/26/allow-azure-devops-microsoft-hosted-agent-to-communicate-with-azure-keyvault","headline":"Allow Azure DevOps Microsoft Hosted Agent to communicate with Azure KeyVault","name":"Allow Azure DevOps Microsoft Hosted Agent to communicate with Azure KeyVault","description":"It is best practice to lock down Azure resources to be accessible by location and services that is only to what's required and, the Azure Key vault is no exception.","datePublished":"2021-03-26T00:00:00.000Z","author":{"@type":"Person","name":"Luke Murray","description":"Author","url":"https://luke.geek.nz","image":"https://luke.geek.nz/img/logo.png"},"keywords":[]},{"@type":"BlogPosting","@id":"https://luke.geek.nz/2021/03/26/failed-to-delete-the-private-endpoint.error-call-to-microsoft.storage-storageaccounts-failed","mainEntityOfPage":"https://luke.geek.nz/2021/03/26/failed-to-delete-the-private-endpoint.error-call-to-microsoft.storage-storageaccounts-failed","url":"https://luke.geek.nz/2021/03/26/failed-to-delete-the-private-endpoint.error-call-to-microsoft.storage-storageaccounts-failed","headline":"Failed to delete the private endpoint. Error: Call to Microsoft.Storage/storageAccounts failed","name":"Failed to delete the private endpoint. Error: Call to Microsoft.Storage/storageAccounts failed","description":"Issue Description","datePublished":"2021-03-26T00:00:00.000Z","author":{"@type":"Person","name":"Luke Murray","description":"Author","url":"https://luke.geek.nz","image":"https://luke.geek.nz/img/logo.png"},"keywords":[]}]}</script><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="luke.geek.nz RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="luke.geek.nz Atom Feed">
<link rel="alternate" type="application/json" href="/feed.json" title="luke.geek.nz JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0QDLBY7NNN"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-0QDLBY7NNN",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.d349528d.css">
<script src="/assets/js/runtime~main.1d9baee8.js" defer="defer"></script>
<script src="/assets/js/main.51a362ed.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#D3D3D3" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">If you haven't already make sure you sign up for my Weekly Azure Newsletter, straight to your inbox! <a target="_blank" rel="noopener noreferrer" href="https://newsletter.azurefeeds.com/join">Subscribe now!</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="luke.geek.nz" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="luke.geek.nz" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">luke.geek.nz</b></a><a class="navbar__item navbar__link" href="/Tags/">Tags</a><a class="navbar__item navbar__link" href="/Archive/">Blog</a><a class="navbar__item navbar__link" href="/about/">About</a></div><div class="navbar__items navbar__items--right"><a href="https://www.youtube.com/channel/UCUG3TKDTAZz4UXshGrjBBoQ" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-icon" aria-label="YouTube">
              <svg width="24" height="24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M23.498,6.186c-0.273-1.186-1.143-2.144-2.332-2.417C18.389,3.153,12,3.153,12,3.153s-6.389,0-9.166,0.616
                  c-1.19,0.273-2.06,1.23-2.332,2.417C0,8.07,0,12,0,12s0,3.93,0.502,5.814c0.272,1.187,1.142,2.062,2.332,2.335
                  C5.611,20.847,12,20.847,12,20.847s6.389,0,9.166-0.698c1.189-0.273,2.059-1.148,2.332-2.335C24,15.93,24,12,24,12
                  S24,8.07,23.498,6.186z M9.545,15.568V8.432l6.545,3.568L9.545,15.568z"/>
              </svg>
            </a><a href="https://aus.social/@lukemurray" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-icon" aria-label="Mastodon">
              <svg height="20" width="20" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" xml:space="preserve">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                  <path d="M21.327 8.566c0-4.339-2.843-5.61-2.843-5.61-1.433-.658-3.894-.935-6.451-.956h-.063c-2.557.021-5.016.298-6.45.956 0 0-2.843 1.272-2.843 5.61 0 .993-.019 2.181.012 3.441.103 4.243.778 8.425 4.701 9.463 1.809.479 3.362.579 4.612.510 2.268-.126 3.541-.809 3.541-.809l-.075-1.646s-1.621.511-3.441.449c-1.804-.062-3.707-.194-3.999-2.409a4.523 4.523 0 0 1-.04-.621s1.77.433 4.014.536c1.372.063 2.658-.08 3.965-.236 2.506-.299 4.688-1.843 4.962-3.254.434-2.223.398-5.424.398-5.424zm-3.353 5.59h-2.081V9.057c0-1.075-.452-1.62-1.357-1.62-1 0-1.501.647-1.501 1.927v2.791h-2.069V9.364c0-1.28-.501-1.927-1.502-1.927-.905 0-1.357.546-1.357 1.62v5.099H6.026V8.903c0-1.074.273-1.927.823-2.558.566-.631 1.307-.955 2.228-.955 1.065 0 1.872.409 2.405 1.228l.518.869.519-.869c.533-.819 1.34-1.228 2.405-1.228.92 0 1.662.324 2.228.955.549.631.822 1.484.822 2.558v5.253z"></path>
                </g>
              </svg>
            </a><a href="https://bsky.app/profile/lukemurraynz.bsky.social" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-icon" aria-label="Bluesky">
              <svg class="octicon" xmlns="http://www.w3.org/2000/svg" role="img" viewBox="0 0 16 16" height="20" width="20" fill="currentColor">
                <title>Bluesky</title>
                <path d="M8 7.2c-.72-1.4-2.7-4.04-4.53-5.33C1.7.63 1.04.84.6 1.04.1 1.27 0 2.05 0 2.51c0 .46.25 3.77.42 4.32.54 1.82 2.47 2.45 4.25 2.25-2.6.38-4.92 1.33-1.88 4.71 3.33 3.46 4.57-.74 5.21-2.87.64 2.13 1.37 6.18 5.16 2.87 2.84-2.87.78-4.33-1.83-4.71 1.78.2 3.71-.43 4.25-2.25.17-.55.42-3.86.42-4.32 0-.46-.09-1.24-.6-1.47-.44-.2-1.11-.42-2.87.83A17.87 17.87 0 0 0 8 7.2Z"></path>
              </svg>
            </a><a href="https://twitter.com/lukemurraynz" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-icon" aria-label="X"><svg height="20" width="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 8.586l4.293-4.293a1 1 0 011.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 011.414-1.414L10 8.586z" clip-rule="evenodd"/>
          </svg></a><a href="https://www.linkedin.com/in/ljmurray/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-icon" aria-label="LinkedIn"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"></path></svg></a><a href="https://luke.geek.nz/rss" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-rss-link" aria-label="RSS"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/azure/404-attempting-query-openai-azure-function-binding/">Resolving 404 Error with OpenAI Azure Function Binding</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/azure/implementing-sandbox-vending/">Implementing a Sandbox Environment in Microsoft Azure</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/azure/change-timezone-azure-container-app/">Change the Timezone of your Azure Container App</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/azure/azure-container-apps-overview/">Azure Container Apps - Overview</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/azure/book-review-cloud-solution-architects-career-master-plan/">Book Review Cloud Solution Architects Career Master Plan</a></li></ul></nav></aside><main class="col col--7"><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/2021/03/29/azure-active-directory-recommendations/">Microsoft Entra ID Recommendations</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-03-29T00:00:00.000Z">March 29, 2021</time> · <!-- -->9 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://luke.geek.nz" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://luke.geek.nz/img/logo.png" alt="Luke Murray"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://luke.geek.nz" target="_blank" rel="noopener noreferrer"><span>Luke Murray</span></a></div><small class="avatar__subtitle">Author</small></div></div></div></div></header><div class="markdown"><p>Microsoft Entra ID is the foundation, which Microsoft 365 is built-on.</p>
<p>In the words of Microsoft:</p>
<blockquote>
<p>Microsoft Entra ID (Azure AD) is Microsoft’s cloud-based identity and access management service, which helps your employees sign in and access resources in:</p>
<ul>
<li>External resources, such as Microsoft 365, the Azure portal, and thousands of other SaaS applications.</li>
<li>Internal resources, such as apps on your corporate network and intranet, along with any cloud apps developed by your own organization.</li>
</ul>
</blockquote>
<p>Microsoft Entra ID (AAD) is simply not set and forget, especially given the fact that AAD  services are constantly evolving in terms of features and improved security.</p>
<p>Below is a table of some Microsoft Entra ID and best practice recommendations.</p>
<p>Please keep in mind that like any recommendations, do not blindly follow them, make sure to determine the impact on your users on enabling some of this functionality, there may also be recommendations that you will not be able to apply, do to business constraints.</p>























































































































































































































<table><thead><tr><th>Recommendation</th><th>Why Consider This</th><th>Probability</th><th>Impact</th><th>Effort</th></tr></thead><tbody><tr><td>Change break glass accounts passwords every 90 days</td><td>Emergency access accounts are highly privileged, and they are not assigned to specific individuals. Emergency access accounts are limited to emergency or &quot;break glass&quot;&#x27; scenarios where normal administrative accounts can&#x27;t be used. We recommend that you maintain a goal of restricting emergency account use to only the times when it is absolutely necessary.</td><td>High</td><td>High</td><td>Low</td></tr><tr><td>Review possible stale Guest (B2B) accounts</td><td>Guest accounts do not exist by default and pose a potential data exposure vulnerability if left unused.  Guest accounts should only be used with a defined business need and closely monitored to ensure accounts are valid/legitimate.</td><td>High</td><td>Moderate</td><td>Low</td></tr><tr><td>Remove invited guests who have not accepted invite</td><td>Remove invited guests who have not accepted invite as it helps control the scope of identity and access management as it pertains to provisioning users in Azure AD.   In addition, removing stale invites and user from Azure AD is part of the recommended routine account maintenance.</td><td>High</td><td>Low</td><td>Low</td></tr><tr><td>Enable Windows Hello for Business PIN Reset Service</td><td>The Microsoft PIN reset services enables you to help users recover who have forgotten their PIN. Using Group Policy, Microsoft Intune or a compatible MDM, you can configure Windows 10 devices to securely use the Microsoft PIN reset service that enables users to reset their forgotten PIN through settings or above the lock screen without requiring re-enrollment.</td><td>Low to Moderate</td><td>Moderate</td><td>Low</td></tr><tr><td>Ensure security compliance notification mail is set</td><td>Managing security and compliance is a partnership. You are responsible for protecting your data, identities, and devices, while Microsoft vigorously protects Office 365 services. You can use Office 365 and Enterprise Mobility + Security (EMS) together to help you achieve the appropriate level of protection for your organization.</td><td>Low to Moderate</td><td>Moderate</td><td>Low</td></tr><tr><td>Add owner to legacy Service Principal</td><td>Legacy service principals without a defined owner create a challenge for management and accountability.</td><td>Low to Moderate</td><td>Moderate</td><td>Low</td></tr><tr><td>Add owner to application</td><td>Assigning an application owner provides an opportunity for delegation and establishes accountability for management of the resource.</td><td>Low to Moderate</td><td>Moderate</td><td>Low</td></tr><tr><td>Add owner to cloud-only groups</td><td>Assigning a group owner provides an opportunity for delegation and establishes accountability for management of the resource.</td><td>Low to Moderate</td><td>Moderate</td><td>Low</td></tr><tr><td>Require that users can create security groups is set to no</td><td>The creation and management of security groups should be restricted to administrators only to limit proliferation of this security principal.  The default setting is to prevent users from creating security groups in the Azure portal and it is recommended to maintain this configuration unless required by a defined business need.</td><td>Low to Moderate</td><td>Moderate</td><td>Low</td></tr><tr><td>Delete empty cloud-only groups</td><td>Cloud-only groups that contain no members and are not associated with Azure applications should be deleted as they serve no purpose.</td><td>Low to Moderate</td><td>Low</td><td>Low</td></tr><tr><td>Review Dynamic Groups with membershipRuleProcessingState not turned on</td><td>Sometimes you may want to stop the processing of a dynamic group, like when you’re importing a large number of new users or reorganizing your group architecture. To do that, use the MembershipRuleProcessingState parameter to switch processing on and off.</td><td>Low to Moderate</td><td>Low</td><td>Low</td></tr><tr><td>Review and consider federating all domains</td><td>When a domain is federated with Azure AD, several properties are set on the domain in Azure. One important one is IssuerUri. This property is a URI that is used by Azure AD to identify the domain that the token is associated with.</td><td>Low to Moderate</td><td>Low</td><td>Low</td></tr><tr><td>Review applications with credentials about to expire or are expired</td><td>Applications with expired credentials will prevent its use and should be updated before expiration to avoid an outage. If the application&#x27;s service principal already has newer credentials remove the no longer valid credentials.</td><td>Moderate</td><td>High</td><td>Low</td></tr><tr><td>Review applications granted with risky OAUTH2 permissions</td><td>Depending on the scope of permissions, it can pose a risk to the confidentiality, integrity, or availability of the organization&#x27;s data.  Periodic review of application permission grants can help identity over-privileged applications and establish access controls that align with the principle of least privilege.</td><td>Moderate</td><td>High</td><td>Low</td></tr><tr><td>Configure user passwords to never expire</td><td>Requesting users to regularly change passwords will lead to weak password practices like patterns or sequential words and numbers.</td><td>Moderate</td><td>Moderate</td><td>Low</td></tr><tr><td>Review Service Principals using password based credentials</td><td>Protect and manage your confidential app credentials for web apps, web APIs and daemon apps. Use certificate credentials, not password credentials (client secrets).</td><td>Moderate</td><td>Moderate</td><td>Low</td></tr><tr><td>Review Azure AD Guest (B2B) accounts</td><td>Guest accounts do not exist by default and pose a potential data exposure vulnerability if left unused.  Guest accounts should only be used with a defined business need and closely monitored to ensure accounts are valid/legitimate.</td><td>Moderate</td><td>Moderate</td><td>Low</td></tr><tr><td>Review applications consented by admins</td><td>Review applications granted consent by admins to ensure this global configuration is desired, which results in authorization for applications to data for all users in the Azure AD tenant.</td><td>Moderate</td><td>Moderate</td><td>Low</td></tr><tr><td>Review applications consented by one user</td><td>Review applications granted consent by a single users to ensure the configuration is desired, which results in authorization for applications to data for individual users as compared to admin consent which is global for the tenant.</td><td>Moderate</td><td>Moderate</td><td>Low</td></tr><tr><td>Review domain password policies that do not match defaults.</td><td>Only passwords for user accounts that are not synchronized through directory synchronization can be configured for password policies.  By default users do not have a password policy defined.</td><td>Moderate</td><td>Moderate</td><td>Low</td></tr><tr><td>Specify the usage location property for users</td><td>Some Microsoft services aren&#x27;t available in all locations because of local laws and regulations. Before you can assign a license to a user, you must specify the Usage location property for the user.</td><td>Moderate</td><td>Moderate</td><td>Low</td></tr><tr><td>Require that users can consent to apps accessing company data on their behalf is set to no</td><td>Allowing users to provide consent for third-party applications risks exfiltration of personally identifiable information (PII) such as email and phone number, as it&#x27;s associated with the user&#x27;s profile.</td><td>High</td><td>High</td><td>Moderate</td></tr><tr><td>Review group license errors</td><td>These errors should be resolved and all users should be assigned expected licenses, for avoiding any loss of productivity.</td><td>High</td><td>Moderate</td><td>Moderate</td></tr><tr><td>Remove email / mailbox from directory role admins</td><td>To help separate internet risks (phishing attacks, unintentional web browsing) from administrative privileges, create dedicated accounts for each user with administrative privileges with no mail enabled to make sure they do not inadvertently open emails or run programs associated with their admin accounts.</td><td>Moderate</td><td>High</td><td>Moderate</td></tr><tr><td>Remove Skype address from directory role admins</td><td>To help separate internet risks (phishing attacks, unintentional web browsing) from administrative privileges, create dedicated accounts for each user with administrative privileges with no Skype Enabled to make sure they do not inadvertently open emails or run programs associated with their admin accounts.</td><td>Moderate</td><td>High</td><td>Moderate</td></tr><tr><td>Develop plan to migrate or remove legacy Service Principals</td><td>ServicePrincipals with ServicePrincipalType of legacy are not associated with an application and should be migrated to an application to improve manageability.</td><td>Moderate</td><td>Moderate</td><td>Moderate</td></tr><tr><td>Federated domains in Azure AD must have SupportsMFA enabled if ADFS MFA is used</td><td>When the configured conditional access policy requires multi-factor authentication, Azure AD defaults to using Azure MFA. If you use the federation service for MFA, you can configure Azure AD to redirect to the federation service when MFA is needed by setting -SupportsMFA to $true in PowerShell. This setting works for federated authentication services that support the MFA challenge request issued by Azure AD</td><td>Moderate</td><td>Moderate</td><td>Moderate</td></tr><tr><td>Verify all root level domains</td><td>Every new Azure AD tenant comes with an initial domain name, domainname.onmicrosoft.com. You can&#x27;t change or delete the initial domain name, but you can add your organization&#x27;s names to the list. Adding custom domain names helps you to create user names that are familiar to your users</td><td>Moderate</td><td>Moderate</td><td>Moderate</td></tr><tr><td>Review user objects no longer syncing with on-premises</td><td>Users present in Windows Server AD and no longer syncing to Azure AD impacts users ability to use services provided by Azure AD (Password reset, access to O365 services and cloud based apps etc.) and it also poses administrative challenge in managing the account.</td><td>Moderate</td><td>Moderate</td><td>Moderate</td></tr></tbody></table></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/azure/">Azure</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/azure/misc/how-to-restrict-users-to-specific-boards-in-azure-devops/">How to restrict users to specific boards in Azure DevOps</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-03-28T00:00:00.000Z">March 28, 2021</time> · <!-- -->One min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://luke.geek.nz" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://luke.geek.nz/img/logo.png" alt="Luke Murray"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://luke.geek.nz" target="_blank" rel="noopener noreferrer"><span>Luke Murray</span></a></div><small class="avatar__subtitle">Author</small></div></div></div></div></header><div class="markdown"><p>Do you ever want to add external Microsoft Entra ID or other users to specific boards in a project, but not want to give them access to the entire Azure DevOps Project?</p>
<p>Using the steps below, we can restrict users to a specific board.</p>
<ol>
<li>Invite external users to DevOps org with Stakeholder access.</li>
<li>In the project, create a new Team and do not add it to the existing security group to inherit permissions.
<img decoding="async" loading="lazy" alt="Azure DevOps - Boards" src="/assets/images/azdevopsboard1-4da7dbaad1f1010fcaca461c66940cdb.jpg" width="477" height="779" class="img_ev3q"></li>
<li>Add external users to created Team.</li>
<li>Set permission for created Team properly. In this case, it’s to set View project-level information to Allow.
<img decoding="async" loading="lazy" alt="Azure DevOps - Boards" src="/assets/images/azdevopsboard2-d29e00e5c3322af3dca9c35c20916ad1.jpg" width="954" height="410" class="img_ev3q"></li>
<li>Create a new area path and set the permission for the created Team in Security
<img decoding="async" loading="lazy" alt="Azure DevOps - Boards" src="/assets/images/azdevopsboard3-47d5d893d85d39023a8713bf2078ee83.jpg" width="936" height="541" class="img_ev3q"></li>
<li>Assign the area path to the newly created Team.</li>
</ol></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/azure/">Azure</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/misc/">Misc</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/azure/azure-webapp-500-errors-reporting-from-aspnetcoremodule/">Azure WebApp 500 Errors reporting from AspNetCoreModule</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-03-27T00:00:00.000Z">March 27, 2021</time> · <!-- -->One min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://luke.geek.nz" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://luke.geek.nz/img/logo.png" alt="Luke Murray"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://luke.geek.nz" target="_blank" rel="noopener noreferrer"><span>Luke Murray</span></a></div><small class="avatar__subtitle">Author</small></div></div></div></div></header><div class="markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="issue-description">Issue Description<a href="#issue-description" class="hash-link" aria-label="Direct link to Issue Description" title="Direct link to Issue Description">​</a></h2>
<p>Intermittent issues with Azure WebApp constantly stop functioning, a Stop/Start operation brings it back online.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="root-cause">Root Cause<a href="#root-cause" class="hash-link" aria-label="Direct link to Root Cause" title="Direct link to Root Cause">​</a></h2>
<p>Further investigation using Azure Application Insights, reveals the Azure WebApp was experiencing a few FailedRequestCount, with HTTP 500 Errors. An exception was thrown by a TaskScheduler. Exception of type &#x27;System.OutOfMemoryException&#x27; was thrown.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="resolution">Resolution<a href="#resolution" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h2>
<p>In my case, the service that was running on the Azure WebApp was using .NET Core 2.0, the fix was to upgrade to the latest version.</p>
<p>.NET Core 2.0 is an unsupported version and we highly recommend upgrading to the latest version (3.1). Please take a look at this information of the .NET Core official support policy: <a href="https://dotnet.microsoft.com/platform/support/policy/dotnet-core" target="_blank" rel="noopener noreferrer" title="https://dotnet.microsoft.com/platform/support/policy/dotnet-core">https://dotnet.microsoft.com/platform/support/policy/dotnet-core</a></p>
<p>For .NET Core applications I suggest enabling the stdout logs, as those will capture some important errors: <a href="https://learn.microsoft.com/en-us/aspnet/core/test/troubleshoot-azure-iis?view=aspnetcore-2.2#aspnet-core-module-stdout-log-azure-app-service-1" target="_blank" rel="noopener noreferrer" title="https://learn.microsoft.com/en-us/aspnet/core/test/troubleshoot-azure-iis?view=aspnetcore-2.2&amp;WT.mc_id=AZ-MVP-5004796#aspnet-core-module-stdout-log-azure-app-service-1">https://learn.microsoft.com/en-us/aspnet/core/test/troubleshoot-azure-iis?view=aspnetcore-2.2#aspnet-core-module-stdout-log-azure-app-service-1</a></p>
<p>If those OutOfMemory exceptions come with a 5xx status code, I would suggest as well using the AutoHeal feature as it will allow setting rules based on that status code to capture a Memory Dump, you can check more information here: <a href="https://learn.microsoft.com/en-us/aspnet/core/test/troubleshoot-azure-iis?view=aspnetcore-2.2#aspnet-core-module-stdout-log-azure-app-service-1" target="_blank" rel="noopener noreferrer" title="https://learn.microsoft.com/en-us/aspnet/core/test/troubleshoot-azure-iis?view=aspnetcore-2.2&amp;WT.mc_id=AZ-MVP-5004796#aspnet-core-module-stdout-log-azure-app-service-1">https://azure.github.io/AppService/2018/09/10/Announcing-the-New-Auto-Healing-Experience-in-App-Service-Diagnostics.html</a></p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/azure/">Azure</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/2021/03/26/allow-azure-devops-microsoft-hosted-agent-to-communicate-with-azure-keyvault/">Allow Azure DevOps Microsoft Hosted Agent to communicate with Azure KeyVault</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-03-26T00:00:00.000Z">March 26, 2021</time> · <!-- -->3 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://luke.geek.nz" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://luke.geek.nz/img/logo.png" alt="Luke Murray"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://luke.geek.nz" target="_blank" rel="noopener noreferrer"><span>Luke Murray</span></a></div><small class="avatar__subtitle">Author</small></div></div></div></div></header><div class="markdown"><p>It is best practice to lock down Azure resources to be accessible by location and services that is only to what&#x27;s required and, the Azure Key vault is no exception.</p>
<p>When using Microsoft Hosted Agents in Azure DevOps, you need to make sure that the AzureCloud IPs for the Azure DevOps regions are opened on the Firewall.</p>
<p>In my case, I was in the: AustraliaEast region and needed to identify and add the following &#x27;AzureCloud&#x27; Address Ranges to the KeyVault firewall:</p>
<ul>
<li>&quot;name&quot;: &quot;<strong><em>AzureCloud.australiaeast</em></strong>&quot;,</li>
<li>&quot;id&quot;: &quot;AzureCloud.australiaeast&quot;,</li>
<li>&quot;properties&quot;: {</li>
<li>&quot;changeNumber&quot;: 13,</li>
<li>&quot;region&quot;: &quot;australiaeast&quot;,</li>
<li>&quot;regionId&quot;: 3,</li>
<li>&quot;platform&quot;: &quot;Azure&quot;,</li>
<li>&quot;systemService&quot;: &quot;&quot;,</li>
<li>&quot;addressPrefixes&quot;: [</li>
<li>&quot;13.70.64.0/18&quot;,</li>
<li>&quot;13.72.224.0/19&quot;,</li>
<li>&quot;13.73.192.0/20&quot;,</li>
<li>&quot;13.75.128.0/17&quot;,</li>
<li>&quot;13.104.211.128/26&quot;,</li>
<li>&quot;13.105.16.192/26&quot;,</li>
<li>&quot;13.105.20.128/26&quot;,</li>
<li>&quot;13.105.52.192/26&quot;,</li>
<li>&quot;13.105.53.128/26&quot;,</li>
<li>&quot;20.37.192.0/19&quot;,</li>
<li>&quot;20.38.112.0/23&quot;,</li>
<li>&quot;20.40.64.0/20&quot;,</li>
<li>&quot;20.40.80.0/21&quot;,</li>
<li>&quot;20.40.120.0/21&quot;,</li>
<li>&quot;20.40.176.0/20&quot;,</li>
<li>&quot;20.42.192.0/19&quot;,</li>
<li>&quot;20.43.96.0/20&quot;,</li>
<li>&quot;20.47.37.0/24&quot;,</li>
<li>&quot;20.47.122.0/23&quot;,</li>
<li>&quot;20.53.32.0/28&quot;,</li>
<li>&quot;20.53.40.0/21&quot;,</li>
<li>&quot;20.53.64.0/18&quot;,</li>
<li>&quot;20.53.128.0/17&quot;,</li>
<li>&quot;20.58.128.0/18&quot;,</li>
<li>&quot;20.60.72.0/22&quot;,</li>
<li>&quot;20.60.182.0/23&quot;,</li>
<li>&quot;20.70.128.0/17&quot;,</li>
<li>&quot;20.135.120.0/21&quot;,</li>
<li>&quot;20.150.66.0/24&quot;,</li>
<li>&quot;20.150.92.0/24&quot;,</li>
<li>&quot;20.150.117.0/24&quot;,</li>
<li>&quot;20.157.44.0/24&quot;,</li>
<li>&quot;20.188.128.0/17&quot;,</li>
<li>&quot;20.190.142.0/25&quot;,</li>
<li>&quot;20.190.167.0/24&quot;,</li>
<li>&quot;20.191.192.0/18&quot;,</li>
<li>&quot;20.193.0.0/18&quot;,</li>
<li>&quot;20.193.64.0/19&quot;,</li>
<li>&quot;23.101.208.0/20&quot;,</li>
<li>&quot;40.79.160.0/20&quot;,</li>
<li>&quot;40.79.211.0/24&quot;,</li>
<li>&quot;40.82.32.0/22&quot;,</li>
<li>&quot;40.82.192.0/19&quot;,</li>
<li>&quot;40.87.208.0/22&quot;,</li>
<li>&quot;40.90.18.0/28&quot;,</li>
<li>&quot;40.90.30.0/25&quot;,</li>
<li>&quot;40.90.130.80/28&quot;,</li>
<li>&quot;40.90.130.208/28&quot;,</li>
<li>&quot;40.90.140.32/27&quot;,</li>
<li>&quot;40.90.142.160/27&quot;,</li>
<li>&quot;40.90.147.64/27&quot;,</li>
<li>&quot;40.90.150.0/27&quot;,</li>
<li>&quot;40.112.37.128/26&quot;,</li>
<li>&quot;40.126.14.0/25&quot;,</li>
<li>&quot;40.126.39.0/24&quot;,</li>
<li>&quot;40.126.224.0/19&quot;,</li>
<li>&quot;52.108.40.0/23&quot;,</li>
<li>&quot;52.108.83.0/24&quot;,</li>
<li>&quot;52.109.112.0/22&quot;,</li>
<li>&quot;52.111.224.0/24&quot;,</li>
<li>&quot;52.113.88.0/22&quot;,</li>
<li>&quot;52.113.103.0/24&quot;,</li>
<li>&quot;52.114.16.0/22&quot;,</li>
<li>&quot;52.114.58.0/23&quot;,</li>
<li>&quot;52.114.192.0/23&quot;,</li>
<li>&quot;52.115.98.0/24&quot;,</li>
<li>&quot;52.120.158.0/23&quot;,</li>
<li>&quot;52.121.108.0/22&quot;,</li>
<li>&quot;52.143.199.0/24&quot;,</li>
<li>&quot;52.143.200.0/23&quot;,</li>
<li>&quot;52.147.0.0/19&quot;,</li>
<li>&quot;52.156.160.0/19&quot;,</li>
<li>&quot;52.187.192.0/18&quot;,</li>
<li>&quot;52.232.136.0/21&quot;,</li>
<li>&quot;52.232.154.0/24&quot;,</li>
<li>&quot;52.237.192.0/18&quot;,</li>
<li>&quot;52.239.130.0/23&quot;,</li>
<li>&quot;52.239.226.0/24&quot;,</li>
<li>&quot;52.245.16.0/22&quot;,</li>
<li>&quot;104.44.90.64/26&quot;,</li>
<li>&quot;104.44.93.96/27&quot;,</li>
<li>&quot;104.44.95.48/28&quot;,</li>
<li>&quot;104.46.29.0/24&quot;,</li>
<li>&quot;104.46.30.0/23&quot;,</li>
<li>&quot;104.209.80.0/20&quot;,</li>
<li>&quot;104.210.64.0/18&quot;,</li>
<li>&quot;191.238.66.0/23&quot;,</li>
<li>&quot;191.239.64.0/19&quot;,</li>
<li>&quot;2603:1010::/46&quot;,</li>
<li>&quot;2603:1010:5::/48&quot;,</li>
<li>&quot;2603:1010:6::/48&quot;,</li>
<li>&quot;2603:1016:1400:60::/59&quot;,</li>
<li>&quot;2603:1016:2402::/48&quot;,</li>
<li>&quot;2603:1016:2500:c::/64&quot;,</li>
<li>&quot;2603:1017:0:60::/59&quot;</li>
</ul>
<p>You only need to add the IP ranges of the Region that your Azure DevOps instance sits in.</p>
<p>You can find the region that your Azure DevOps instance sits in by following the article below:</p>
<ul>
<li><a href="https://learn.microsoft.com/en-us/azure/devops/pipelines/agents/hosted?view=azure-devops&amp;tabs=yaml&amp;WT.mc_id=AZ-MVP-5004796#networking" target="_blank" rel="noopener noreferrer">Microsoft-hosted agents for Azure Pipelines - Azure Pipelines</a></li>
</ul>
<p>You can retrieve the list of Azure IP Ranges and Service Tags from the following Microsoft JSON file:</p>
<ul>
<li><a href="https://www.microsoft.com/en-us/download/details.aspx?id=56519" target="_blank" rel="noopener noreferrer">Download Azure IP Ranges and Service Tags – Public Cloud from Official Microsoft Download Center</a></li>
</ul>
<p><em>Note: These IP ranges can change and update, depending on Microsoft removing and adding new datacenter capability, it is always worth rechecking the list if you find you start having problems with intermittent connectivity to check whether new ranges have been added that haven&#x27;t been whitelisted.</em></p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/azure/">Azure</a></li></ul></div></footer></article><article class="margin-bottom--xl"><header><h2 class="title_f1Hy"><a href="/2021/03/26/failed-to-delete-the-private-endpoint.error-call-to-microsoft.storage-storageaccounts-failed/">Failed to delete the private endpoint. Error: Call to Microsoft.Storage/storageAccounts failed</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2021-03-26T00:00:00.000Z">March 26, 2021</time> · <!-- -->One min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://luke.geek.nz" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://luke.geek.nz/img/logo.png" alt="Luke Murray"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://luke.geek.nz" target="_blank" rel="noopener noreferrer"><span>Luke Murray</span></a></div><small class="avatar__subtitle">Author</small></div></div></div></div></header><div class="markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="issue-description">Issue Description<a href="#issue-description" class="hash-link" aria-label="Direct link to Issue Description" title="Direct link to Issue Description">​</a></h2>
<p>Failed to delete the private endpoint. Error: Call to Microsoft.Storage/storageAccounts failed</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="root-cause">Root Cause<a href="#root-cause" class="hash-link" aria-label="Direct link to Root Cause" title="Direct link to Root Cause">​</a></h2>
<p>Azure Backup locks the storage account when you configure protection for any file share in the corresponding account. This provides protection against accidental deletion of a storage account with backed-up file shares.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="resolution">Resolution<a href="#resolution" class="hash-link" aria-label="Direct link to Resolution" title="Direct link to Resolution">​</a></h2>
<p>In my case, the Storage account I was attempting to remove the Private Endpoint from was an Azure File Sync storage account, that had Azure File Shares that were getting Backuped Up.</p>
<ul>
<li>Found and removed the lock on the storage account</li>
<li>Then successfully delete the private endpoint</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="more-info">More info<a href="#more-info" class="hash-link" aria-label="Direct link to More info" title="Direct link to More info">​</a></h2>
<p>Generally, it is recommended that keep the lock taken on the storage account by Azure Backup. If you delete the lock, your storage account will be prone to accidental deletion and if it&#x27;s deleted, you&#x27;ll lose your snapshots or backups.</p>
<p><a href="https://learn.microsoft.com/en-us/azure/backup/backup-afs?WT.mc_id=AZ-MVP-5004796#best-practices" target="_blank" rel="noopener noreferrer" title="https://learn.microsoft.com/en-us/azure/backup/backup-afs?WT.mc_id=AZ-MVP-5004796#best-practices">https://learn.microsoft.com/en-us/azure/backup/backup-afs#best-practices</a></p>
<p><a href="https://learn.microsoft.com/en-us/azure/azure-resource-manager/management/lock-resources" target="_blank" rel="noopener noreferrer" title="https://learn.microsoft.com/en-us/azure/azure-resource-manager/management/lock-resources?tabs=json&amp;WT.mc_id=AZ-MVP-5004796">https://learn.microsoft.com/en-us/azure/azure-resource-manager/management/lock-resources</a></p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/azure/">Azure</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Blog list page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/page/27/"><div class="pagination-nav__label">Newer Entries</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/page/29/"><div class="pagination-nav__label">Older Entries</div></a></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 luke.geek.nz. Powered by coffee, clouds and hamsters on wheels!</div></div></div></footer></div>
</body>
</html>