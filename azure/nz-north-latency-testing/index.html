<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">New Zealand North Latency Testing and Results | luke.geek.nz</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://luke.geek.nz/img/social-card.png"><meta data-rh="true" name="twitter:image" content="https://luke.geek.nz/img/social-card.png"><meta data-rh="true" property="og:url" content="https://luke.geek.nz/azure/nz-north-latency-testing/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="New Zealand North Latency Testing and Results | luke.geek.nz"><meta data-rh="true" name="description" content="An in-depth analysis of latency within the New Zealand North Azure region, including various scenarios and performance metrics."><meta data-rh="true" property="og:description" content="An in-depth analysis of latency within the New Zealand North Azure region, including various scenarios and performance metrics."><meta data-rh="true" name="keywords" content="azure,nznorth,latency,performance,availability zones,virtual networks,azure firewall"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2024-11-10T05:48:55.999Z"><meta data-rh="true" property="article:author" content="https://luke.geek.nz"><meta data-rh="true" property="article:tag" content="Azure"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://luke.geek.nz/azure/nz-north-latency-testing/"><link data-rh="true" rel="alternate" href="https://luke.geek.nz/azure/nz-north-latency-testing/" hreflang="en"><link data-rh="true" rel="alternate" href="https://luke.geek.nz/azure/nz-north-latency-testing/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://ZBH2T1WJQD-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://luke.geek.nz/azure/nz-north-latency-testing","mainEntityOfPage":"https://luke.geek.nz/azure/nz-north-latency-testing","url":"https://luke.geek.nz/azure/nz-north-latency-testing","headline":"New Zealand North Latency Testing and Results","name":"New Zealand North Latency Testing and Results","description":"An in-depth analysis of latency within the New Zealand North Azure region, including various scenarios and performance metrics.","datePublished":"2024-11-10T05:48:55.999Z","author":{"@type":"Person","name":"Luke Murray","description":"Author","url":"https://luke.geek.nz","image":"https://luke.geek.nz/img/logo.png"},"keywords":["azure","nznorth","latency","performance","availability zones","virtual networks","azure firewall"],"isPartOf":{"@type":"Blog","@id":"https://luke.geek.nz/","name":"Lukes Tech Blog - Unleashing the power of the cloud and other technologies!"}}</script><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="luke.geek.nz RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="luke.geek.nz Atom Feed">
<link rel="alternate" type="application/json" href="/feed.json" title="luke.geek.nz JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0QDLBY7NNN"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-0QDLBY7NNN",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.dd27eb3d.css">
<script src="/assets/js/runtime~main.ed599a25.js" defer="defer"></script>
<script src="/assets/js/main.625df2af.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="dark";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" style="background-color:#D3D3D3" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">If you haven't already, sign up for my Weekly Azure updates Newsletter, straight to your inbox! <a target="_blank" rel="noopener noreferrer" href="https://newsletter.azurefeeds.com/join">Subscribe now!</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="luke.geek.nz" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="luke.geek.nz" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">luke.geek.nz</b></a><a class="navbar__item navbar__link" href="/Tags/">Tags</a><a class="navbar__item navbar__link" href="/Archive/">Blog</a><a class="navbar__item navbar__link" href="/about/">About</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://www.youtube.com/channel/UCUG3TKDTAZz4UXshGrjBBoQ" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-icon" aria-label="YouTube">
              <svg width="24" height="24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M23.498,6.186c-0.273-1.186-1.143-2.144-2.332-2.417C18.389,3.153,12,3.153,12,3.153s-6.389,0-9.166,0.616
                  c-1.19,0.273-2.06,1.23-2.332,2.417C0,8.07,0,12,0,12s0,3.93,0.502,5.814c0.272,1.187,1.142,2.062,2.332,2.335
                  C5.611,20.847,12,20.847,12,20.847s6.389,0,9.166-0.698c1.189-0.273,2.059-1.148,2.332-2.335C24,15.93,24,12,24,12
                  S24,8.07,23.498,6.186z M9.545,15.568V8.432l6.545,3.568L9.545,15.568z"/>
              </svg>
            </a><a href="https://aus.social/@lukemurray" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-icon" aria-label="Mastodon">
              <svg height="20" width="20" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" xml:space="preserve">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                  <path d="M21.327 8.566c0-4.339-2.843-5.61-2.843-5.61-1.433-.658-3.894-.935-6.451-.956h-.063c-2.557.021-5.016.298-6.45.956 0 0-2.843 1.272-2.843 5.61 0 .993-.019 2.181.012 3.441.103 4.243.778 8.425 4.701 9.463 1.809.479 3.362.579 4.612.510 2.268-.126 3.541-.809 3.541-.809l-.075-1.646s-1.621.511-3.441.449c-1.804-.062-3.707-.194-3.999-2.409a4.523 4.523 0 0 1-.04-.621s1.77.433 4.014.536c1.372.063 2.658-.08 3.965-.236 2.506-.299 4.688-1.843 4.962-3.254.434-2.223.398-5.424.398-5.424zm-3.353 5.59h-2.081V9.057c0-1.075-.452-1.62-1.357-1.62-1 0-1.501.647-1.501 1.927v2.791h-2.069V9.364c0-1.28-.501-1.927-1.502-1.927-.905 0-1.357.546-1.357 1.62v5.099H6.026V8.903c0-1.074.273-1.927.823-2.558.566-.631 1.307-.955 2.228-.955 1.065 0 1.872.409 2.405 1.228l.518.869.519-.869c.533-.819 1.34-1.228 2.405-1.228.92 0 1.662.324 2.228.955.549.631.822 1.484.822 2.558v5.253z"></path>
                </g>
              </svg>
            </a><a href="https://bsky.app/profile/lukemurraynz.bsky.social" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-icon" aria-label="Bluesky">
              <svg class="octicon" xmlns="http://www.w3.org/2000/svg" role="img" viewBox="0 0 16 16" height="20" width="20" fill="currentColor">
                <title>Bluesky</title>
                <path d="M8 7.2c-.72-1.4-2.7-4.04-4.53-5.33C1.7.63 1.04.84.6 1.04.1 1.27 0 2.05 0 2.51c0 .46.25 3.77.42 4.32.54 1.82 2.47 2.45 4.25 2.25-2.6.38-4.92 1.33-1.88 4.71 3.33 3.46 4.57-.74 5.21-2.87.64 2.13 1.37 6.18 5.16 2.87 2.84-2.87.78-4.33-1.83-4.71 1.78.2 3.71-.43 4.25-2.25.17-.55.42-3.86.42-4.32 0-.46-.09-1.24-.6-1.47-.44-.2-1.11-.42-2.87.83A17.87 17.87 0 0 0 8 7.2Z"></path>
              </svg>
            </a><a href="https://twitter.com/lukemurraynz" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-icon" aria-label="X"><svg height="20" width="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 8.586l4.293-4.293a1 1 0 011.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 011.414-1.414L10 8.586z" clip-rule="evenodd"/>
          </svg></a><a href="https://www.linkedin.com/in/ljmurray/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-icon" aria-label="LinkedIn"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"></path></svg></a><a href="https://luke.geek.nz/rss" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-rss-link" aria-label="RSS"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2025</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/azure/microsoft-learn-contributor-chatmode/">Microsoft Learn Contributor Chatmode</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/azure/service-groups-terraform-azapi/">Deploying Azure Service Groups with Terraform AzAPI</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/azure/mcp-vscode-microsoft-learn/">Model Context Protocol (MCP) in VS Code with Microsoft Learn</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/azure/drasi-bastion-rbac-automation/">Automate Azure Bastion with Drasi Realtime RBAC Monitoring</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/azure/zone-redundancy-cli/">Validate Azure Zone Redundancy with az zones CLI</a></li></ul></div></nav></aside><main class="col col--7"><article class=""><header><h1 class="title_f1Hy">New Zealand North Latency Testing and Results</h1><div class="container_mt6G margin-vert--md"><time datetime="2024-11-10T05:48:55.999Z">November 10, 2024</time> · <!-- -->21 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://luke.geek.nz" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://luke.geek.nz/img/logo.png" alt="Luke Murray"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://luke.geek.nz" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Luke Murray</span></a></div><small class="authorTitle_nd0D" title="Author">Author</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div id="__blog-post-container" class="markdown"><p>New Zealand has a new <em>(and only)</em> Azure Cloud region: <a href="https://news.microsoft.com/aotearoa-datacenter?WT.mc_id=AZ-MVP-5004796" target="_blank" rel="noopener noreferrer">New Zealand North</a>. It&#x27;s not every day that we get to explore a new region! This article will examine the latency within the New Zealand North region and between its Availability Zones.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-overview">🔍 Overview<a href="#-overview" class="hash-link" aria-label="Direct link to 🔍 Overview" title="Direct link to 🔍 Overview">​</a></h2>
<p>New Zealand North region follows the newer, now standard, 3 + 0 model, with 3 <a href="https://learn.microsoft.com/azure/reliability/availability-zones-overview?tabs=azure-cli&amp;WT.mc_id=AZ-MVP-5004796" target="_blank" rel="noopener noreferrer">availability zones</a> (three separate datacenters that make up a region) but with <a href="https://learn.microsoft.com/azure/reliability/cross-region-replication-azure?WT.mc_id=AZ-MVP-5004796#regions-with-availability-zones-and-no-region-pair" target="_blank" rel="noopener noreferrer">no specified region pair</a> <em>(e.g., locally or in Australia)</em>. This means that Microsoft needs to assume which other region you may want to use as a failover. You can choose any region you want (e.g., object replication on an Azure storage account can be any region). Most of us in New Zealand will likely choose New Zealand North as the primary and Australia East as the secondary, where applicable. These three availability zones already provide more resiliency out of the box than most New Zealand organizations had before.</p>
<p><img decoding="async" loading="lazy" alt="New Zealand North - Azure Avaliability Zones" src="/assets/images/Regions_AvaliabilityZones-e4f192fc2962f1d9336f6d6c91fad1ff.jpg" width="4000" height="2250" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>At the time of this article, New Zealand North is not officially Generally Available (indicative timelines December). However, finding I can deploy to this region now on my own subscriptions, I couldn&#x27;t resist the opportunity to test the latency within the region. This article is intended as an indicative of what you can expect from New Zealand North, but I recommend running your own tests within your own environment if required. #geekingout</p></div></div>
<p>Let&#x27;s look at the lower end of our resiliency tier. We can see Azure Service Bus	starts at an SLA of 99.9% <em>(Y: 8h 45m 36s  M: 43m 12s  W: 10m 4s)</em>, and the higher SLA services such as Azure Virtual Machines and API Gateway can give up to 99.99% <em>(Y: 52m 35s  M: 4m 23s  W: 1m 1s)</em> <em>(how your solution and what services you use, impact your Composite SLA and Service Level Agreements so make sure you architect accordingly and review the <a href="https://www.microsoft.com/licensing/docs/view/Service-Level-Agreements-SLA-for-Online-Services?WT.mc_id=AZ-MVP-5004796" target="_blank" rel="noopener noreferrer">Microsoft SLA documentation</a>)</em>.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Availability zones are close enough to have low-latency connections to other availability zones. A high-performance network connects them with a round-trip latency of less than 2ms. However, availability zones are far enough apart to reduce the likelihood that more than one will be affected by local outages or weather. Availability zones have independent power, cooling, and networking infrastructure. They&#x27;re designed so that if one zone experiences an outage, then regional services, capacity, and high availability are supported by the remaining zones. They help your data stay synchronized and accessible when things go wrong.</p></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>If you are interested in more information about Availability Zones and the differences between Physical + Logical zones, make sure you have read a previous blog article of mine: <a href="https://luke.geek.nz/azure/azure-availability-zone-peering/" target="_blank" rel="noopener noreferrer">Azure Availability Zone Peering</a>. In essence, you need to be aware that Avalibility Zone 1 <em>(physical and logical avalibility zones can be different)</em>, does not always equal Availability Zone 1, especially if you have workloads spread across multiple subscriptions. For today, all my testing is done in a single subscription.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-latency-testing">📉 Latency Testing<a href="#-latency-testing" class="hash-link" aria-label="Direct link to 📉 Latency Testing" title="Direct link to 📉 Latency Testing">​</a></h2>
<p>But this is not a resiliency discussion; it is a latency discussion, so let&#x27;s examine the latency of what New Zealand North is giving us.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>Keep in mind that these tests are simply a point in time, and my open environment may not necessarily reflect your own Azure environment. At the time of these tests, the New Zealand North Region <a href="https://datacenters.microsoft.com/globe/explore?WT.mc_id=AZ-MVP-5004796" target="_blank" rel="noopener noreferrer">isn&#x27;t officially generally available</a>. This article is intended as an indicator of what you can expect from New Zealand North, but I recommend running your own tests within your own environment if required.</p></div></div>
<p>The latency from New Zealand to New Zealand North is around 15ms <em>(from Hamilton)</em>, which is a great improvement from the 32-50ms to Australia East <em>(from Hamilton)</em>, and the 190-230ms to the US <em>(from Hamilton)</em>.</p>
<p><img decoding="async" loading="lazy" alt="New Zealand North - Azure Latency" src="/assets/images/AzureSpeed_NewZealandNorthInternetLatency-b0964f20aafd1363563197a925f46176.jpg" width="1558" height="901" class="img_ev3q"></p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The test above was done from Hamilton <em>(using the <a href="https://www.azurespeed.com/Azure/Latency?WT.mc_id=AZ-MVP-5004796" target="_blank" rel="noopener noreferrer">Azure Speed Test</a>)</em>,. The latency is to the internet, so it is not the same as the latency between the Azure region and your on-premises <em>(or another cloud)</em> environment. Still, it is a good indicator of the latency you can expect from your users to your Azure resources. Your browser sends HTTPS requests to Azure blob files in each region. The median latency is calculated by measuring the time between the request and the response. The latency is measured in milliseconds (ms). The lower the latency, the better.</p></div></div>
<p>Because this is a standard Availability Zone <em>(3+0)</em> region, Microsoft has certain commitments they have around latency within their own network and to the internet. They have a <a href="https://learn.microsoft.com/en-us/azure/reliability/availability-zones-overview?tabs=azure-cli&amp;WT.mc_id=AZ-MVP-5004796" target="_blank" rel="noopener noreferrer">guidelines</a> of 2ms <em>(between zones)</em> and 10ms <em>(to the internet - don&#x27;t quote me on the SLA to the internet, its inferred by reading the SLA document, but I can&#x27;t confirm at this stage)</em>, but remember that is just the network latency, and not the application latency <em>(which is what you should be more concerned about)</em>. It&#x27;s worth noting on SLA _(Service Level Agreements)_that Microsoft does it per service vs per datacenter or rack.</p>
<p>So, let us prove that with the New Zealand North region, we can communicate between all regions in 2ms or under. For the purposes of this article, I will be using a Single subscription to do my testing <em>(so I know that each zone will be separate)</em>. I will be using a <a href="https://learn.microsoft.com/azure/virtual-network/virtual-networks-overview?WT.mc_id=AZ-MVP-5004796" target="_blank" rel="noopener noreferrer">Azure Virtual Network</a> <em>(VNet)</em> in the New Zealand North region, a VNET <em>(logical Virtual Network)</em> is zone-redundant out of the box.</p>
<p>Then I will be using a Windows Server 2022 <a href="https://learn.microsoft.com/azure/virtual-machines/windows/overview?WT.mc_id=AZ-MVP-5004796" target="_blank" rel="noopener noreferrer">Azure Virtual Machine</a> <em>(VM)</em> in each zone, and I will be using <a href="https://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-test-latency?tabs=windows&amp;WT.mc_id=AZ-MVP-5004796#test-vms-with-latte-or-sockperf" target="_blank" rel="noopener noreferrer">latte</a> to do my testing from each Virtual Machine.</p>
<ul>
<li>Each Test machine is <a href="https://learn.microsoft.com/azure/virtual-network/accelerated-networking-overview?tabs=redhat&amp;WT.mc_id=AZ-MVP-5004796" target="_blank" rel="noopener noreferrer">Accelerated Networking</a> enabled.</li>
<li>The size of each Virtual Machine is a: Windows Server 2022 Datacenter: Azure Edition - x64 Gen2 - Standard_D4s_v3 - 4 vCPUs, 16 GB memory, 127GB OS disk. Each Virtual Machine is created fresh, for the purpose of running this test.</li>
<li>Network Security Groups as left as default <em>(at the VM NIC)</em> and VirtualNetwork allow.</li>
<li>The version of <a href="https://github.com/microsoft/latte/" target="_blank" rel="noopener noreferrer">latte</a>, I am using is v1.0.0.</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Many  common network latency test tools, such as Ping, don&#x27;t measure TCP or UDP traffic. Tools like Ping use Internet Control Message Protocol (ICMP), which applications don&#x27;t use. ICMP traffic can be treated differently from application traffic and doesn&#x27;t directly affect application performance. ICMP test results don&#x27;t directly apply to TCP and UDP workloads.</p><p><a href="https://github.com/microsoft/latte" target="_blank" rel="noopener noreferrer">Latte</a> (for Windows) and <a href="https://github.com/mellanox/sockperf" target="_blank" rel="noopener noreferrer">SockPerf</a> (for Linux) measure only TCP or UDP payload delivery times. These tools use the following approach to measure network latency between two physical or virtual computers:</p><ul>
<li>Create a two-way communication channel between the computers by designating one as the sender and one as a receiver.</li>
<li>Send and receive packets in both directions and measure the round-trip time (RTT).</li>
</ul><p>Refer: <a href="https://learn.microsoft.com/en-us/azure/virtual-network/virtual-network-test-latency?tabs=windows&amp;WT.mc_id=AZ-MVP-5004796" target="_blank" rel="noopener noreferrer">Test network latency between Azure VMs</a></p></div></div>
<p>The latte command I will be using is: <code>latte -c -a 10.0.1.5:80 -i 60000</code>.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Even though at the time of this article, Windows Server 2025 has been generally avaliable for about a week. I have decided to use 2022, as it is a common and mature version of Windows Server in use today.</p></div></div>
<p>Inspired by <a href="https://www.linkedin.com/in/nicoladelfino" target="_blank" rel="noopener noreferrer">Nicola Delfino</a> post on <a href="https://nicolgit.github.io/azure-measuring-latency-across-availability-zones-in-we/" target="_blank" rel="noopener noreferrer">Measuring latency between Azure Availability Zones and the impact of an NVA in between V2</a> I will run through multiple scenarios for the New Zealand North Azure Region:</p>
<ul>
<li>Same v-net, same availability zone, same <a href="https://learn.microsoft.com/azure/virtual-machines/co-location?WT.mc_id=AZ-MVP-5004796" target="_blank" rel="noopener noreferrer">proximty placement</a> group</li>
<li>Same v-net across availability zones</li>
<li>multiple v-nets (in peering), same availability zone</li>
<li>multiple v-nets (in peering) across availability zones</li>
<li>multiple v-nets connected in a Hub &amp; Spoke topology and Routing via Azure Firewall</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-scenario-1---same-virtual-network-same-availability-zone-same-proximty-placement-group">🏢 Scenario 1 - Same Virtual Network, same availability zone, same proximty placement group<a href="#-scenario-1---same-virtual-network-same-availability-zone-same-proximty-placement-group" class="hash-link" aria-label="Direct link to 🏢 Scenario 1 - Same Virtual Network, same availability zone, same proximty placement group" title="Direct link to 🏢 Scenario 1 - Same Virtual Network, same availability zone, same proximty placement group">​</a></h2>
<p>In this scenario, we will have a single VNET, with a single subnet, and two virtual machines in the same availability zone, and the same <a href="https://learn.microsoft.com/azure/virtual-machines/co-location?WT.mc_id=AZ-MVP-5004796" target="_blank" rel="noopener noreferrer">proximty placement</a> group.</p>
<p><img decoding="async" loading="lazy" alt="Same VNET, same availability zone, same proximity placement group" src="/assets/images/NZN_LatencyTest_ProximityGroup-6d011f086e68dbeee14a254970c3f343.JPG" width="3320" height="1200" class="img_ev3q"></p>
<p>In this example, we have VM1 talking to VM2.</p>
<p><strong>VM1 (Sender - 10.0.1.4) - VM2 (Receiver - 10.0.1.5)</strong></p>
<table><thead><tr><th>Metric</th><th>Value</th><th>Notes</th></tr></thead><tbody><tr><td><strong>Protocol</strong></td><td>TCP</td><td>Connection-oriented, reliable</td></tr><tr><td><strong>Send Method</strong></td><td>Blocking</td><td>Waits for completion</td></tr><tr><td><strong>Receive Method</strong></td><td>Blocking</td><td>Waits for completion</td></tr><tr><td><strong>SO_SNDBUF</strong></td><td>Default</td><td>Default socket send buffer size</td></tr><tr><td><strong>SO_RCVBUF</strong></td><td>Default</td><td>Default socket receive buffer size</td></tr><tr><td><strong>Msg Size (byte)</strong></td><td>4</td><td>Small message payload size</td></tr><tr><td><strong>Iterations</strong></td><td>60,000</td><td>Number of send/receive cycles</td></tr><tr><td><strong>Latency (usec)</strong></td><td><strong>72.75</strong></td><td>Average time per message</td></tr><tr><td><strong>CPU (%)</strong></td><td>6.5</td><td>CPU utilization during test</td></tr><tr><td><strong>CtxSwitch/sec</strong></td><td>27,874 (2.03/iteration)</td><td>Context switches per second</td></tr><tr><td><strong>SysCall/sec</strong></td><td>28,590 (2.08/iteration)</td><td>System calls per second</td></tr><tr><td><strong>Interrupt/sec</strong></td><td>58,447 (4.25/iteration)</td><td>Hardware interrupts per second</td></tr></tbody></table>
<p><strong>Latency(usec): 72.75</strong> – The average latency per message is 72.75 microseconds. This is the time it takes for a message to be sent and received back, which is relatively low and suggests a reasonably fast response time for small message sizes.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-scenario-2---same-virtual-network-same-availability-zone-virtual-machine-not-in-proximity-placement-group">🌐 Scenario 2 - Same Virtual Network, same availability zone, virtual machine NOT in proximity placement group<a href="#-scenario-2---same-virtual-network-same-availability-zone-virtual-machine-not-in-proximity-placement-group" class="hash-link" aria-label="Direct link to 🌐 Scenario 2 - Same Virtual Network, same availability zone, virtual machine NOT in proximity placement group" title="Direct link to 🌐 Scenario 2 - Same Virtual Network, same availability zone, virtual machine NOT in proximity placement group">​</a></h2>
<p>In this scenario, we will have a single VNET, with a single subnet, and two virtual machines in the same availability zone, but not in the same proximty placement group.</p>
<p><img decoding="async" loading="lazy" alt="Same VNET, same availability zone, VM NOT in proximity placement group" src="/assets/images/NZN_LatencyTest_NoProximityGroup-6a5909de82483f2eaf182671dc8d3059.JPG" width="3363" height="1213" class="img_ev3q"></p>
<p>We will be talking from VM1 to VM3.</p>
<p><strong>VM1 (Sender) - VM3 (Receiver)</strong></p>
<table><thead><tr><th>Metric</th><th>Value</th><th>Notes</th></tr></thead><tbody><tr><td><strong>Protocol</strong></td><td>TCP</td><td>Connection-oriented, reliable</td></tr><tr><td><strong>Send Method</strong></td><td>Blocking</td><td>Waits for completion</td></tr><tr><td><strong>Receive Method</strong></td><td>Blocking</td><td>Waits for completion</td></tr><tr><td><strong>SO_SNDBUF</strong></td><td>Default</td><td>Default socket send buffer size</td></tr><tr><td><strong>SO_RCVBUF</strong></td><td>Default</td><td>Default socket receive buffer size</td></tr><tr><td><strong>Msg Size (byte)</strong></td><td>4</td><td>Small message payload size</td></tr><tr><td><strong>Iterations</strong></td><td>60,000</td><td>Number of send/receive cycles</td></tr><tr><td><strong>Latency (usec)</strong></td><td><strong>55.97</strong></td><td>Average time per message</td></tr><tr><td><strong>CPU (%)</strong></td><td>14.9</td><td>CPU utilization during test</td></tr><tr><td><strong>CtxSwitch/sec</strong></td><td>36,652 (2.05/iteration)</td><td>Context switches per second</td></tr><tr><td><strong>SysCall/sec</strong></td><td>39,293 (2.20/iteration)</td><td>System calls per second</td></tr><tr><td><strong>Interrupt/sec</strong></td><td>68,617 (3.84/iteration)</td><td>Hardware interrupts per second</td></tr></tbody></table>
<p>The table lists the latency and system performance between <strong>VM1 (Sender)</strong> and <strong>VM3 (Receiver)</strong>. The average latency per message is <strong>55.97 microseconds</strong>, which is interesting and slightly lower than the previous scenario, and not what I expected, however, could be luck of the draw - something worth noting that without a proximity placement group, the next time I would deallocate this Virtual Machine, it could be spun up in a separate place within the zone.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-scenario-3---same-virtual-network-across-availability-zones">🔗 Scenario 3 - Same Virtual Network, across availability zones<a href="#-scenario-3---same-virtual-network-across-availability-zones" class="hash-link" aria-label="Direct link to 🔗 Scenario 3 - Same Virtual Network, across availability zones" title="Direct link to 🔗 Scenario 3 - Same Virtual Network, across availability zones">​</a></h2>
<p>In this scenario, we will have a single VNET with a single subnet and two virtual machines in different availability zones.</p>
<p>We keep the same VM1 <em>(in Zone 1)</em>, but we will be talking to VM4 and VM5 (which are in different availability zones). VM4 is in Zone 2 and VM5 is in Zone 3.</p>
<p><img decoding="async" loading="lazy" alt="Same VNET, across availability zones" src="/assets/images/NZN_LatencyTest_AvaliabilityGroups-992b42046a0afedd99a4a38b434f6a91.JPG" width="4000" height="2250" class="img_ev3q"></p>
<p>First lets look at VM1 (Avaliability 1) talking to VM4 <em>(Avalibility Zone 2)</em>.</p>
<p><strong>VM1 (Sender) - VM4 (Receiver)</strong></p>
<table><thead><tr><th>Metric</th><th>Value</th><th>Notes</th></tr></thead><tbody><tr><td><strong>Protocol</strong></td><td>TCP</td><td>Connection-oriented, reliable</td></tr><tr><td><strong>Send Method</strong></td><td>Blocking</td><td>Waits for completion</td></tr><tr><td><strong>Receive Method</strong></td><td>Blocking</td><td>Waits for completion</td></tr><tr><td><strong>SO_SNDBUF</strong></td><td>Default</td><td>Default socket send buffer size</td></tr><tr><td><strong>SO_RCVBUF</strong></td><td>Default</td><td>Default socket receive buffer size</td></tr><tr><td><strong>Msg Size (byte)</strong></td><td>4</td><td>Small message payload size</td></tr><tr><td><strong>Iterations</strong></td><td>60,000</td><td>Number of send/receive cycles</td></tr><tr><td><strong>Latency (usec)</strong></td><td><strong>559.67</strong></td><td>Average time per message</td></tr><tr><td><strong>CPU (%)</strong></td><td>1.5</td><td>CPU utilization during test</td></tr><tr><td><strong>CtxSwitch/sec</strong></td><td>3,742 (2.09/iteration)</td><td>Context switches per second</td></tr><tr><td><strong>SysCall/sec</strong></td><td>4,529 (2.53/iteration)</td><td>System calls per second</td></tr><tr><td><strong>Interrupt/sec</strong></td><td>8,801 (4.93/iteration)</td><td>Hardware interrupts per second</td></tr></tbody></table>
<p>The table summarizes the latency and system performance between <strong>VM1 (Sender)</strong> and <strong>VM4 (Receiver)</strong>. The average latency per message is <strong>559.67 microseconds</strong>, significantly higher than in the previous scenarios. This is expected as the two virtual machines are in different availability zones.</p>
<p>Next lets look at VM1 (Avaliability 1) talking to VM5 <em>(Avalibility Zone 3)</em>.</p>
<p><strong>VM1 (Sender) - VM5 (Receiver)</strong></p>
<table><thead><tr><th>Metric</th><th>Value</th><th>Notes</th></tr></thead><tbody><tr><td><strong>Protocol</strong></td><td>TCP</td><td>Connection-oriented, reliable</td></tr><tr><td><strong>Send Method</strong></td><td>Blocking</td><td>Waits for completion</td></tr><tr><td><strong>Receive Method</strong></td><td>Blocking</td><td>Waits for completion</td></tr><tr><td><strong>SO_SNDBUF</strong></td><td>Default</td><td>Default socket send buffer size</td></tr><tr><td><strong>SO_RCVBUF</strong></td><td>Default</td><td>Default socket receive buffer size</td></tr><tr><td><strong>Msg Size (byte)</strong></td><td>4</td><td>Small message payload size</td></tr><tr><td><strong>Iterations</strong></td><td>60,000</td><td>Number of send/receive cycles</td></tr><tr><td><strong>Latency (usec)</strong></td><td><strong>559.25</strong></td><td>Average time per message</td></tr><tr><td><strong>CPU (%)</strong></td><td>0.9</td><td>CPU utilization during test</td></tr><tr><td><strong>CtxSwitch/sec</strong></td><td>3,868 (2.16/iteration)</td><td>Context switches per second</td></tr><tr><td><strong>SysCall/sec</strong></td><td>4,464 (2.50/iteration)</td><td>System calls per second</td></tr><tr><td><strong>Interrupt/sec</strong></td><td>7,721 (4.32/iteration)</td><td>Hardware interrupts per second</td></tr></tbody></table>
<p>This table summarizes the latency and system performance between <strong>VM1 (Sender)</strong> and <strong>VM5 (Receiver)</strong>. The average latency per message is <strong>559.25 microseconds</strong>, which is similar to the previous scenario. This is expected as the two virtual machines are in different availability zones.</p>
<p>Finally, lets look at VM4 <em>(Avaliability Zone 2)</em> talking to VM5 <em>(Avalibility Zone 3)</em>.</p>
<p>VM4 (Sender) - VM5 (Receiver)</p>
<table><thead><tr><th>Metric</th><th>Value</th><th>Notes</th></tr></thead><tbody><tr><td><strong>Protocol</strong></td><td>TCP</td><td>Connection-oriented, reliable</td></tr><tr><td><strong>Send Method</strong></td><td>Blocking</td><td>Waits for completion</td></tr><tr><td><strong>Receive Method</strong></td><td>Blocking</td><td>Waits for completion</td></tr><tr><td><strong>SO_SNDBUF</strong></td><td>Default</td><td>Default socket send buffer size</td></tr><tr><td><strong>SO_RCVBUF</strong></td><td>Default</td><td>Default socket receive buffer size</td></tr><tr><td><strong>Msg Size (byte)</strong></td><td>4</td><td>Small message payload size</td></tr><tr><td><strong>Iterations</strong></td><td>60,000</td><td>Number of send/receive cycles</td></tr><tr><td><strong>Latency (usec)</strong></td><td><strong>494.23</strong></td><td>Average time per message</td></tr><tr><td><strong>CPU (%)</strong></td><td>3.6</td><td>CPU utilization during test</td></tr><tr><td><strong>CtxSwitch/sec</strong></td><td>5,218 (2.58/iteration)</td><td>Context switches per second</td></tr><tr><td><strong>SysCall/sec</strong></td><td>13,445 (6.65/iteration)</td><td>System calls per second</td></tr><tr><td><strong>Interrupt/sec</strong></td><td>9,212 (4.55/iteration)</td><td>Hardware interrupts per second</td></tr></tbody></table>
<p>This table summarizes the latency and system performance between <strong>VM4 (Sender)</strong> and <strong>VM5 (Receiver)</strong>. The average latency per message is <strong>494.23 microseconds</strong>, which is slightly lower than the previous scenarios. This is expected as the two virtual machines are in different availability zones.</p>
<p>Even though the latency is higher than the previous scenarios, it is still relatively low and suggests a reasonably fast response time for small message sizes.</p>
<ul>
<li>VM1 to VM4: 559.67 microseconds</li>
<li>VM1 to VM5: 559.25 microseconds</li>
<li>VM4 to VM5: 494.23 microseconds</li>
</ul>
<p>All of these latency values are <strong>well below 1 millisecond</strong>, indicating <strong>sub-millisecond latency</strong> between the VMs, in different zones within the same Virtual Network and subnet.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="--scenario-4---multiple-virtual-networks-peered-same-availability-zone">🖧  Scenario 4 - Multiple Virtual Networks (peered), same availability zone<a href="#--scenario-4---multiple-virtual-networks-peered-same-availability-zone" class="hash-link" aria-label="Direct link to 🖧  Scenario 4 - Multiple Virtual Networks (peered), same availability zone" title="Direct link to 🖧  Scenario 4 - Multiple Virtual Networks (peered), same availability zone">​</a></h2>
<p>In this scenario, we will have two virtual networks, each with a single subnet, and two virtual machines in the same availability zone.</p>
<p>We will have VM1 <em>(10.0.1.4)</em> in our Spoke1 network, talking to VM2 <em>(10.0.2.4)</em>, in our spoke2 network, each VM is in Availability Zone 1 and the two Virtual Networks are peered through a Hub Virtual Network, with user-defined routes, so they can talk to each other. I made use of <a href="https://learn.microsoft.com/azure/virtual-network-manager/overview?WT.mc_id=AZ-MVP-5004796" target="_blank" rel="noopener noreferrer">Azure Virtual Network Manager</a>, and a Mesh configuration to deploy the peering and user defined routes between the Virtual Networks.</p>
<p><img decoding="async" loading="lazy" alt="Multiple VNETs (peered), same availability zone" src="/assets/images/NZN_LatencyTest_VNetPeering-d43beb2882da418f9bec145833d89517.JPG" width="4000" height="2250" class="img_ev3q"></p>
<p><strong>VM1 (Sender) - VM2 (Receiver) through VNet Peering</strong></p>
<table><thead><tr><th>Metric</th><th>Value</th><th>Notes</th></tr></thead><tbody><tr><td><strong>Protocol</strong></td><td>TCP</td><td>Connection-oriented, reliable</td></tr><tr><td><strong>Send Method</strong></td><td>Blocking</td><td>Waits for completion</td></tr><tr><td><strong>Receive Method</strong></td><td>Blocking</td><td>Waits for completion</td></tr><tr><td><strong>SO_SNDBUF</strong></td><td>Default</td><td>Default socket send buffer size</td></tr><tr><td><strong>SO_RCVBUF</strong></td><td>Default</td><td>Default socket receive buffer size</td></tr><tr><td><strong>Msg Size (byte)</strong></td><td>4</td><td>Small message payload size</td></tr><tr><td><strong>Iterations</strong></td><td>60,000</td><td>Number of send/receive cycles</td></tr><tr><td><strong>Latency (usec)</strong></td><td><strong>67.81</strong></td><td>Average time per message</td></tr><tr><td><strong>CPU (%)</strong></td><td>7.7</td><td>CPU utilization during test</td></tr><tr><td><strong>CtxSwitch/sec</strong></td><td>30,010 (2.04/iteration)</td><td>Context switches per second</td></tr><tr><td><strong>SysCall/sec</strong></td><td>31,328 (2.12/iteration)</td><td>System calls per second</td></tr><tr><td><strong>Interrupt/sec</strong></td><td>66,269 (4.49/iteration)</td><td>Hardware interrupts per second</td></tr></tbody></table>
<p>This table summarizes the latency and system performance between <strong>VM1 (Sender)</strong> and <strong>VM2 (Receiver)</strong> through VNet peering. The latency of 67.81 microseconds is still well under 1 millisecond for a Virtual Machine talking over a Virtual Network peering within the same Availability Zone.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-scenario-5---multiple-virtual-networks-peered-across-availability-zones">🖧 Scenario 5 - Multiple Virtual Networks (peered), across availability zones<a href="#-scenario-5---multiple-virtual-networks-peered-across-availability-zones" class="hash-link" aria-label="Direct link to 🖧 Scenario 5 - Multiple Virtual Networks (peered), across availability zones" title="Direct link to 🖧 Scenario 5 - Multiple Virtual Networks (peered), across availability zones">​</a></h2>
<p>In this scenario, we will have two virtual networks, each with a single subnet, and two virtual machines in different availability zones.</p>
<p>We will use the good old trusty VM1 again, and this time we will be talking to VM3 <em>(Avaliability Zone 2)</em> and VM4 <em>(Avaliability Zone 3)</em>, each in their own Virtual Network, and peered through a Hub Virtual Network, with user defined routes, so they can talk to each other.</p>
<p><img decoding="async" loading="lazy" alt="Multiple VNETs (peered), across availability zones" src="/assets/images/NZN_LatencyTest_VNetPeering_AvaliabilityZones-fe0087480090af245d585ca2bc7fb15c.JPG" width="4000" height="2250" class="img_ev3q"></p>
<p>Here are the performance results for <strong>VM1 (Sender) to VM3 (Receiver) through VNet peering</strong>. VM1 is in <strong>Availability Zone 1</strong> and VM3 is in <strong>Availability Zone 2</strong>.:</p>
<p><strong>VM1 (Sender) - VM3 (Receiver) in Availability Zone 2 through VNet Peering</strong></p>
<table><thead><tr><th>Metric</th><th>Value</th><th>Notes</th></tr></thead><tbody><tr><td><strong>Protocol</strong></td><td>TCP</td><td>Connection-oriented, reliable</td></tr><tr><td><strong>Send Method</strong></td><td>Blocking</td><td>Waits for completion</td></tr><tr><td><strong>Receive Method</strong></td><td>Blocking</td><td>Waits for completion</td></tr><tr><td><strong>SO_SNDBUF</strong></td><td>Default</td><td>Default socket send buffer size</td></tr><tr><td><strong>SO_RCVBUF</strong></td><td>Default</td><td>Default socket receive buffer size</td></tr><tr><td><strong>Msg Size (byte)</strong></td><td>4</td><td>Small message payload size</td></tr><tr><td><strong>Iterations</strong></td><td>60,000</td><td>Number of send/receive cycles</td></tr><tr><td><strong>Latency (usec)</strong></td><td><strong>542.39</strong></td><td>Average time per message</td></tr><tr><td><strong>CPU (%)</strong></td><td>1.9</td><td>CPU utilization during test</td></tr><tr><td><strong>CtxSwitch/sec</strong></td><td>3,933 (2.13/iteration)</td><td>Context switches per second</td></tr><tr><td><strong>SysCall/sec</strong></td><td>5,043 (2.74/iteration)</td><td>System calls per second</td></tr><tr><td><strong>Interrupt/sec</strong></td><td>8,293 (4.50/iteration)</td><td>Hardware interrupts per second</td></tr></tbody></table>
<p>This table summarizes the latency and system performance between <strong>VM1 (Sender)</strong> and <strong>VM3 (Receiver)</strong> through VNet peering. The latency of 542.39 microseconds is still under 1 millisecond, between zones over a peered Virtual Network.</p>
<p>Now, we need to test VM1 <em>(Avaliability Zone 1)</em> by talking to VM4 <em>(Avaliability Zone 3)</em> through VNet peering.</p>
<p><strong>VM1 (Sender) - VM4 (Receiver) in Availability Zone 3 through VNet Peering</strong></p>
<table><thead><tr><th>Metric</th><th>Value</th><th>Notes</th></tr></thead><tbody><tr><td><strong>Protocol</strong></td><td>TCP</td><td>Connection-oriented, reliable</td></tr><tr><td><strong>Send Method</strong></td><td>Blocking</td><td>Waits for completion</td></tr><tr><td><strong>Receive Method</strong></td><td>Blocking</td><td>Waits for completion</td></tr><tr><td><strong>SO_SNDBUF</strong></td><td>Default</td><td>Default socket send buffer size</td></tr><tr><td><strong>SO_RCVBUF</strong></td><td>Default</td><td>Default socket receive buffer size</td></tr><tr><td><strong>Msg Size (byte)</strong></td><td>4</td><td>Small message payload size</td></tr><tr><td><strong>Iterations</strong></td><td>60,000</td><td>Number of send/receive cycles</td></tr><tr><td><strong>Latency (usec)</strong></td><td><strong>311.53</strong></td><td>Average time per message</td></tr><tr><td><strong>CPU (%)</strong></td><td>13.4</td><td>CPU utilization during test</td></tr><tr><td><strong>CtxSwitch/sec</strong></td><td>9,721 (3.03/iteration)</td><td>Context switches per second</td></tr><tr><td><strong>SysCall/sec</strong></td><td>37,752 (11.76/iteration)</td><td>System calls per second</td></tr><tr><td><strong>Interrupt/sec</strong></td><td>13,496 (4.20/iteration)</td><td>Hardware interrupts per second</td></tr></tbody></table>
<p>This table summarizes the latency and system performance between <strong>VM1 (Sender)</strong> and <strong>VM4 (Receiver)</strong> in <strong>Availability Zone 3</strong> through <strong>VNet peering</strong>. The latency of 311.53 microseconds is still under 1 millisecond.</p>
<p>So far, we have seen that the latency between Virtual Machines in different availability zones over a peered Virtual Network is still under 1 millisecond. This is a great result and shows that Azure&#x27;s network infrastructure is capable of providing low-latency communication between Virtual Machines in different availability zones.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="️-scenario-6---multiple-virtual-networks-connected-in-a-hub--spoke-topology-and-routing-via-azure-firewall">🛡️ Scenario 6 - Multiple Virtual Networks connected in a Hub &amp; Spoke topology and Routing via Azure Firewall<a href="#️-scenario-6---multiple-virtual-networks-connected-in-a-hub--spoke-topology-and-routing-via-azure-firewall" class="hash-link" aria-label="Direct link to 🛡️ Scenario 6 - Multiple Virtual Networks connected in a Hub &amp; Spoke topology and Routing via Azure Firewall" title="Direct link to 🛡️ Scenario 6 - Multiple Virtual Networks connected in a Hub &amp; Spoke topology and Routing via Azure Firewall">​</a></h2>
<p>In this scenario, we will have three virtual networks, each with a single subnet, and three virtual machines in different availability zones, connecting to each other through a Hub Virtual Network, with user defined routes, and routing through an Azure Firewall.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>If you are going through this in a Lab environment, make sure you have the necessary dependencies, such as the lattle executable setup on Virtual Machines or can share between them. As soon as the Firewall is in the mix, the default rules will block the traffic, so you will need to make sure you have the necessary rules in place to allow the traffic through.</p></div></div>
<p><img decoding="async" loading="lazy" alt="Multiple VNETs connected in a Hub &amp;amp; Spoke topology and Routing via Azure Firewall" src="/assets/images/NZN_LatencyTest_HubSpoke-96ffb5373593e3971e51882e63178466.JPG" width="4000" height="2250" class="img_ev3q"></p>
<p>The Azure Firewall configuration is a Standard SKU, with a Firewall policy and zone-redundant <em>(across all 3 zones)</em>.</p>
<p>We will start with VM1 in Avalibility Zone 1, talking to VM2 in Avalibility Zone 2 via the Azure Firewall and hub and spoke network.</p>
<p><strong>VM 1 (Sender)</strong> to <strong>VM 2 (Receiver) -  Availability Zone 2 through Hub and Spoke Peering with Azure Firewall</strong></p>
<table><thead><tr><th>Metric</th><th>Value</th></tr></thead><tbody><tr><td><strong>Protocol</strong></td><td>TCP</td></tr><tr><td><strong>SendMethod</strong></td><td>Blocking</td></tr><tr><td><strong>ReceiveMethod</strong></td><td>Blocking</td></tr><tr><td><strong>SO_SNDBUF</strong></td><td>Default</td></tr><tr><td><strong>SO_RCVBUF</strong></td><td>Default</td></tr><tr><td><strong>MsgSize (bytes)</strong></td><td>4</td></tr><tr><td><strong>Iterations</strong></td><td>60000</td></tr><tr><td><strong>Latency (usec)</strong></td><td><strong>1017.12</strong></td></tr><tr><td><strong>CPU (%)</strong></td><td>1.1</td></tr><tr><td><strong>CtxSwitch/sec</strong></td><td>2692 (2.74/iteration)</td></tr><tr><td><strong>SysCall/sec</strong></td><td>5563 (5.66/iteration)</td></tr><tr><td><strong>Interrupt/sec</strong></td><td>4380 (4.45/iteration)</td></tr></tbody></table>
<p>This is the longest time we have seen so far, but still boarding on 1 millisecond, we can see how processing through the Azure Firewall and Hub and Spoke adds additional latency <em>(as we would expect)</em>  are routing through an Azure Firewall.</p>
<p>Next, we will look at VM1 in Avalibility Zone 1, talk to VM3 in Avalibility Zone 3 and spoke 3 via the Azure Firewall and hub and spoke network.</p>
<p><strong>VM 1 (Sender)</strong> to <strong>VM 3 (Receiver)</strong> -  Availability Zone 3 through Hub and Spoke Peering with Azure Firewall</p>
<table><thead><tr><th>Metric</th><th>Value</th></tr></thead><tbody><tr><td><strong>Protocol</strong></td><td>TCP</td></tr><tr><td><strong>SendMethod</strong></td><td>Blocking</td></tr><tr><td><strong>ReceiveMethod</strong></td><td>Blocking</td></tr><tr><td><strong>SO_SNDBUF</strong></td><td>Default</td></tr><tr><td><strong>SO_RCVBUF</strong></td><td>Default</td></tr><tr><td><strong>MsgSize (bytes)</strong></td><td>4</td></tr><tr><td><strong>Iterations</strong></td><td>60000</td></tr><tr><td><strong>Latency (usec)</strong></td><td><strong>963.17</strong></td></tr><tr><td><strong>CPU (%)</strong></td><td>0.8</td></tr><tr><td><strong>CtxSwitch/sec</strong></td><td>2450 (2.36/iteration)</td></tr><tr><td><strong>SysCall/sec</strong></td><td>4344 (4.18/iteration)</td></tr><tr><td><strong>Interrupt/sec</strong></td><td>4486 (4.32/iteration)</td></tr></tbody></table>
<p>This is a slightly lower latency than the previous scenario, but still underneath 1 millisecond, we can see how processing through the Azure Firewall and Hub and Spoke adds additional latency <em>(as we would expect)</em>  are routing through an Azure Firewall.</p>
<p>Finally, we will look at VM2 in Avalibility Zone 2, talk to VM3 in Avalibility Zone 3, and spoke 3 via the Azure Firewall and hub and spoke network.</p>
<table><thead><tr><th>Metric</th><th>Value</th></tr></thead><tbody><tr><td><strong>Protocol</strong></td><td>TCP</td></tr><tr><td><strong>SendMethod</strong></td><td>Blocking</td></tr><tr><td><strong>ReceiveMethod</strong></td><td>Blocking</td></tr><tr><td><strong>SO_SNDBUF</strong></td><td>Default</td></tr><tr><td><strong>SO_RCVBUF</strong></td><td>Default</td></tr><tr><td><strong>MsgSize (bytes)</strong></td><td>4</td></tr><tr><td><strong>Iterations</strong></td><td>60000</td></tr><tr><td><strong>Latency (usec)</strong></td><td><strong>963.47</strong></td></tr><tr><td><strong>CPU (%)</strong></td><td>1.0</td></tr><tr><td><strong>CtxSwitch/sec</strong></td><td>2933 (2.83/iteration)</td></tr><tr><td><strong>SysCall/sec</strong></td><td>4756 (4.58/iteration)</td></tr><tr><td><strong>Interrupt/sec</strong></td><td>4556 (4.39/iteration)</td></tr></tbody></table>
<p>This is a slightly lower latency than the previous scenario, but still underneath 1 millisecond, we can see how processing through the Azure Firewall and Hub and Spoke adds additional latency <em>(as we would expect)</em>  are routing through an Azure Firewall.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-summary">📝 Summary<a href="#-summary" class="hash-link" aria-label="Direct link to 📝 Summary" title="Direct link to 📝 Summary">​</a></h2>
<p>The speed for inter-compute communication between the same and different Availability Zones for NZ North is very impressive. The latency between Virtual Machines in the same availability zone is well under 1 millisecond. The latency between Virtual Machines in different availability zones over a peered Virtual Network is still under 1 millisecond. Even with Azure Firewall and a Hub and Spoke network, the latency is still around 1 millisecond. This is a great result and shows that Azure&#x27;s network infrastructure is capable of providing low-latency communication between Virtual Machines in different availability zones.</p>
<p>Summary of my findings today, ordered by shortest to longest latency:</p>
<table><thead><tr><th>Scenario</th><th>Latency (µs)</th><th>Description</th></tr></thead><tbody><tr><td>Scenario 2</td><td>55.97</td><td>Same VNET, same availability zone, VM NOT in proximity placement group</td></tr><tr><td>Scenario 4</td><td>67.81</td><td>Multiple VNETs (peered), same availability zone</td></tr><tr><td>Scenario 1</td><td>72.75</td><td>Same VNET, same availability zone, same proximity placement group</td></tr><tr><td>Scenario 5 (VM1 to VM4)</td><td>311.53</td><td>Multiple VNETs (peered), across availability zones (VM1 to VM4)</td></tr><tr><td>Scenario 3 (VM4 to VM5)</td><td>494.23</td><td>Same VNET, across availability zones (VM4 to VM5)</td></tr><tr><td>Scenario 5 (VM1 to VM3)</td><td>542.39</td><td>Multiple VNETs (peered), across availability zones (VM1 to VM3)</td></tr><tr><td>Scenario 3 (VM1 to VM5)</td><td>559.25</td><td>Same VNET, across availability zones (VM1 to VM5)</td></tr><tr><td>Scenario 3 (VM1 to VM4)</td><td>559.67</td><td>Same VNET, across availability zones (VM1 to VM4)</td></tr><tr><td>Scenario 6 (VM1 to VM3)</td><td>963.17</td><td>Multiple VNETs, Hub &amp; Spoke, Azure Firewall (VM1 to VM3)</td></tr><tr><td>Scenario 6 (VM2 to VM3)</td><td>963.47</td><td>Multiple VNETs, Hub &amp; Spoke, Azure Firewall (VM2 to VM3)</td></tr><tr><td>Scenario 6 (VM1 to VM2)</td><td>1017.12</td><td>Multiple VNETs, Hub &amp; Spoke, Azure Firewall (VM1 to VM2)</td></tr></tbody></table>
<p>Based on this testing, the New Zealand North region appears to have very low latency when compared with other Azure regions. This is great news for New Zealand organizations that are looking to move their workloads to the cloud. The low latency will help to ensure that their applications are responsive and performant.</p></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/tags/azure/">Azure</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/azure/deploy-streamlit-to-container-apps/"><div class="pagination-nav__sublabel">Newer post</div><div class="pagination-nav__label">Deploying a Streamlit App to Azure Container Apps</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/azure/enhancing-github-copilot-with-custom-instructions/"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">Enhancing GitHub Copilot with Custom Instructions</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#-overview" class="table-of-contents__link toc-highlight">🔍 Overview</a></li><li><a href="#-latency-testing" class="table-of-contents__link toc-highlight">📉 Latency Testing</a></li><li><a href="#-scenario-1---same-virtual-network-same-availability-zone-same-proximty-placement-group" class="table-of-contents__link toc-highlight">🏢 Scenario 1 - Same Virtual Network, same availability zone, same proximty placement group</a></li><li><a href="#-scenario-2---same-virtual-network-same-availability-zone-virtual-machine-not-in-proximity-placement-group" class="table-of-contents__link toc-highlight">🌐 Scenario 2 - Same Virtual Network, same availability zone, virtual machine NOT in proximity placement group</a></li><li><a href="#-scenario-3---same-virtual-network-across-availability-zones" class="table-of-contents__link toc-highlight">🔗 Scenario 3 - Same Virtual Network, across availability zones</a></li><li><a href="#--scenario-4---multiple-virtual-networks-peered-same-availability-zone" class="table-of-contents__link toc-highlight">🖧  Scenario 4 - Multiple Virtual Networks (peered), same availability zone</a></li><li><a href="#-scenario-5---multiple-virtual-networks-peered-across-availability-zones" class="table-of-contents__link toc-highlight">🖧 Scenario 5 - Multiple Virtual Networks (peered), across availability zones</a></li><li><a href="#️-scenario-6---multiple-virtual-networks-connected-in-a-hub--spoke-topology-and-routing-via-azure-firewall" class="table-of-contents__link toc-highlight">🛡️ Scenario 6 - Multiple Virtual Networks connected in a Hub &amp; Spoke topology and Routing via Azure Firewall</a></li><li><a href="#-summary" class="table-of-contents__link toc-highlight">📝 Summary</a></li></ul></div></div></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 luke.geek.nz. Powered by coffee, clouds and hamsters on wheels!</div></div></div></footer></div>
</body>
</html>