<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Microsoft Azure - ZonalAllocationFailed | luke.geek.nz</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://luke.geek.nz/img/social-card.png"><meta data-rh="true" name="twitter:image" content="https://luke.geek.nz/img/social-card.png"><meta data-rh="true" property="og:url" content="https://luke.geek.nz/azure/microsoft-azure-zonalallocationfailed/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Microsoft Azure - ZonalAllocationFailed | luke.geek.nz"><meta data-rh="true" name="description" content="Error code: AllocationFailed or ZonalAllocationFailed"><meta data-rh="true" property="og:description" content="Error code: AllocationFailed or ZonalAllocationFailed"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2022-07-27T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://luke.geek.nz"><meta data-rh="true" property="article:tag" content="Azure"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://luke.geek.nz/azure/microsoft-azure-zonalallocationfailed/"><link data-rh="true" rel="alternate" href="https://luke.geek.nz/azure/microsoft-azure-zonalallocationfailed/" hreflang="en"><link data-rh="true" rel="alternate" href="https://luke.geek.nz/azure/microsoft-azure-zonalallocationfailed/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://ZBH2T1WJQD-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://luke.geek.nz/azure/microsoft-azure-zonalallocationfailed","mainEntityOfPage":"https://luke.geek.nz/azure/microsoft-azure-zonalallocationfailed","url":"https://luke.geek.nz/azure/microsoft-azure-zonalallocationfailed","headline":"Microsoft Azure - ZonalAllocationFailed","name":"Microsoft Azure - ZonalAllocationFailed","description":"Error code: AllocationFailed or ZonalAllocationFailed","datePublished":"2022-07-27T00:00:00.000Z","author":{"@type":"Person","name":"Luke Murray","description":"Author","url":"https://luke.geek.nz","image":"https://luke.geek.nz/img/logo.png"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://luke.geek.nz/","name":"Lukes Tech Blog - Unleashing the power of the cloud and other technologies!"}}</script><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="luke.geek.nz RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="luke.geek.nz Atom Feed">
<link rel="alternate" type="application/json" href="/feed.json" title="luke.geek.nz JSON Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0QDLBY7NNN"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-0QDLBY7NNN",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.dcdba76e.css">
<script src="/assets/js/runtime~main.e25921c1.js" defer="defer"></script>
<script src="/assets/js/main.da915e79.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#D3D3D3" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">If you haven't already make sure you sign up for my Weekly Azure Newsletter, straight to your inbox! <a target="_blank" rel="noopener noreferrer" href="https://newsletter.azurefeeds.com/join">Subscribe now!</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="luke.geek.nz" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="luke.geek.nz" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">luke.geek.nz</b></a><a class="navbar__item navbar__link" href="/Tags/">Tags</a><a class="navbar__item navbar__link" href="/Archive/">Blog</a><a class="navbar__item navbar__link" href="/about/">About</a></div><div class="navbar__items navbar__items--right"><a href="https://www.youtube.com/channel/UCUG3TKDTAZz4UXshGrjBBoQ" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-icon" aria-label="YouTube">
              <svg width="24" height="24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                <path d="M23.498,6.186c-0.273-1.186-1.143-2.144-2.332-2.417C18.389,3.153,12,3.153,12,3.153s-6.389,0-9.166,0.616
                  c-1.19,0.273-2.06,1.23-2.332,2.417C0,8.07,0,12,0,12s0,3.93,0.502,5.814c0.272,1.187,1.142,2.062,2.332,2.335
                  C5.611,20.847,12,20.847,12,20.847s6.389,0,9.166-0.698c1.189-0.273,2.059-1.148,2.332-2.335C24,15.93,24,12,24,12
                  S24,8.07,23.498,6.186z M9.545,15.568V8.432l6.545,3.568L9.545,15.568z"/>
              </svg>
            </a><a href="https://aus.social/@lukemurray" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-icon" aria-label="Mastodon">
              <svg height="20" width="20" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" xml:space="preserve">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                  <path d="M21.327 8.566c0-4.339-2.843-5.61-2.843-5.61-1.433-.658-3.894-.935-6.451-.956h-.063c-2.557.021-5.016.298-6.45.956 0 0-2.843 1.272-2.843 5.61 0 .993-.019 2.181.012 3.441.103 4.243.778 8.425 4.701 9.463 1.809.479 3.362.579 4.612.510 2.268-.126 3.541-.809 3.541-.809l-.075-1.646s-1.621.511-3.441.449c-1.804-.062-3.707-.194-3.999-2.409a4.523 4.523 0 0 1-.04-.621s1.77.433 4.014.536c1.372.063 2.658-.08 3.965-.236 2.506-.299 4.688-1.843 4.962-3.254.434-2.223.398-5.424.398-5.424zm-3.353 5.59h-2.081V9.057c0-1.075-.452-1.62-1.357-1.62-1 0-1.501.647-1.501 1.927v2.791h-2.069V9.364c0-1.28-.501-1.927-1.502-1.927-.905 0-1.357.546-1.357 1.62v5.099H6.026V8.903c0-1.074.273-1.927.823-2.558.566-.631 1.307-.955 2.228-.955 1.065 0 1.872.409 2.405 1.228l.518.869.519-.869c.533-.819 1.34-1.228 2.405-1.228.92 0 1.662.324 2.228.955.549.631.822 1.484.822 2.558v5.253z"></path>
                </g>
              </svg>
            </a><a href="https://bsky.app/profile/lukemurraynz.bsky.social" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-icon" aria-label="Bluesky">
              <svg class="octicon" xmlns="http://www.w3.org/2000/svg" role="img" viewBox="0 0 16 16" height="20" width="20" fill="currentColor">
                <title>Bluesky</title>
                <path d="M8 7.2c-.72-1.4-2.7-4.04-4.53-5.33C1.7.63 1.04.84.6 1.04.1 1.27 0 2.05 0 2.51c0 .46.25 3.77.42 4.32.54 1.82 2.47 2.45 4.25 2.25-2.6.38-4.92 1.33-1.88 4.71 3.33 3.46 4.57-.74 5.21-2.87.64 2.13 1.37 6.18 5.16 2.87 2.84-2.87.78-4.33-1.83-4.71 1.78.2 3.71-.43 4.25-2.25.17-.55.42-3.86.42-4.32 0-.46-.09-1.24-.6-1.47-.44-.2-1.11-.42-2.87.83A17.87 17.87 0 0 0 8 7.2Z"></path>
              </svg>
            </a><a href="https://twitter.com/lukemurraynz" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-icon" aria-label="X"><svg height="20" width="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 8.586l4.293-4.293a1 1 0 011.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 011.414-1.414L10 8.586z" clip-rule="evenodd"/>
          </svg></a><a href="https://www.linkedin.com/in/ljmurray/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-icon" aria-label="LinkedIn"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"></path></svg></a><a href="https://luke.geek.nz/rss" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-rss-link" aria-label="RSS"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/azure/nz-north-latency-testing/">New Zealand North Latency Testing and Results</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/azure/enhancing-github-copilot-with-custom-instructions/">Enhancing GitHub Copilot with Custom Instructions</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/azure/change-analysis/">Azure Resource - Change Analysis</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/misc/kubernetes-enterprise-guide-book-review/">Book Review - Kubernetes – An Enterprise Guide</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/azure/openai-adoption-challenges-solutions/">Common Challenges and Solutions for Azure OpenAI Adoption</a></li></ul></div></nav></aside><main class="col col--7"><article><header><h1 class="title_f1Hy">Microsoft Azure - ZonalAllocationFailed</h1><div class="container_mt6G margin-vert--md"><time datetime="2022-07-27T00:00:00.000Z">July 27, 2022</time> · <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://luke.geek.nz" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://luke.geek.nz/img/logo.png" alt="Luke Murray"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://luke.geek.nz" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">Luke Murray</span></a></div><small class="authorTitle_nd0D" title="Author">Author</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div id="__blog-post-container" class="markdown"><blockquote>
<p><strong>Error code</strong>: AllocationFailed or ZonalAllocationFailed</p>
<p><strong>Error message</strong>: &quot;Allocation failed. We do not have sufficient capacity for the requested VM size in this region. Read more about improving likelihood of allocation success at <a href="https://aka.ms/allocation-guidance?WT.mc_id=AZ-MVP-5004796" target="_blank" rel="noopener noreferrer" title="https://aka.ms/allocation-guidance">https://aka.ms/allocation-guidance</a>&quot;</p>
</blockquote>
<p>When you create a virtual machine <em>(VM)</em>, start stopped <em>(deallocated)</em> VMs, or resize a VM, Microsoft Azure allocates compute resources to your subscription.</p>
<p><img decoding="async" loading="lazy" alt="ZonalAllocationFailed" src="/assets/images/zonalallocationfailed-d3444d5a5ebfba3d83efb1663e5ca216.png" title="ZonalAllocationFailed" width="831" height="122" class="img_ev3q"></p>
<p>Microsoft is continually investing in additional infrastructure and features to ensure that they always have all VM types available to support customer demand. However, you may occasionally experience resource allocation failures because of unprecedented growth in demand for Azure services in specific regions.</p>
<p>These tips, also apply to the &#x27;Following SKUs have failed for Capacity Restrictions&#x27; error.</p>
<p>This error could also be caused by a parameter issue with your Infrastructure as Code deployments, if you are to restrictive and it attempts to create a resource that isn&#x27;t supported - an example is a SKU that doesn&#x27;t support Accelerated Networking, or an attempt to deploy an Ultra SSD disk for a SKU that doesn&#x27;t deploy it.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="waiting-for-more-compute-to-be-added-to-the-azure-server-clusters-may-not-be-an-option-so-what-can-you-do"><strong>Waiting for more Compute to be added to the Azure server clusters may not be an option, so what can you do?</strong><a href="#waiting-for-more-compute-to-be-added-to-the-azure-server-clusters-may-not-be-an-option-so-what-can-you-do" class="hash-link" aria-label="Direct link to waiting-for-more-compute-to-be-added-to-the-azure-server-clusters-may-not-be-an-option-so-what-can-you-do" title="Direct link to waiting-for-more-compute-to-be-added-to-the-azure-server-clusters-may-not-be-an-option-so-what-can-you-do">​</a></h4>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="raise-a-support-case">Raise a Support Case<a href="#raise-a-support-case" class="hash-link" aria-label="Direct link to Raise a Support Case" title="Direct link to Raise a Support Case">​</a></h5>
<ul>
<li>Take a screenshot of the error</li>
<li>Copy the Activity/Deployment ID</li>
<li>Take note of the Region</li>
<li>Take note of the Availability Zone.</li>
</ul>
<p>Let <a href="https://azure.microsoft.com/en-us/support/?WT.mc_id=AZ-MVP-5004796" target="_blank" rel="noopener noreferrer" title=" Azure Support">Azure Support</a> know; that Microsoft may already be aware, but raising a support request helps identify potentially impacted customers. If you know of other SKUs you need to deploy, you can let them know.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="purchase-on-demand-capacity-reservation">Purchase On-demand Capacity Reservation<a href="#purchase-on-demand-capacity-reservation" class="hash-link" aria-label="Direct link to Purchase On-demand Capacity Reservation" title="Direct link to Purchase On-demand Capacity Reservation">​</a></h5>
<p><a href="https://learn.microsoft.com/en-us/azure/virtual-machines/capacity-reservation-overview?WT.mc_id=AZ-MVP-5004796" target="_blank" rel="noopener noreferrer" title="On-demand Capacity Reservation">On-demand Capacity Reservation</a> enables you to reserve Compute capacity in an Azure region or an Availability Zone for any duration of time.</p>
<p>Unlike <a href="https://azure.microsoft.com/en-us/pricing/reserved-vm-instances/?WT.mc_id=AZ-MVP-5004796" target="_blank" rel="noopener noreferrer" title="Reserved Instances">Reserved Instances</a>, you do not have to sign up for a 1-year or a 3-year term commitment.</p>
<p>Once the Capacity Reservation is created, the capacity is available immediately and is exclusively reserved for your use until the reservation is deleted.</p>
<p>Capacity Reservations are priced at the same rate as the underlying VM size.</p>
<p>For example, if you create a reservation for the D2s_v3 VMs, you will start getting billed for the D2s_v3 VMs, even if the reservation is not being used.</p>
<p>So why would you purchase On-demand Capacity reservations?</p>
<ul>
<li>You are operating Azure workloads that scale out and run off a fresh image, like a Citrix farm and want to ensure the capacity is available for the minimum workloads you need.</li>
<li>You have a project coming up where you need the capacity to be available.</li>
</ul>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="redeploy-to-another-availability-zone">Redeploy to another Availability Zone<a href="#redeploy-to-another-availability-zone" class="hash-link" aria-label="Direct link to Redeploy to another Availability Zone" title="Direct link to Redeploy to another Availability Zone">​</a></h5>
<p>The server cluster that ARM (Azure Resource Manager) attempted to deploy your workload may not have the necessary capacity, but another Availability Zone <em>(datacenter)</em> might.</p>
<p>Make sure your Virtual Machine is not in a Proximtry or Avalibility Group and do the following.</p>
<ol>
<li><strong>Take note of the Availability Zone that your deployment failed</strong> <em>(i.e. Availability Zone 1)</em></li>
<li><strong>Remove any resources</strong> that may have been created as part of the original failed deployment.</li>
<li><strong>Redeploy</strong> your workload and <strong>select</strong> another Availability <strong>Zone</strong>, such as <em>(2 - if your failed deployment was in Zone 1)</em></li>
</ol>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="change-the-virtual-machine-version">Change the Virtual Machine version<a href="#change-the-virtual-machine-version" class="hash-link" aria-label="Direct link to Change the Virtual Machine version" title="Direct link to Change the Virtual Machine version">​</a></h5>
<p>By version, I don&#x27;t mean <a href="https://learn.microsoft.com/en-us/azure/virtual-machines/generation-2?WT.mc_id=AZ-MVP-5004796#features-and-capabilities" target="_blank" rel="noopener noreferrer" title="Generation 1 vs. generation 2 features">Generation 1 and Generation 2</a> Virtual Machines; I mean the version of underlying Compute; when you look at a VM SKU size, you will see:</p>
<blockquote>
<p>Standard_DC24s_<strong>v3</strong></p>
<p>[Family] + <em>[Sub-family]</em>* + [# of vCPUs] + <em>[Constrained vCPUs]</em>* + [Additive Features] + <em>[Accelerator Type]</em>* + <strong>[Version]</strong></p>
</blockquote>
<p>You can read more about Virtual Machine Naming conversions &quot;<a href="https://learn.microsoft.com/en-us/azure/virtual-machines/vm-naming-conventions?WT.mc_id=AZ-MVP-5004796" target="_blank" rel="noopener noreferrer" title="Azure virtual machine sizes naming conventions">here</a>&quot;.</p>
<p>The version of the VM series links to the underlying hardware associated with the Virtual Machine series; with most new hardware releases, the version changes; an example is: from v3 to v4.</p>
<blockquote>
<p>#Tip: Microsoft may run a promotion on the pricing for early adopters from time to time, to move to the new version; they can be seen from the Azure Portal with &quot;Promo&quot; in the name.</p>
</blockquote>
<ol>
<li>You can <strong>change the version of the SKU</strong> by looking in the Azure Portal, <strong>Sizing</strong>, and you should be <strong>select</strong> different <strong>versions</strong> of the same SKU; <em>if you are at v5, try resizing to v4 - or the other way around</em>.</li>
</ol>
<p>Remember that changing the VM SKU will force the Virtual Machine to deallocate <em>(stop)</em>, as it triggers ARM to stand up the Virtual Machine on different server clusters/hardware.</p>
<p><em>I have found that there are no noticeable decreases in performance for most workloads, but keep in mind you may be returning on older hardware - but it should get you going, and then you can update the SKU to the latest version later.</em></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="increase-regional-vcpu-quotas">Increase regional vCPU quotas<a href="#increase-regional-vcpu-quotas" class="hash-link" aria-label="Direct link to Increase regional vCPU quotas" title="Direct link to Increase regional vCPU quotas">​</a></h5>
<p>Azure Resource Manager enforces two types of vCPU quotas for virtual machines:</p>
<ul>
<li>
<p>standard vCPU quotas</p>
</li>
<li>
<p>spot vCPU quotas
Standard vCPU quotas apply to pay-as-you-go VMs and reserved VM instances. They are enforced at two tiers, for each subscription, in each region:</p>
</li>
<li>
<p>The first tier is the total regional vCPU quota.</p>
</li>
<li>
<p>The second tier is the VM-family vCPU quota such as D-series vCPUs.</p>
</li>
</ul>
<p>Check your subscription quotas and if necessary, raise a request to increase them by following the guide here: [Increase regional vCPU quotas]{<a href="https://learn.microsoft.com/azure/quotas/regional-quota-requests?WT.mc_id=AZ-MVP-5004796%7D" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/azure/quotas/regional-quota-requests?WT.mc_id=AZ-MVP-5004796}</a></p></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/tags/azure/">Azure</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/2022/08/09/create-a-public-holidays-api-using-microsoft-azure/"><div class="pagination-nav__sublabel">Newer post</div><div class="pagination-nav__label">Create a Public Holidays API using Microsoft Azure</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/azure/azure-virtual-machine-and-mac-address-software-licensing/"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">Azure Virtual Machine and a custom MAC address</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#waiting-for-more-compute-to-be-added-to-the-azure-server-clusters-may-not-be-an-option-so-what-can-you-do" class="table-of-contents__link toc-highlight"><strong>Waiting for more Compute to be added to the Azure server clusters may not be an option, so what can you do?</strong></a><ul><li><a href="#raise-a-support-case" class="table-of-contents__link toc-highlight">Raise a Support Case</a></li><li><a href="#purchase-on-demand-capacity-reservation" class="table-of-contents__link toc-highlight">Purchase On-demand Capacity Reservation</a></li><li><a href="#redeploy-to-another-availability-zone" class="table-of-contents__link toc-highlight">Redeploy to another Availability Zone</a></li><li><a href="#change-the-virtual-machine-version" class="table-of-contents__link toc-highlight">Change the Virtual Machine version</a></li><li><a href="#increase-regional-vcpu-quotas" class="table-of-contents__link toc-highlight">Increase regional vCPU quotas</a></li></ul></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 luke.geek.nz. Powered by coffee, clouds and hamsters on wheels!</div></div></div></footer></div>
</body>
</html>